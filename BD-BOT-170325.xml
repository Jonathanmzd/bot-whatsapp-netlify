<?xml version="1.0" encoding="UTF-8"?>
<exp:Export Version="3.0"
    xmlns:L7p="http://www.layer7tech.com/ws/policy"
    xmlns:exp="http://www.layer7tech.com/ws/policy/export" xmlns:wsp="http://schemas.xmlsoap.org/ws/2002/12/policy">
    <exp:References>
        <IDProviderReference RefType="com.l7tech.console.policy.exporter.IdProviderReference">
            <GOID>0000000000000000fffffffffffffffe</GOID>
            <Name>Internal Identity Provider</Name>
            <Props>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGphdmEgdmVyc2lvbj0iMTEu&#xd;
MC4xNSIgY2xhc3M9ImphdmEuYmVhbnMuWE1MRGVjb2RlciI+CiA8b2JqZWN0IGNsYXNzPSJqYXZh&#xd;
LnV0aWwuSGFzaE1hcCI+CiAgPHZvaWQgbWV0aG9kPSJwdXQiPgogICA8c3RyaW5nPmFkbWluRW5h&#xd;
YmxlZDwvc3RyaW5nPgogICA8Ym9vbGVhbj50cnVlPC9ib29sZWFuPgogIDwvdm9pZD4KIDwvb2Jq&#xd;
ZWN0Pgo8L2phdmE+Cg==</Props>
            <TypeVal>1</TypeVal>
        </IDProviderReference>
        <JdbcConnectionReference RefType="com.l7tech.console.policy.exporter.JdbcConnectionReference">
            <ConnectionName>BDprueba</ConnectionName>
            <DriverClass>com.l7tech.jdbc.mysql.MySQLDriver</DriverClass>
            <JdbcUrl>jdbc:mysql://localhost:3306/bot_responses?useSSL=false&amp;serverTimezone=UTC</JdbcUrl>
            <UserName>user_prueba</UserName>
            <AdditionalProperties>
                <Property>
                    <Name>EnableCancelTimeout</Name>
                    <Value>true</Value>
                </Property>
            </AdditionalProperties>
        </JdbcConnectionReference>
    </exp:References>
    <wsp:Policy xmlns:L7p="http://www.layer7tech.com/ws/policy" xmlns:wsp="http://schemas.xmlsoap.org/ws/2002/12/policy">
        <wsp:All wsp:Usage="Required">
            <L7p:AuditDetailAssertion>
                <L7p:Detail stringValueReference="inline"><![CDATA[HTTP URI: ${request.http.uri}
HTTP URL: ${request.url}]]></L7p:Detail>
            </L7p:AuditDetailAssertion>
            <L7p:AuditDetailAssertion>
                <L7p:Detail stringValueReference="inline"><![CDATA[HTTP Method: ${request.http.method}
ContentType : ${request.contentType}]]></L7p:Detail>
            </L7p:AuditDetailAssertion>
            <L7p:AuditDetailAssertion>
                <L7p:Detail stringValue="Headers: ${request.http.allheadervalues}"/>
            </L7p:AuditDetailAssertion>
            <L7p:AuditDetailAssertion>
                <L7p:Detail stringValueReference="inline"><![CDATA[Cookies: ${request.http.cookies},
CookiesName: ${request.http.cookienames}]]></L7p:Detail>
            </L7p:AuditDetailAssertion>
            <L7p:AuditDetailAssertion>
                <L7p:Detail stringValue="CookiesName: ${request.http.cookienames}"/>
            </L7p:AuditDetailAssertion>
            <L7p:AuditDetailAssertion>
                <L7p:Detail stringValueReference="inline"><![CDATA[IP's && Hosts      
localAddress: ${request.tcp.localAddress}
localIP: ${request.tcp.localIP}
localHost: ${request.tcp.localHost}
remoteIP: ${request.tcp.remoteIP}
remoteHost: ${request.tcp.remoteHost}
remotePort: ${request.tcp.remotePort}]]></L7p:Detail>
            </L7p:AuditDetailAssertion>
            <L7p:AuditDetailAssertion>
                <L7p:Detail stringValue="User: ${request.clientid}"/>
            </L7p:AuditDetailAssertion>
            <L7p:AuditDetailAssertion>
                <L7p:Detail stringValueReference="inline"><![CDATA[SSL: ${request.http.secure}
SSL.Protocol: ${request.ssl.protocol}
SSL.ciphersuite: ${request.ssl.ciphersuite}
SSL.keysize: ${request.ssl.keysize}]]></L7p:Detail>
            </L7p:AuditDetailAssertion>
            <L7p:AuditDetailAssertion>
                <L7p:Detail stringValue="HTTP parameters: ${request.http.parameters}"/>
            </L7p:AuditDetailAssertion>
            <L7p:AuditDetailAssertion>
                <L7p:Detail stringValueReference="inline"><![CDATA[HTTP parameter request.http.queryString: ${request.http.queryString},
HTTP parameter request.http.query: ${request.url.query}]]></L7p:Detail>
            </L7p:AuditDetailAssertion>
            <L7p:AuditDetailAssertion>
                <L7p:Detail stringValue="Solicitud Inicial: ${request.mainpart}"/>
                <L7p:Level stringValue="WARNING"/>
            </L7p:AuditDetailAssertion>
            <L7p:HttpBasic>
                <L7p:Enabled booleanValue="false"/>
            </L7p:HttpBasic>
            <L7p:SpecificUser>
                <L7p:Enabled booleanValue="false"/>
                <L7p:IdentityProviderOid goidValue="0000000000000000fffffffffffffffe"/>
                <L7p:UserLogin stringValue="wsOrfeo"/>
                <L7p:UserName stringValue="wsOrfeo"/>
                <L7p:UserUid stringValue="3dfe864f01b5937519a4e93a8db573a4"/>
            </L7p:SpecificUser>
            <wsp:OneOrMore wsp:Usage="Required">
                <L7p:CommentAssertion>
                    <L7p:Comment stringValue="Service Provider Configuration"/>
                </L7p:CommentAssertion>
                <wsp:All wsp:Usage="Required">
                    <L7p:CommentAssertion>
                        <L7p:Comment stringValue="GET /sdm/ServiceProviderConfigs"/>
                    </L7p:CommentAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="Service Provider Configuration"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:Regex>
                        <L7p:AutoTarget booleanValue="false"/>
                        <L7p:IncludeEntireExpressionCapture booleanValue="false"/>
                        <L7p:OtherTargetMessageVariable stringValue="request.http.uri"/>
                        <L7p:Regex stringValue="/sdm/ServiceProviderConfigs"/>
                        <L7p:RegexName stringValue="Evaluar si el GET es /orfeo/ServiceProviderConfigs"/>
                        <L7p:Replacement stringValue=""/>
                        <L7p:Target target="OTHER"/>
                    </L7p:Regex>
                    <L7p:ComparisonAssertion>
                        <L7p:CaseSensitive booleanValue="false"/>
                        <L7p:Expression1 stringValue="${request.http.method}"/>
                        <L7p:Operator operatorNull="null"/>
                        <L7p:Predicates predicates="included">
                            <L7p:item dataType="included">
                                <L7p:Type variableDataType="string"/>
                            </L7p:item>
                            <L7p:item binary="included">
                                <L7p:RightValue stringValue="GET"/>
                            </L7p:item>
                        </L7p:Predicates>
                    </L7p:ComparisonAssertion>
                    <L7p:CommentAssertion>
                        <L7p:Comment stringValue="Devuelve respuesta Parametro de Configuracion"/>
                    </L7p:CommentAssertion>
                    <L7p:HardcodedResponse>
                        <L7p:Base64ResponseBody stringValue="ewogICJzY2hlbWFzIjogWyJ1cm46c2NpbTpzY2hlbWFzOmNvcmU6MS4wIl0sCiAgImRvY3VtZW50YXRpb25VcmwiOiJodHRwOi8vZXhhbXBsZS5jb20vaGVscC9zY2ltLmh0bWwiLAogICJwYXRjaCI6IHsKICAgICJzdXBwb3J0ZWQiOnRydWUKICB9LAogICJidWxrIjogewogICAgInN1cHBvcnRlZCI6ZmFsc2UsCiAgICAibWF4T3BlcmF0aW9ucyI6MTAwMCwKICAgICJtYXhQYXlsb2FkU2l6ZSI6MTA0ODU3NgogIH0sCiAgImZpbHRlciI6IHsKICAgICJzdXBwb3J0ZWQiOnRydWUsCiAgICAibWF4UmVzdWx0cyI6IDIwMAogIH0sCiAgImNoYW5nZVBhc3N3b3JkIiA6IHsKICAgICJzdXBwb3J0ZWQiOnRydWUKICB9LAogICJzb3J0IjogewogICAgInN1cHBvcnRlZCI6ZmFsc2UKICB9LAogICJldGFnIjogewogICAgInN1cHBvcnRlZCI6ZmFsc2UKICB9LAogICJ4bWxEYXRhRm9ybWF0IjogewogICAgInN1cHBvcnRlZCI6ZmFsc2UKICB9LAogICJhdXRoZW50aWNhdGlvblNjaGVtZXMiOiBbCiAgICB7CiAgICAgICJuYW1lIjogIkhUVFAgQmFzaWMiLAogICAgICAiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gU2NoZW1lIHVzaW5nIHRoZSBIdHRwIEJhc2ljIFN0YW5kYXJkIiwKICAgICAgInNwZWNVcmwiOiJodHRwOi8vd3d3LmlldGYub3JnL3JmYy9yZmMyNjE3LnR4dCIsCiAgICAgICJkb2N1bWVudGF0aW9uVXJsIjoiaHR0cDovL2V4YW1wbGUuY29tL2hlbHAvaHR0cEJhc2ljLmh0bWwiLAogICAgICAidHlwZSI6Imh0dHBiYXNpYyIKICAgICB9CiAgXQp9"/>
                        <L7p:EarlyResponse booleanValue="true"/>
                        <L7p:ResponseContentType stringValue="application/json; charset=UTF-8"/>
                    </L7p:HardcodedResponse>
                </wsp:All>
                <L7p:CommentAssertion>
                    <L7p:Comment stringValue="Schemas"/>
                </L7p:CommentAssertion>
                <wsp:All wsp:Usage="Required">
                    <L7p:CommentAssertion>
                        <L7p:Comment stringValue="Schemas"/>
                    </L7p:CommentAssertion>
                    <L7p:CommentAssertion>
                        <L7p:Comment stringValue="GET /sdm/Schemas"/>
                    </L7p:CommentAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="HTTP URL SCHEMA : ${request.http.uri}"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="HTTP Method SCHEMA : ${request.http.method}"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:Regex>
                        <L7p:AutoTarget booleanValue="false"/>
                        <L7p:IncludeEntireExpressionCapture booleanValue="false"/>
                        <L7p:OtherTargetMessageVariable stringValue="request.http.uri"/>
                        <L7p:Regex stringValue="/sdm/*"/>
                        <L7p:RegexName stringValue="Evalua si el GET es /sdm/*"/>
                        <L7p:Replacement stringValue=""/>
                        <L7p:Target target="OTHER"/>
                    </L7p:Regex>
                    <L7p:ComparisonAssertion>
                        <L7p:CaseSensitive booleanValue="false"/>
                        <L7p:Expression1 stringValue="${request.http.method}"/>
                        <L7p:Operator operatorNull="null"/>
                        <L7p:Predicates predicates="included">
                            <L7p:item dataType="included">
                                <L7p:Type variableDataType="string"/>
                            </L7p:item>
                            <L7p:item binary="included">
                                <L7p:RightValue stringValue="GET"/>
                            </L7p:item>
                        </L7p:Predicates>
                    </L7p:ComparisonAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="Respuesta con el Schema"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:HardcodedResponse>
                        <L7p:Base64ResponseBody stringValue="ewogICAgICAic2NoZW1hcyI6WwogICAgICAidXJuOnNjaW06c2NoZW1hczpjb3JlOjIuMCIKICAgXSwKICAgIlJlc291cmNlcyI6WwogICAgICB7CiAgICAgICAgICJuYW1lIjoiVXNlciIsCiAgICAgICAgICJkZXNjcmlwdGlvbiI6IlNDSU0gY29yZSByZXNvdXJjZSBmb3IgcmVwcmVzZW50aW5nIHVzZXJzIiwKICAgICAgICAgInNjaGVtYSI6InVybjpzY2ltOnNjaGVtYXM6Y29yZToyLjAiLAogICAgICAgICAiZW5kcG9pbnQiOiJVc2VycyIsCiAgICAgICAgICJhdHRyaWJ1dGVzIjpbCgkJCXsKICAgICAgICAgICAgICAgIm5hbWUiOiJ1c2VyTmFtZSIsCiAgICAgICAgICAgICAgICJ0eXBlIjoic3RyaW5nIiwKICAgICAgICAgICAgICAgIm11bHRpVmFsdWVkIjpmYWxzZSwKICAgICAgICAgICAgICAgImRlc2NyaXB0aW9uIjoiVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBTQ0lNIFJlc291cmNlIGFzIGRlZmluZWQgYnkgdGhlIFNlcnZpY2UgUHJvdmlkZXIiLAogICAgICAgICAgICAgICAic2NoZW1hIjoidXJuOnNjaW06c2NoZW1hczpjb3JlOjIuMCIsCiAgICAgICAgICAgICAgICJyZWFkT25seSI6ZmFsc2UsCiAgICAgICAgICAgICAgICJyZXF1aXJlZCI6dHJ1ZSwKICAgICAgICAgICAgICAgImNhc2VFeGFjdCI6ZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAibmFtZSI6IkNvcnJlbyIsCiAgICAgICAgICAgICAgICJ0eXBlIjoic3RyaW5nIiwKICAgICAgICAgICAgICAgIm11bHRpVmFsdWVkIjpmYWxzZSwKICAgICAgICAgICAgICAgImRlc2NyaXB0aW9uIjoiVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBSZXNvdXJjZSBhcyBkZWZpbmVkIGJ5IHRoZSBTZXJ2aWNlIENvbnN1bWVyIiwKICAgICAgICAgICAgICAgInNjaGVtYSI6InVybjpzY2ltOnNjaGVtYXM6Y29yZToyLjAiLAogICAgICAgICAgICAgICAicmVhZE9ubHkiOmZhbHNlLAogICAgICAgICAgICAgICAicmVxdWlyZWQiOmZhbHNlLAogICAgICAgICAgICAgICAiY2FzZUV4YWN0IjpmYWxzZQogICAgICAgICAgICB9LAoJCQl7CiAgICAgICAgICAgICAgICJuYW1lIjoiUHJpbWVyTm9tYnJlIiwKICAgICAgICAgICAgICAgInR5cGUiOiJzdHJpbmciLAogICAgICAgICAgICAgICAibXVsdGlWYWx1ZWQiOmZhbHNlLAogICAgICAgICAgICAgICAiZGVzY3JpcHRpb24iOiJVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIFVzZXIiLAogICAgICAgICAgICAgICAic2NoZW1hIjoidXJuOnNjaW06c2NoZW1hczpjb3JlOjIuMCIsCiAgICAgICAgICAgICAgICJyZWFkT25seSI6ZmFsc2UsCiAgICAgICAgICAgICAgICJyZXF1aXJlZCI6ZmFsc2UsCiAgICAgICAgICAgICAgICJjYXNlRXhhY3QiOmZhbHNlCiAgICAgICAgICAgIH0sCgkJCXsKICAgICAgICAgICAgICAgIm5hbWUiOiJOb21icmVDb21wbGV0byIsCiAgICAgICAgICAgICAgICJ0eXBlIjoic3RyaW5nIiwKICAgICAgICAgICAgICAgIm11bHRpVmFsdWVkIjpmYWxzZSwKICAgICAgICAgICAgICAgImRlc2NyaXB0aW9uIjoiVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBVc2VyIiwKICAgICAgICAgICAgICAgInNjaGVtYSI6InVybjpzY2ltOnNjaGVtYXM6Y29yZToyLjAiLAogICAgICAgICAgICAgICAicmVhZE9ubHkiOmZhbHNlLAogICAgICAgICAgICAgICAicmVxdWlyZWQiOmZhbHNlLAogICAgICAgICAgICAgICAiY2FzZUV4YWN0IjpmYWxzZQogICAgICAgICAgICB9LCAgICAgICAgIAogICAgICAgICAgIHsKICAgICAgICAgICAgICAgIm5hbWUiOiJDYXJnbyIsCiAgICAgICAgICAgICAgICJ0eXBlIjoic3RyaW5nIiwKICAgICAgICAgICAgICAgIm11bHRpVmFsdWVkIjpmYWxzZSwKICAgICAgICAgICAgICAgImRlc2NyaXB0aW9uIjoiVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBVc2VyIiwKICAgICAgICAgICAgICAgInNjaGVtYSI6InVybjpzY2ltOnNjaGVtYXM6Y29yZToyLjAiLAogICAgICAgICAgICAgICAicmVhZE9ubHkiOmZhbHNlLAogICAgICAgICAgICAgICAicmVxdWlyZWQiOmZhbHNlLAogICAgICAgICAgICAgICAiY2FzZUV4YWN0IjpmYWxzZQogICAgICAgICAgICB9LAoJCQl7CiAgICAgICAgICAgICAgICJuYW1lIjoicGFzc3dvcmQiLAogICAgICAgICAgICAgICAidHlwZSI6InN0cmluZyIsCiAgICAgICAgICAgICAgICJtdWx0aVZhbHVlZCI6ZmFsc2UsCiAgICAgICAgICAgICAgICJkZXNjcmlwdGlvbiI6IlVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgUmVzb3VyY2UgYXMgZGVmaW5lZCBieSB0aGUgU2VydmljZSBDb25zdW1lciIsCiAgICAgICAgICAgICAgICJzY2hlbWEiOiJ1cm46c2NpbTpzY2hlbWFzOmNvcmU6Mi4wIiwKICAgICAgICAgICAgICAgInJlYWRPbmx5IjpmYWxzZSwKICAgICAgICAgICAgICAgInJlcXVpcmVkIjpmYWxzZSwKICAgICAgICAgICAgICAgImNhc2VFeGFjdCI6ZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICB7CiAgICAgICAgICAgICAgICJuYW1lIjoiUHJpbWVyQXBlbGxpZG8iLAogICAgICAgICAgICAgICAidHlwZSI6InN0cmluZyIsCiAgICAgICAgICAgICAgICJtdWx0aVZhbHVlZCI6ZmFsc2UsCiAgICAgICAgICAgICAgICJkZXNjcmlwdGlvbiI6IlVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgVXNlciIsCiAgICAgICAgICAgICAgICJzY2hlbWEiOiJ1cm46c2NpbTpzY2hlbWFzOmNvcmU6Mi4wIiwKICAgICAgICAgICAgICAgInJlYWRPbmx5IjpmYWxzZSwKICAgICAgICAgICAgICAgInJlcXVpcmVkIjpmYWxzZSwKICAgICAgICAgICAgICAgImNhc2VFeGFjdCI6ZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICB7CiAgICAgICAgICAgICAgICJuYW1lIjoiU0VHVU5ET19BUEVMTElETyIsCiAgICAgICAgICAgICAgICJ0eXBlIjoic3RyaW5nIiwKICAgICAgICAgICAgICAgIm11bHRpVmFsdWVkIjpmYWxzZSwKICAgICAgICAgICAgICAgImRlc2NyaXB0aW9uIjoiVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBVc2VyIiwKICAgICAgICAgICAgICAgInNjaGVtYSI6InVybjpzY2ltOnNjaGVtYXM6Y29yZToyLjAiLAogICAgICAgICAgICAgICAicmVhZE9ubHkiOmZhbHNlLAogICAgICAgICAgICAgICAicmVxdWlyZWQiOmZhbHNlLAogICAgICAgICAgICAgICAiY2FzZUV4YWN0IjpmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgIHsKICAgICAgICAgICAgICAgIm5hbWUiOiJTRUdVTkRPX05PTUJSRSIsCiAgICAgICAgICAgICAgICJ0eXBlIjoic3RyaW5nIiwKICAgICAgICAgICAgICAgIm11bHRpVmFsdWVkIjpmYWxzZSwKICAgICAgICAgICAgICAgImRlc2NyaXB0aW9uIjoiVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBVc2VyIiwKICAgICAgICAgICAgICAgInNjaGVtYSI6InVybjpzY2ltOnNjaGVtYXM6Y29yZToyLjAiLAogICAgICAgICAgICAgICAicmVhZE9ubHkiOmZhbHNlLAogICAgICAgICAgICAgICAicmVxdWlyZWQiOmZhbHNlLAogICAgICAgICAgICAgICAiY2FzZUV4YWN0IjpmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgIHsKICAgICAgICAgICAgICAgIm5hbWUiOiJEZXBlbmRlbmNpYSIsCiAgICAgICAgICAgICAgICJ0eXBlIjoic3RyaW5nIiwKICAgICAgICAgICAgICAgIm11bHRpVmFsdWVkIjpmYWxzZSwKICAgICAgICAgICAgICAgImRlc2NyaXB0aW9uIjoiVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBVc2VyIiwKICAgICAgICAgICAgICAgInNjaGVtYSI6InVybjpzY2ltOnNjaGVtYXM6Y29yZToyLjAiLAogICAgICAgICAgICAgICAicmVhZE9ubHkiOmZhbHNlLAogICAgICAgICAgICAgICAicmVxdWlyZWQiOmZhbHNlLAogICAgICAgICAgICAgICAiY2FzZUV4YWN0IjpmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgIHsKICAgICAgICAgICAgICAgIm5hbWUiOiJJRF9USVBPX0RPQ1VNRU5UTyIsCiAgICAgICAgICAgICAgICJ0eXBlIjoic3RyaW5nIiwKICAgICAgICAgICAgICAgIm11bHRpVmFsdWVkIjpmYWxzZSwKICAgICAgICAgICAgICAgImRlc2NyaXB0aW9uIjoiVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBVc2VyIiwKICAgICAgICAgICAgICAgInNjaGVtYSI6InVybjpzY2ltOnNjaGVtYXM6Y29yZToyLjAiLAogICAgICAgICAgICAgICAicmVhZE9ubHkiOmZhbHNlLAogICAgICAgICAgICAgICAicmVxdWlyZWQiOmZhbHNlLAogICAgICAgICAgICAgICAiY2FzZUV4YWN0IjpmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgIHsKICAgICAgICAgICAgICAgIm5hbWUiOiJEZXBlbmRlbmNpYSIsCiAgICAgICAgICAgICAgICJ0eXBlIjoic3RyaW5nIiwKICAgICAgICAgICAgICAgIm11bHRpVmFsdWVkIjpmYWxzZSwKICAgICAgICAgICAgICAgImRlc2NyaXB0aW9uIjoiVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBVc2VyIiwKICAgICAgICAgICAgICAgInNjaGVtYSI6InVybjpzY2ltOnNjaGVtYXM6Y29yZToyLjAiLAogICAgICAgICAgICAgICAicmVhZE9ubHkiOmZhbHNlLAogICAgICAgICAgICAgICAicmVxdWlyZWQiOmZhbHNlLAogICAgICAgICAgICAgICAiY2FzZUV4YWN0IjpmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICJuYW1lIjoiTnVtZXJvRG9jdW1lbnRvIiwKICAgICAgICAgICAgICAgInR5cGUiOiJzdHJpbmciLAogICAgICAgICAgICAgICAibXVsdGlWYWx1ZWQiOmZhbHNlLAogICAgICAgICAgICAgICAiZGVzY3JpcHRpb24iOiJVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIFJlc291cmNlIGFzIGRlZmluZWQgYnkgdGhlIFNlcnZpY2UgQ29uc3VtZXIiLAogICAgICAgICAgICAgICAic2NoZW1hIjoidXJuOnNjaW06c2NoZW1hczpjb3JlOjIuMCIsCiAgICAgICAgICAgICAgICJyZWFkT25seSI6ZmFsc2UsCiAgICAgICAgICAgICAgICJyZXF1aXJlZCI6ZmFsc2UsCiAgICAgICAgICAgICAgICJjYXNlRXhhY3QiOmZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgewogICAgICAgICAgICAgICAibmFtZSI6IkNBX0lETVVOSUNJUElPIiwKICAgICAgICAgICAgICAgInR5cGUiOiJzdHJpbmciLAogICAgICAgICAgICAgICAibXVsdGlWYWx1ZWQiOmZhbHNlLAogICAgICAgICAgICAgICAiZGVzY3JpcHRpb24iOiJVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIFVzZXIiLAogICAgICAgICAgICAgICAic2NoZW1hIjoidXJuOnNjaW06c2NoZW1hczpjb3JlOjIuMCIsCiAgICAgICAgICAgICAgICJyZWFkT25seSI6ZmFsc2UsCiAgICAgICAgICAgICAgICJyZXF1aXJlZCI6ZmFsc2UsCiAgICAgICAgICAgICAgICJjYXNlRXhhY3QiOmZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgewogICAgICAgICAgICAgICAibmFtZSI6IkNBX0lERU5USURBRCIsCiAgICAgICAgICAgICAgICJ0eXBlIjoic3RyaW5nIiwKICAgICAgICAgICAgICAgIm11bHRpVmFsdWVkIjpmYWxzZSwKICAgICAgICAgICAgICAgImRlc2NyaXB0aW9uIjoiVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBVc2VyIiwKICAgICAgICAgICAgICAgInNjaGVtYSI6InVybjpzY2ltOnNjaGVtYXM6Y29yZToyLjAiLAogICAgICAgICAgICAgICAicmVhZE9ubHkiOmZhbHNlLAogICAgICAgICAgICAgICAicmVxdWlyZWQiOmZhbHNlLAogICAgICAgICAgICAgICAiY2FzZUV4YWN0IjpmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgIHsKICAgICAgICAgICAgICAgIm5hbWUiOiJDQV9UTVBST0xFIiwKICAgICAgICAgICAgICAgInR5cGUiOiJzdHJpbmciLAogICAgICAgICAgICAgICAibXVsdGlWYWx1ZWQiOmZhbHNlLAogICAgICAgICAgICAgICAiZGVzY3JpcHRpb24iOiJVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIFVzZXIiLAogICAgICAgICAgICAgICAic2NoZW1hIjoidXJuOnNjaW06c2NoZW1hczpjb3JlOjIuMCIsCiAgICAgICAgICAgICAgICJyZWFkT25seSI6ZmFsc2UsCiAgICAgICAgICAgICAgICJyZXF1aXJlZCI6ZmFsc2UsCiAgICAgICAgICAgICAgICJjYXNlRXhhY3QiOmZhbHNlCiAgICAgICAgICAgIH0sCgkJCXsKICAgICAgICAgICAgICAgIm5hbWUiOiJDQV9JRERFUEFSVEFNRU5UTyIsCiAgICAgICAgICAgICAgICJ0eXBlIjoic3RyaW5nIiwKICAgICAgICAgICAgICAgIm11bHRpVmFsdWVkIjpmYWxzZSwKICAgICAgICAgICAgICAgImRlc2NyaXB0aW9uIjoiVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBVc2VyIiwKICAgICAgICAgICAgICAgInNjaGVtYSI6InVybjpzY2ltOnNjaGVtYXM6Y29yZToyLjAiLAogICAgICAgICAgICAgICAicmVhZE9ubHkiOmZhbHNlLAogICAgICAgICAgICAgICAicmVxdWlyZWQiOmZhbHNlLAogICAgICAgICAgICAgICAiY2FzZUV4YWN0IjpmYWxzZQogICAgICAgICAgICB9LAoJCQl7CiAgICAgICAgICAgICAgICJuYW1lIjoiQ0FfSURST0wiLAogICAgICAgICAgICAgICAidHlwZSI6InN0cmluZyIsCiAgICAgICAgICAgICAgICJtdWx0aVZhbHVlZCI6ZmFsc2UsCiAgICAgICAgICAgICAgICJkZXNjcmlwdGlvbiI6IlVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgVXNlciIsCiAgICAgICAgICAgICAgICJzY2hlbWEiOiJ1cm46c2NpbTpzY2hlbWFzOmNvcmU6Mi4wIiwKICAgICAgICAgICAgICAgInJlYWRPbmx5IjpmYWxzZSwKICAgICAgICAgICAgICAgInJlcXVpcmVkIjpmYWxzZSwKICAgICAgICAgICAgICAgImNhc2VFeGFjdCI6ZmFsc2UKICAgICAgICAgICAgfSwKCQkJewogICAgICAgICAgICAgICAibmFtZSI6InJvbCIsCiAgICAgICAgICAgICAgICJ0eXBlIjoiRmxleGkgLSBETiIsCiAgICAgICAgICAgICAgICJtdWx0aVZhbHVlZCI6dHJ1ZSwKICAgICAgICAgICAgICAgIm11bHRpVmFsdWVkQXR0cmlidXRlQ2hpbGROYW1lIjoicm9sIiwKICAgICAgICAgICAgICAgImRlc2NyaXB0aW9uIjoiQSBsaXN0IG9mIGdyb3VwcyB0aGF0IHRoZSB1c2VyIGJlbG9uZ3MgdG8iLAogICAgICAgICAgICAgICAic2NoZW1hIjoidXJuOnNjaW06c2NoZW1hczpjb3JlOjIuMCIsCiAgICAgICAgICAgICAgICJyZWFkT25seSI6ZmFsc2UsCiAgICAgICAgICAgICAgICJyZXF1aXJlZCI6ZmFsc2UsCiAgICAgICAgICAgICAgICJjYXNlRXhhY3QiOmZhbHNlLAogICAgICAgICAgICAgICAic3ViQXR0cmlidXRlcyI6WwogICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICJuYW1lIjoidmFsdWUiLAogICAgICAgICAgICAgICAgICAgICAidHlwZSI6InN0cmluZyIsCiAgICAgICAgICAgICAgICAgICAgICJtdWx0aVZhbHVlZCI6ZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICJkZXNjcmlwdGlvbiI6IlRoZSBJRCBvZiB0aGUgZ3JvdXBzIiwKICAgICAgICAgICAgICAgICAgICAgInJlYWRPbmx5IjpmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgInJlcXVpcmVkIjp0cnVlLAogICAgICAgICAgICAgICAgICAgICAiY2FzZUV4YWN0IjpmYWxzZQogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICJuYW1lIjoib3BlcmF0aW9uIiwKICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiJzdHJpbmciLAogICAgICAgICAgICAgICAgICAgICAibXVsdGlWYWx1ZWQiOmZhbHNlLAogICAgICAgICAgICAgICAgICAgICAiZGVzY3JpcHRpb24iOiJUaGUgb3BlcmF0aW9uIHRvIHBlcmZvcm0gb24gdGhlIG11bHRpLXZhbHVlZCBhdHRyaWJ1dGUgZHVyaW5nIGEgUEFUQ0ggcmVxdWVzdCIsCiAgICAgICAgICAgICAgICAgICAgICJyZWFkT25seSI6ZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICJyZXF1aXJlZCI6ZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICJjYXNlRXhhY3QiOmZhbHNlCiAgICAgICAgICAgICAgICAgIH0KCQkJCSAgXQoJCQl9LAoJCQl7CgkJCQkgIm5hbWUiOiJSb2xlcyIsCgkJCQkgImRlc2NyaXB0aW9uIjoiU0NJTSBjb3JlIHJlc291cmNlIGZvciByZXByZXNlbnRpbmcgUm9sZXMiLAoJCQkJICJzY2hlbWEiOiJ1cm46c2NpbTpzY2hlbWFzOmNvcmU6Mi4wIiwKCQkJCSAiZW5kcG9pbnQiOiJSb2xlcyIsCgkJCQkgImF0dHJpYnV0ZXMiOlsKICAgICAgICAgICAgICAgICAgIHsKCQkJCQkgICAibmFtZSI6Im5vbWJyZVJvbCIsCgkJCQkJICAgInR5cGUiOiJzdHJpbmciLAoJCQkJCSAgICJtdWx0aVZhbHVlZCI6ZmFsc2UsCgkJCQkJICAgImRlc2NyaXB0aW9uIjoiVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBTQ0lNIFJlc291cmNlIGFzIGRlZmluZWQgYnkgdGhlIFNlcnZpY2UgUHJvdmlkZXIiLAoJCQkJCSAgICJzY2hlbWEiOiJ1cm46c2NpbTpzY2hlbWFzOmNvcmU6Mi4wIiwKCQkJCQkgICAicmVhZE9ubHkiOnRydWUsCgkJCQkJICAgInJlcXVpcmVkIjpmYWxzZSwKCQkJCQkgICAiY2FzZUV4YWN0IjpmYWxzZQoJCQkJCX0KCQkJCV0KCQkJfQogICAgICAgICAgICAgCgkgIF0KCSAgfQpdCiAgfQ=="/>
                        <L7p:EarlyResponse booleanValue="true"/>
                        <L7p:ResponseContentType stringValue="application/json; charset=UTF-8"/>
                    </L7p:HardcodedResponse>
                    <L7p:HardcodedResponse>
                        <L7p:Base64ResponseBody stringValue="ewogICAidG90YWxSZXN1bHRzIjo0LAogICAiaXRlbXNQZXJQYWdlIjo0LAogICAic3RhcnRJbmRleCI6MSwKICAgInNjaGVtYXMiOlsKICAgICAgInVybjpzY2ltOnNjaGVtYXM6Y29yZToyLjAiCiAgIF0sCiAgICJSZXNvdXJjZXMiOlsKICAgICAgewogICAgICAgICAibmFtZSI6IlVzZXIiLAogICAgICAgICAiZGVzY3JpcHRpb24iOiJTQ0lNIGNvcmUgcmVzb3VyY2UgZm9yIHJlcHJlc2VudGluZyB1c2VycyIsCiAgICAgICAgICJzY2hlbWEiOiJ1cm46c2NpbTpzY2hlbWFzOmNvcmU6Mi4wIiwKICAgICAgICAgImVuZHBvaW50IjoiVXNlcnMiLAogICAgICAgICAiYXR0cmlidXRlcyI6WwogIHsKICAgICAgICAgICAgICAgIm5hbWUiOiJpZCIsCiAgICAgICAgICAgICAgICJ0eXBlIjoic3RyaW5nIiwKICAgICAgICAgICAgICAgIm11bHRpVmFsdWVkIjpmYWxzZSwKICAgICAgICAgICAgICAgImRlc2NyaXB0aW9uIjoiVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBTQ0lNIFJlc291cmNlIGFzIGRlZmluZWQgYnkgdGhlIFNlcnZpY2UgUHJvdmlkZXIiLAogICAgICAgICAgICAgICAic2NoZW1hIjoidXJuOnNjaW06c2NoZW1hczpjb3JlOjIuMCIsCiAgICAgICAgICAgICAgICJyZWFkT25seSI6dHJ1ZSwKICAgICAgICAgICAgICAgInJlcXVpcmVkIjp0cnVlLAogICAgICAgICAgICAgICAiY2FzZUV4YWN0IjpmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICJuYW1lIjoiZXh0ZXJuYWxJZCIsCiAgICAgICAgICAgICAgICJ0eXBlIjoic3RyaW5nIiwKICAgICAgICAgICAgICAgIm11bHRpVmFsdWVkIjpmYWxzZSwKICAgICAgICAgICAgICAgImRlc2NyaXB0aW9uIjoiVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBSZXNvdXJjZSBhcyBkZWZpbmVkIGJ5IHRoZSBTZXJ2aWNlIENvbnN1bWVyIiwKICAgICAgICAgICAgICAgInNjaGVtYSI6InVybjpzY2ltOnNjaGVtYXM6Y29yZToyLjAiLAogICAgICAgICAgICAgICAicmVhZE9ubHkiOmZhbHNlLAogICAgICAgICAgICAgICAicmVxdWlyZWQiOmZhbHNlLAogICAgICAgICAgICAgICAiY2FzZUV4YWN0IjpmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgIAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICJuYW1lIjoidXNlck5hbWUiLAogICAgICAgICAgICAgICAidHlwZSI6InN0cmluZyIsCiAgICAgICAgICAgICAgICJtdWx0aVZhbHVlZCI6ZmFsc2UsCiAgICAgICAgICAgICAgICJkZXNjcmlwdGlvbiI6IlVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgVXNlciIsCiAgICAgICAgICAgICAgICJzY2hlbWEiOiJ1cm46c2NpbTpzY2hlbWFzOmNvcmU6Mi4wIiwKICAgICAgICAgICAgICAgInJlYWRPbmx5IjpmYWxzZSwKICAgICAgICAgICAgICAgInJlcXVpcmVkIjp0cnVlLAogICAgICAgICAgICAgICAiY2FzZUV4YWN0IjpmYWxzZQogICAgICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgICAgICAgIm5hbWUiOiJjZWR1bGEiLAogICAgICAgICAgICAgICAidHlwZSI6InN0cmluZyIsCiAgICAgICAgICAgICAgICJtdWx0aVZhbHVlZCI6ZmFsc2UsCiAgICAgICAgICAgICAgICJkZXNjcmlwdGlvbiI6IlVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgVXNlciIsCiAgICAgICAgICAgICAgICJzY2hlbWEiOiJ1cm46c2NpbTpzY2hlbWFzOmNvcmU6Mi4wIiwKICAgICAgICAgICAgICAgInJlYWRPbmx5IjpmYWxzZSwKICAgICAgICAgICAgICAgInJlcXVpcmVkIjp0cnVlLAogICAgICAgICAgICAgICAiY2FzZUV4YWN0IjpmYWxzZQogICAgICAgICAgICB9LAoKCXsKICAgICAgICAgIm5hbWUiOiJSb2xlcyIsCiAgICAgICAgICJkZXNjcmlwdGlvbiI6IlNDSU0gY29yZSByZXNvdXJjZSBmb3IgcmVwcmVzZW50aW5nIGdyb3VwcyIsCiAgICAgICAgICJzY2hlbWEiOiJ1cm46c2NpbTpzY2hlbWFzOmNvcmU6Mi4wIiwKICAgICAgICAgImVuZHBvaW50IjoiR3JvdXBzIiwKICAgICAgICAgImF0dHJpYnV0ZXMiOlsKICAgICAgICAgICAgewogICAgICAgICAgICAgICAibmFtZSI6ImlkIiwKICAgICAgICAgICAgICAgInR5cGUiOiJzdHJpbmciLAogICAgICAgICAgICAgICAibXVsdGlWYWx1ZWQiOmZhbHNlLAogICAgICAgICAgICAgICAiZGVzY3JpcHRpb24iOiJVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIFNDSU0gUmVzb3VyY2UgYXMgZGVmaW5lZCBieSB0aGUgU2VydmljZSBQcm92aWRlciIsCiAgICAgICAgICAgICAgICJzY2hlbWEiOiJ1cm46c2NpbTpzY2hlbWFzOmNvcmU6Mi4wIiwKICAgICAgICAgICAgICAgInJlYWRPbmx5Ijp0cnVlLAogICAgICAgICAgICAgICAicmVxdWlyZWQiOnRydWUsCiAgICAgICAgICAgICAgICJjYXNlRXhhY3QiOmZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIm5hbWUiOiJkaXNwbGF5TmFtZSIsCiAgICAgICAgICAgICAgICJ0eXBlIjoic3RyaW5nIiwKICAgICAgICAgICAgICAgIm11bHRpVmFsdWVkIjpmYWxzZSwKICAgICAgICAgICAgICAgImRlc2NyaXB0aW9uIjoiQSBodW1hbiByZWFkYWJsZSBuYW1lIGZvciB0aGUgR3JvdXAiLAogICAgICAgICAgICAgICAic2NoZW1hIjoidXJuOnNjaW06c2NoZW1hczpjb3JlOjIuMCIsCiAgICAgICAgICAgICAgICJyZWFkT25seSI6ZmFsc2UsCiAgICAgICAgICAgICAgICJyZXF1aXJlZCI6dHJ1ZSwKICAgICAgICAgICAgICAgImNhc2VFeGFjdCI6ZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAibmFtZSI6InVybCIsCiAgICAgICAgICAgICAgICJ0eXBlIjoic3RyaW5nIiwKICAgICAgICAgICAgICAgIm11bHRpVmFsdWVkIjpmYWxzZSwKICAgICAgICAgICAgICAgImRlc2NyaXB0aW9uIjoiVGhlIEFQSSBVUkwgb2YgdGhlIGdyb3VwIiwKICAgICAgICAgICAgICAgInNjaGVtYSI6InVybjpzY2ltOnNjaGVtYXM6Y29yZToyLjAiLAogICAgICAgICAgICAgICAicmVhZE9ubHkiOnRydWUsCiAgICAgICAgICAgICAgICJyZXF1aXJlZCI6ZmFsc2UsCiAgICAgICAgICAgICAgICJjYXNlRXhhY3QiOmZhbHNlCiAgICAgICAgICAgIH0KICAgICAgICAgXSwKICAgICAgICAgImlkIjoidXJuOnNjaW06c2NoZW1hczpjb3JlOjIuMDpSb2xlcyIsCiAgICAgICAgICJtZXRhIjoKICAgICAgICAgewogICAgICAgICAgICAibG9jYXRpb24iOiJodHRwOi8vbGktamkwMjA4cjJ4NjRiOjgwODAvdjEvU2NoZW1hcy91cm46c2NpbTpzY2hlbWFzOmNvcmU6Mi4wOlJvbGVzIgogICAgICAgICB9CgkJIH0sCnsKICAgICAgICAgIm5hbWUiOiJQZXJmaWxlcyIsCiAgICAgICAgICJkZXNjcmlwdGlvbiI6IlNDSU0gY29yZSByZXNvdXJjZSBmb3IgcmVwcmVzZW50aW5nIHBlcmZpbGVzIiwKICAgICAgICAgInNjaGVtYSI6InVybjpzY2ltOnNjaGVtYXM6Y29yZToyLjAiLAogICAgICAgICAiZW5kcG9pbnQiOiJQZXJmaWxlc3MiLAogICAgICAgICAiYXR0cmlidXRlcyI6WwogICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAibmFtZSI6ImlkIiwKICAgICAgICAgICAgICAgInR5cGUiOiJzdHJpbmciLAogICAgICAgICAgICAgICAibXVsdGlWYWx1ZWQiOmZhbHNlLAogICAgICAgICAgICAgICAiZGVzY3JpcHRpb24iOiJVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIFNDSU0gUmVzb3VyY2UgYXMgZGVmaW5lZCBieSB0aGUgU2VydmljZSBQcm92aWRlciIsCiAgICAgICAgICAgICAgICJzY2hlbWEiOiJ1cm46c2NpbTpzY2hlbWFzOmNvcmU6Mi4wIiwKICAgICAgICAgICAgICAgInJlYWRPbmx5Ijp0cnVlLAogICAgICAgICAgICAgICAicmVxdWlyZWQiOnRydWUsCiAgICAgICAgICAgICAgICJjYXNlRXhhY3QiOmZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIm5hbWUiOiJkaXNwbGF5TmFtZSIsCiAgICAgICAgICAgICAgICJ0eXBlIjoic3RyaW5nIiwKICAgICAgICAgICAgICAgIm11bHRpVmFsdWVkIjpmYWxzZSwKICAgICAgICAgICAgICAgImRlc2NyaXB0aW9uIjoiQSBodW1hbiByZWFkYWJsZSBuYW1lIGZvciB0aGUgR3JvdXAiLAogICAgICAgICAgICAgICAic2NoZW1hIjoidXJuOnNjaW06c2NoZW1hczpjb3JlOjIuMCIsCiAgICAgICAgICAgICAgICJyZWFkT25seSI6ZmFsc2UsCiAgICAgICAgICAgICAgICJyZXF1aXJlZCI6dHJ1ZSwKICAgICAgICAgICAgICAgImNhc2VFeGFjdCI6ZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAibmFtZSI6InVybCIsCiAgICAgICAgICAgICAgICJ0eXBlIjoic3RyaW5nIiwKICAgICAgICAgICAgICAgIm11bHRpVmFsdWVkIjpmYWxzZSwKICAgICAgICAgICAgICAgImRlc2NyaXB0aW9uIjoiVGhlIEFQSSBVUkwgb2YgdGhlIGdyb3VwIiwKICAgICAgICAgICAgICAgInNjaGVtYSI6InVybjpzY2ltOnNjaGVtYXM6Y29yZToyLjAiLAogICAgICAgICAgICAgICAicmVhZE9ubHkiOnRydWUsCiAgICAgICAgICAgICAgICJyZXF1aXJlZCI6ZmFsc2UsCiAgICAgICAgICAgICAgICJjYXNlRXhhY3QiOmZhbHNlCiAgICAgICAgICAgIH0KICAgICAgICAgXSwKICAgICAgICAgImlkIjoidXJuOnNjaW06c2NoZW1hczpjb3JlOjIuMDpQZXJmaWxlcyIsCiAgICAgICAgICJtZXRhIjoKICAgICAgICAgewogICAgICAgICAgICAibG9jYXRpb24iOiJodHRwOi8vbGktamkwMjA4cjJ4NjRiOjgwODAvdjEvU2NoZW1hcy91cm46c2NpbTpzY2hlbWFzOmNvcmU6Mi4wOlBlcmZpbGVzIgogICAgICAgICB9Cn0KCgkgIF0KICAgICAgfQpdCiAgfQo="/>
                        <L7p:Enabled booleanValue="false"/>
                        <L7p:ResponseContentType stringValue="application/json; charset=UTF-8"/>
                    </L7p:HardcodedResponse>
                </wsp:All>
                <L7p:CommentAssertion>
                    <L7p:Comment stringValue="Listar Roles"/>
                </L7p:CommentAssertion>
                <wsp:All L7p:Enabled="false" wsp:Usage="Required">
                    <L7p:Regex>
                        <L7p:AutoTarget booleanValue="false"/>
                        <L7p:OtherTargetMessageVariable stringValue="request.http.uri"/>
                        <L7p:Regex stringValue="/corebachue/Roless"/>
                        <L7p:RegexName stringValue="Validate URI"/>
                        <L7p:Replacement stringValue=""/>
                        <L7p:Target target="OTHER"/>
                    </L7p:Regex>
                    <L7p:ComparisonAssertion>
                        <L7p:CaseSensitive booleanValue="false"/>
                        <L7p:Expression1 stringValue="${request.http.method}"/>
                        <L7p:Operator operatorNull="null"/>
                        <L7p:Predicates predicates="included">
                            <L7p:item dataType="included">
                                <L7p:Type variableDataType="string"/>
                            </L7p:item>
                            <L7p:item binary="included">
                                <L7p:RightValue stringValue="GET"/>
                            </L7p:item>
                        </L7p:Predicates>
                    </L7p:ComparisonAssertion>
                    <L7p:HardcodedResponse>
                        <L7p:Base64ResponseBody stringValue="ewoic2NoZW1hcyI6ClsidXJuOnNjaW06c2NoZW1hczpjb3JlOjEuMCJdLAoiUmVzb3VyY2VzIjpbIAogICAgICB7CiAgICAgICJub21icmVSb2wiOiAiQUJPR0FETyBSRVZJU09SIgogICB9Cl19"/>
                        <L7p:EarlyResponse booleanValue="true"/>
                        <L7p:Enabled booleanValue="false"/>
                        <L7p:ResponseContentType stringValue="application/json; charset=utf-8"/>
                    </L7p:HardcodedResponse>
                    <L7p:ComparisonAssertion>
                        <L7p:CaseSensitive booleanValue="false"/>
                        <L7p:Expression1 stringValue="${request.http.parameter.attributes}"/>
                        <L7p:Operator operatorNull="null"/>
                        <L7p:Predicates predicates="included">
                            <L7p:item dataType="included">
                                <L7p:Type variableDataType="string"/>
                            </L7p:item>
                            <L7p:item binary="included">
                                <L7p:RightValue stringValue="nombreRol"/>
                            </L7p:item>
                        </L7p:Predicates>
                    </L7p:ComparisonAssertion>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmZpbHRlcn0="/>
                        <L7p:VariableToSet stringValue="filtro"/>
                    </L7p:SetVariable>
                    <L7p:ComparisonAssertion>
                        <L7p:CaseSensitive booleanValue="false"/>
                        <L7p:Expression1 stringValue="${filtro}"/>
                        <L7p:Operator operatorNull="null"/>
                        <L7p:Predicates predicates="included">
                            <L7p:item dataType="included">
                                <L7p:Type variableDataType="string"/>
                            </L7p:item>
                            <L7p:item binary="included">
                                <L7p:Negated booleanValue="true"/>
                                <L7p:Operator operator="CONTAINS"/>
                                <L7p:RightValue stringValue="nombreRol eq"/>
                            </L7p:item>
                        </L7p:Predicates>
                    </L7p:ComparisonAssertion>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="PHNvYXBlbnY6RW52ZWxvcGUgeG1sbnM6c29hcGVudj0iaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9lbnZlbG9wZS8iIHhtbG5zOnVybj0idXJuOk9yZmVvIj4NCiAgIDxzb2FwZW52OkhlYWRlci8+DQogICA8c29hcGVudjpCb2R5Pg0KICAgICAgPHVybjpjb25zdWx0YXJQZXJmaWxlc1Npc3RlbWE+DQogICAgICAgICA8Y29kX2FwcD4yMDwvY29kX2FwcD4NCiAgICAgICAgIDx1c2VyT3JmZW8+TVNMV1NPUkZFTzwvdXNlck9yZmVvPg0KICAgICAgPC91cm46Y29uc3VsdGFyUGVyZmlsZXNTaXN0ZW1hPg0KICAgPC9zb2FwZW52OkJvZHk+DQo8L3NvYXBlbnY6RW52ZWxvcGU+"/>
                        <L7p:ContentType stringValue="text/xml; charset=utf-8"/>
                        <L7p:DataType variableDataType="message"/>
                        <L7p:VariableToSet stringValue="requestPortalO"/>
                    </L7p:SetVariable>
                    <L7p:HttpRoutingAssertion>
                        <L7p:FailOnErrorStatus booleanValue="false"/>
                        <L7p:HttpMethod httpMethod="POST"/>
                        <L7p:ProtectedServiceUrl stringValue="http://aporfeopro/orfeo/webServices/servidor.php"/>
                        <L7p:ProxyPassword stringValueNull="null"/>
                        <L7p:ProxyUsername stringValueNull="null"/>
                        <L7p:RequestHeaderRules httpPassthroughRuleSet="included">
                            <L7p:ForwardAll booleanValue="true"/>
                            <L7p:Rules httpPassthroughRules="included">
                                <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Cookie"/>
                                </L7p:item>
                                <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="SOAPAction"/>
                                </L7p:item>
                            </L7p:Rules>
                        </L7p:RequestHeaderRules>
                        <L7p:RequestMsgSrc stringValue="requestPortalO"/>
                        <L7p:RequestParamRules httpPassthroughRuleSet="included">
                            <L7p:ForwardAll booleanValue="true"/>
                            <L7p:Rules httpPassthroughRules="included"/>
                        </L7p:RequestParamRules>
                        <L7p:ResponseHeaderRules httpPassthroughRuleSet="included">
                            <L7p:ForwardAll booleanValue="true"/>
                            <L7p:Rules httpPassthroughRules="included">
                                <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Set-Cookie"/>
                                </L7p:item>
                            </L7p:Rules>
                        </L7p:ResponseHeaderRules>
                        <L7p:ResponseMsgDest stringValue="responsePortalO"/>
                        <L7p:SamlAssertionVersion intValue="2"/>
                    </L7p:HttpRoutingAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[ROUTING   
LatencyBackend: ${httpRouting.latency}
Routing.URL: ${httpRouting.url}
Request.completed: ${request.completed}
Request.elapsedTime: ${request.elapsedTime}
RoutingTotalTime: ${request.routingTotalTime}
RoutingStatus: ${routingStatus}]]></L7p:Detail>
                    </L7p:AuditDetailAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="Reason Code: ${httpRouting.reasonCode}"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[RESPONSE------------
responsePortalO: ${responsePortalO}
responsePortalO: ${responsePortalO.mainpart}]]></L7p:Detail>
                    </L7p:AuditDetailAssertion>
                    <L7p:ResponseXpathAssertion>
                        <L7p:VariablePrefix stringValue="responsePortalOJSON"/>
                        <L7p:XmlMsgSrc stringValue="responsePortalO"/>
                        <L7p:XpathExpression xpathExpressionValue="included">
                            <L7p:Expression stringValue="/SOAP-ENV:Envelope/SOAP-ENV:Body/ns1:consultarPerfilesSistemaResponse/return"/>
                            <L7p:Namespaces mapValue="included">
                                <L7p:entry>
                                    <L7p:key stringValue="xsd"/>
                                    <L7p:value stringValue="http://www.w3.org/2001/XMLSchema"/>
                                </L7p:entry>
                                <L7p:entry>
                                    <L7p:key stringValue="s"/>
                                    <L7p:value stringValue="http://schemas.xmlsoap.org/soap/envelope/"/>
                                </L7p:entry>
                                <L7p:entry>
                                    <L7p:key stringValue="ns1"/>
                                    <L7p:value stringValue="urn:Orfeo"/>
                                </L7p:entry>
                                <L7p:entry>
                                    <L7p:key stringValue="SOAP-ENC"/>
                                    <L7p:value stringValue="http://schemas.xmlsoap.org/soap/encoding/"/>
                                </L7p:entry>
                                <L7p:entry>
                                    <L7p:key stringValue="SOAP-ENV"/>
                                    <L7p:value stringValue="http://schemas.xmlsoap.org/soap/envelope/"/>
                                </L7p:entry>
                                <L7p:entry>
                                    <L7p:key stringValue="xsi"/>
                                    <L7p:value stringValue="http://www.w3.org/2001/XMLSchema-instance"/>
                                </L7p:entry>
                            </L7p:Namespaces>
                            <L7p:XpathVersion xpathVersion="XPATH_1_0"/>
                        </L7p:XpathExpression>
                    </L7p:ResponseXpathAssertion>
                    <L7p:JsonTransformation>
                        <L7p:DestinationMessageTarget MessageTarget="included">
                            <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSON"/>
                            <L7p:Target target="OTHER"/>
                            <L7p:TargetModifiedByGateway booleanValue="true"/>
                        </L7p:DestinationMessageTarget>
                        <L7p:Enabled booleanValue="false"/>
                        <L7p:OtherTargetMessageVariable stringValue="responsePortalO"/>
                        <L7p:RootTagString stringValue=""/>
                        <L7p:Target target="OTHER"/>
                    </L7p:JsonTransformation>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[responsePortalOJSON: ${responsePortalOJSON.found}
responsePortalOJSONC: ${responsePortalOJSON.count}
responsePortalOJSONresult: ${responsePortalOJSON.result}
responsePortalOJSONresults: ${responsePortalOJSON.results}
responsePortalOJSONelement: ${responsePortalOJSON.element}
responsePortalOJSONelements: ${responsePortalOJSON.elements}]]></L7p:Detail>
                        <L7p:Enabled booleanValue="false"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:HardcodedResponse>
                        <L7p:Base64ResponseBody stringValue="cmVzcG9uc2VQb3J0YWxPSlNPTjogJHtyZXNwb25zZVBvcnRhbE9KU09OLmZvdW5kfQpyZXNwb25zZVBvcnRhbE9KU09OQzogJHtyZXNwb25zZVBvcnRhbE9KU09OLmNvdW50fQpyZXNwb25zZVBvcnRhbE9KU09OcmVzdWx0OiAke3Jlc3BvbnNlUG9ydGFsT0pTT04ucmVzdWx0fQpyZXNwb25zZVBvcnRhbE9KU09OcmVzdWx0czogJHtyZXNwb25zZVBvcnRhbE9KU09OLnJlc3VsdHN9CnJlc3BvbnNlUG9ydGFsT0pTT05lbGVtZW50OiAke3Jlc3BvbnNlUG9ydGFsT0pTT04uZWxlbWVudH0KIyMjCiMjIwojIyMKIyMjIyMjCnJlc3BvbnNlUG9ydGFsT0pTT05lbGVtZW50czogJHtyZXNwb25zZVBvcnRhbE9KU09OLmVsZW1lbnRzfQ=="/>
                        <L7p:EarlyResponse booleanValue="true"/>
                        <L7p:Enabled booleanValue="false"/>
                        <L7p:ResponseContentType stringValue="application/json; charset=utf-8"/>
                    </L7p:HardcodedResponse>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="WyR7cmVzcG9uc2VQb3J0YWxPSlNPTi5yZXN1bHR9DQoJXQ=="/>
                        <L7p:ContentType stringValue="application/json; charset=utf-8"/>
                        <L7p:DataType variableDataType="message"/>
                        <L7p:VariableToSet stringValue="responsePortalOJSONfin"/>
                    </L7p:SetVariable>
                    <L7p:EvaluateJsonPathExpression>
                        <L7p:Expression stringValue=".NOMBRE_PERFIL"/>
                        <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSONfin"/>
                        <L7p:Target target="OTHER"/>
                        <L7p:VariablePrefix stringValue="roles"/>
                    </L7p:EvaluateJsonPathExpression>
                    <L7p:HardcodedResponse>
                        <L7p:Base64ResponseBody stringValue="cm9sZXMuZm91bmQ6ICR7cm9sZXMuZm91bmR9CnJvbGVzLmNvdW50OiAke3JvbGVzLmNvdW50fQpyb2xlcy5yZXN1bHQ6ICR7cm9sZXMucmVzdWx0fQpyb2xlcy5yZXN1bHRzOiAke3JvbGVzLnJlc3VsdHN9Cg=="/>
                        <L7p:EarlyResponse booleanValue="true"/>
                        <L7p:Enabled booleanValue="false"/>
                        <L7p:ResponseContentType stringValue="application/json; charset=utf-8"/>
                    </L7p:HardcodedResponse>
                    <L7p:ForEachLoop L7p:Usage="Required"
                        loopVariable="roles.results" variablePrefix="xroles">
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValueReference="inline"><![CDATA[ROLES: {
"nombreRol":"${xroles.current}"
}]]></L7p:Detail>
                            <L7p:Enabled booleanValue="false"/>
                        </L7p:AuditDetailAssertion>
                        <L7p:SetVariable>
                            <L7p:Base64Expression stringValue="ew0KIm5vbWJyZVJvbCI6IiR7eHJvbGVzLmN1cnJlbnR9Ig0KfQ=="/>
                            <L7p:VariableToSet stringValue="roles"/>
                        </L7p:SetVariable>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValue="${roles.mainpart}"/>
                            <L7p:Enabled booleanValue="false"/>
                        </L7p:AuditDetailAssertion>
                        <L7p:ManipulateMultiValuedVariable>
                            <L7p:SourceVariableName stringValue="roles"/>
                            <L7p:TargetVariableName stringValue="roles_prueba"/>
                        </L7p:ManipulateMultiValuedVariable>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValue="VARIABLES MULTIVALOR: ${roles_prueba}"/>
                            <L7p:Enabled booleanValue="false"/>
                        </L7p:AuditDetailAssertion>
                    </L7p:ForEachLoop>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[{
"schemas":
["urn:scim:schemas:core:2.0"],
"Resources":[ 

${roles_prueba}

]}]]></L7p:Detail>
                    </L7p:AuditDetailAssertion>
                    <L7p:HardcodedResponse>
                        <L7p:Base64ResponseBody stringValue="ewoic2NoZW1hcyI6ClsidXJuOnNjaW06c2NoZW1hczpjb3JlOjIuMCJdLAoiUmVzb3VyY2VzIjpbIAoKJHtyb2xlc19wcnVlYmF9CgpdfQo="/>
                        <L7p:EarlyResponse booleanValue="true"/>
                        <L7p:ResponseContentType stringValue="application/json; charset=utf-8"/>
                    </L7p:HardcodedResponse>
                </wsp:All>
                <L7p:CommentAssertion>
                    <L7p:Comment stringValue="CONSULTAR - UN ROL"/>
                </L7p:CommentAssertion>
                <wsp:All L7p:Enabled="false" wsp:Usage="Required">
                    <L7p:Regex>
                        <L7p:AutoTarget booleanValue="false"/>
                        <L7p:OtherTargetMessageVariable stringValue="request.http.uri"/>
                        <L7p:Regex stringValue="/orfeo/Roless"/>
                        <L7p:RegexName stringValue="Validate URI"/>
                        <L7p:Replacement stringValue=""/>
                        <L7p:Target target="OTHER"/>
                    </L7p:Regex>
                    <L7p:ComparisonAssertion>
                        <L7p:CaseSensitive booleanValue="false"/>
                        <L7p:Expression1 stringValue="${request.http.method}"/>
                        <L7p:Operator operatorNull="null"/>
                        <L7p:Predicates predicates="included">
                            <L7p:item dataType="included">
                                <L7p:Type variableDataType="string"/>
                            </L7p:item>
                            <L7p:item binary="included">
                                <L7p:RightValue stringValue="GET"/>
                            </L7p:item>
                        </L7p:Predicates>
                    </L7p:ComparisonAssertion>
                    <L7p:ComparisonAssertion>
                        <L7p:CaseSensitive booleanValue="false"/>
                        <L7p:Expression1 stringValue="${request.http.parameter.filter}"/>
                        <L7p:Operator operatorNull="null"/>
                        <L7p:Predicates predicates="included">
                            <L7p:item dataType="included">
                                <L7p:Type variableDataType="string"/>
                            </L7p:item>
                            <L7p:item binary="included">
                                <L7p:Operator operator="CONTAINS"/>
                                <L7p:RightValue stringValue="nombreRol eq"/>
                            </L7p:item>
                        </L7p:Predicates>
                    </L7p:ComparisonAssertion>
                    <L7p:ComparisonAssertion>
                        <L7p:CaseSensitive booleanValue="false"/>
                        <L7p:Expression1 stringValue="${request.http.parameter.attributes}"/>
                        <L7p:Operator operatorNull="null"/>
                        <L7p:Predicates predicates="included">
                            <L7p:item dataType="included">
                                <L7p:Type variableDataType="string"/>
                            </L7p:item>
                            <L7p:item binary="included">
                                <L7p:RightValue stringValue="nombreRol"/>
                            </L7p:item>
                        </L7p:Predicates>
                    </L7p:ComparisonAssertion>
                    <L7p:ComparisonAssertion>
                        <L7p:CaseSensitive booleanValue="false"/>
                        <L7p:Expression1 stringValue="${request.mainpart}"/>
                        <L7p:Operator operatorNull="null"/>
                        <L7p:Predicates predicates="included">
                            <L7p:item dataType="included">
                                <L7p:Type variableDataType="string"/>
                            </L7p:item>
                            <L7p:item binary="included">
                                <L7p:Operator operator="EMPTY"/>
                                <L7p:RightValue stringValue="MASK eq"/>
                            </L7p:item>
                        </L7p:Predicates>
                    </L7p:ComparisonAssertion>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="PHNvYXBlbnY6RW52ZWxvcGUgeG1sbnM6c29hcGVudj0iaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9lbnZlbG9wZS8iIHhtbG5zOnVybj0idXJuOk9yZmVvIj4NCiAgIDxzb2FwZW52OkhlYWRlci8+DQogICA8c29hcGVudjpCb2R5Pg0KICAgICAgPHVybjpjb25zdWx0YXJQZXJmaWxlc1Npc3RlbWE+DQogICAgICAgICA8Y29kX2FwcD4yMDwvY29kX2FwcD4NCiAgICAgICAgIDx1c2VyT3JmZW8+TVNMV1NPUkZFTzwvdXNlck9yZmVvPg0KICAgICAgPC91cm46Y29uc3VsdGFyUGVyZmlsZXNTaXN0ZW1hPg0KICAgPC9zb2FwZW52OkJvZHk+DQo8L3NvYXBlbnY6RW52ZWxvcGU+"/>
                        <L7p:ContentType stringValue="text/xml; charset=utf-8"/>
                        <L7p:DataType variableDataType="message"/>
                        <L7p:VariableToSet stringValue="requestPortalO"/>
                    </L7p:SetVariable>
                    <L7p:HttpRoutingAssertion>
                        <L7p:HttpMethod httpMethod="POST"/>
                        <L7p:ProtectedServiceUrl stringValue="http://aporfeopro/orfeo/webServices/servidor.php"/>
                        <L7p:ProxyPassword stringValueNull="null"/>
                        <L7p:ProxyUsername stringValueNull="null"/>
                        <L7p:RequestHeaderRules httpPassthroughRuleSet="included">
                            <L7p:ForwardAll booleanValue="true"/>
                            <L7p:Rules httpPassthroughRules="included">
                                <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Cookie"/>
                                </L7p:item>
                                <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="SOAPAction"/>
                                </L7p:item>
                            </L7p:Rules>
                        </L7p:RequestHeaderRules>
                        <L7p:RequestMsgSrc stringValue="requestPortalO"/>
                        <L7p:RequestParamRules httpPassthroughRuleSet="included">
                            <L7p:ForwardAll booleanValue="true"/>
                            <L7p:Rules httpPassthroughRules="included"/>
                        </L7p:RequestParamRules>
                        <L7p:ResponseHeaderRules httpPassthroughRuleSet="included">
                            <L7p:ForwardAll booleanValue="true"/>
                            <L7p:Rules httpPassthroughRules="included">
                                <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Set-Cookie"/>
                                </L7p:item>
                            </L7p:Rules>
                        </L7p:ResponseHeaderRules>
                        <L7p:ResponseMsgDest stringValue="responsePortalO"/>
                        <L7p:SamlAssertionVersion intValue="2"/>
                    </L7p:HttpRoutingAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[ROUTING   
LatencyBackend: ${httpRouting.latency}
Routing.URL: ${httpRouting.url}
Request.completed: ${request.completed}
Request.elapsedTime: ${request.elapsedTime}
RoutingTotalTime: ${request.routingTotalTime}
RoutingStatus: ${routingStatus}]]></L7p:Detail>
                    </L7p:AuditDetailAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="Reason Code: ${httpRouting.reasonCode}"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[RESPONSE------------
responsePortalO: ${responsePortalO}
responsePortalO: ${responsePortalO.mainpart}]]></L7p:Detail>
                    </L7p:AuditDetailAssertion>
                    <L7p:ResponseXpathAssertion>
                        <L7p:VariablePrefix stringValue="responsePortalOJSON"/>
                        <L7p:XmlMsgSrc stringValue="responsePortalO"/>
                        <L7p:XpathExpression xpathExpressionValue="included">
                            <L7p:Expression stringValue="/s:Envelope/s:Body/ns1:consultarPerfilesSistemaResponse/return"/>
                            <L7p:Namespaces mapValue="included">
                                <L7p:entry>
                                    <L7p:key stringValue="ns1"/>
                                    <L7p:value stringValue="urn:Orfeo"/>
                                </L7p:entry>
                                <L7p:entry>
                                    <L7p:key stringValue="s"/>
                                    <L7p:value stringValue="http://schemas.xmlsoap.org/soap/envelope/"/>
                                </L7p:entry>
                            </L7p:Namespaces>
                            <L7p:XpathVersion xpathVersion="XPATH_1_0"/>
                        </L7p:XpathExpression>
                    </L7p:ResponseXpathAssertion>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="WyR7cmVzcG9uc2VQb3J0YWxPSlNPTi5yZXN1bHR9DQoJXQ=="/>
                        <L7p:ContentType stringValue="application/json; charset=utf-8"/>
                        <L7p:DataType variableDataType="message"/>
                        <L7p:VariableToSet stringValue="responsePortalOJSONfin"/>
                    </L7p:SetVariable>
                    <L7p:EvaluateJsonPathExpression>
                        <L7p:Enabled booleanValue="false"/>
                        <L7p:Expression stringValue=".NOMBRE_PERFIL"/>
                        <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSONfin"/>
                        <L7p:Target target="OTHER"/>
                        <L7p:VariablePrefix stringValue="roles"/>
                    </L7p:EvaluateJsonPathExpression>
                    <L7p:JsonTransformation>
                        <L7p:DestinationMessageTarget MessageTarget="included">
                            <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSON"/>
                            <L7p:Target target="OTHER"/>
                            <L7p:TargetModifiedByGateway booleanValue="true"/>
                        </L7p:DestinationMessageTarget>
                        <L7p:Enabled booleanValue="false"/>
                        <L7p:OtherTargetMessageVariable stringValue="responsePortalO"/>
                        <L7p:RootTagString stringValue=""/>
                        <L7p:Target target="OTHER"/>
                    </L7p:JsonTransformation>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="responsePortalOJSON: ${responsePortalOJSON.mainpart}"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:Regex>
                        <L7p:AutoTarget booleanValue="false"/>
                        <L7p:CaptureVar stringValue="rol"/>
                        <L7p:IncludeEntireExpressionCapture booleanValue="false"/>
                        <L7p:OtherTargetMessageVariable stringValue="request.http.parameter.filter"/>
                        <L7p:Regex stringValue="&quot;(.+)&quot;"/>
                        <L7p:RegexName stringValue="Rol a consultar"/>
                        <L7p:Replacement stringValue=""/>
                        <L7p:Target target="OTHER"/>
                    </L7p:Regex>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="role: ${rol}"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:Regex>
                        <L7p:AutoTarget booleanValue="false"/>
                        <L7p:CaptureVar stringValue="rolmatch"/>
                        <L7p:CaseInsensitive booleanValue="true"/>
                        <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSONfin"/>
                        <L7p:PatternContainsVariables booleanValue="true"/>
                        <L7p:Regex stringValue="${rol}"/>
                        <L7p:RegexName stringValue="ValidacionROLExiste"/>
                        <L7p:Replacement stringValue=""/>
                        <L7p:Target target="OTHER"/>
                    </L7p:Regex>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[{
"schemas":
["urn:scim:schemas:core:2.0"],
"Resources":[ 

{
"nombreRol":"${rolmatch}"
}

]}]]></L7p:Detail>
                    </L7p:AuditDetailAssertion>
                    <L7p:HardcodedResponse>
                        <L7p:Base64ResponseBody stringValue="ewoic2NoZW1hcyI6ClsidXJuOnNjaW06c2NoZW1hczpjb3JlOjIuMCJdLAoiUmVzb3VyY2VzIjpbIAoKewoibm9tYnJlUm9sIjoiJHtyb2xtYXRjaH0iCn0KCl19"/>
                        <L7p:EarlyResponse booleanValue="true"/>
                        <L7p:ResponseContentType stringValue="application/json; charset=UTF-8"/>
                    </L7p:HardcodedResponse>
                </wsp:All>
                <L7p:CommentAssertion>
                    <L7p:Comment stringValue="Listar usuarios"/>
                </L7p:CommentAssertion>
                <wsp:All L7p:Enabled="false" wsp:Usage="Required">
                    <L7p:Regex>
                        <L7p:AutoTarget booleanValue="false"/>
                        <L7p:OtherTargetMessageVariable stringValue="request.http.uri"/>
                        <L7p:Regex stringValue="/orfeo/Users"/>
                        <L7p:RegexName stringValue="Validate URI"/>
                        <L7p:Replacement stringValue=""/>
                        <L7p:Target target="OTHER"/>
                    </L7p:Regex>
                    <L7p:ComparisonAssertion>
                        <L7p:CaseSensitive booleanValue="false"/>
                        <L7p:Expression1 stringValue="${request.http.method}"/>
                        <L7p:Operator operatorNull="null"/>
                        <L7p:Predicates predicates="included">
                            <L7p:item dataType="included">
                                <L7p:Type variableDataType="string"/>
                            </L7p:item>
                            <L7p:item binary="included">
                                <L7p:RightValue stringValue="GET"/>
                            </L7p:item>
                        </L7p:Predicates>
                    </L7p:ComparisonAssertion>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmZpbHRlcn0="/>
                        <L7p:VariableToSet stringValue="filtro"/>
                    </L7p:SetVariable>
                    <L7p:ComparisonAssertion>
                        <L7p:CaseSensitive booleanValue="false"/>
                        <L7p:Expression1 stringValue="${filtro}"/>
                        <L7p:Operator operatorNull="null"/>
                        <L7p:Predicates predicates="included">
                            <L7p:item dataType="included">
                                <L7p:Type variableDataType="string"/>
                            </L7p:item>
                            <L7p:item binary="included">
                                <L7p:Operator operator="EMPTY"/>
                                <L7p:RightValue stringValue=""/>
                            </L7p:item>
                        </L7p:Predicates>
                    </L7p:ComparisonAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="Filtro: ${filtro}"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="PHNvYXBlbnY6RW52ZWxvcGUgeG1sbnM6c29hcGVudj0iaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9lbnZlbG9wZS8iIHhtbG5zOnVybj0idXJuOk9yZmVvIj4NCiAgIDxzb2FwZW52OkhlYWRlci8+DQogICA8c29hcGVudjpCb2R5Pg0KICAgICAgPHVybjpjb25zdWx0YURhdG9zR2VuZXJhbGVzVXN1YXJpbz4NCiAgICAgICAgIDxjb2RfYXBwPjIwPC9jb2RfYXBwPg0KICAgICAgICAgPHVzZXJPcmZlbz5NU0xXU09SRkVPPC91c2VyT3JmZW8+DQogICAgICA8L3Vybjpjb25zdWx0YURhdG9zR2VuZXJhbGVzVXN1YXJpbz4NCiAgIDwvc29hcGVudjpCb2R5Pg0KPC9zb2FwZW52OkVudmVsb3BlPg=="/>
                        <L7p:ContentType stringValue="text/xml; charset=utf-8"/>
                        <L7p:DataType variableDataType="message"/>
                        <L7p:VariableToSet stringValue="requestPortalO"/>
                    </L7p:SetVariable>
                    <L7p:HttpRoutingAssertion>
                        <L7p:FailOnErrorStatus booleanValue="false"/>
                        <L7p:HttpMethod httpMethod="POST"/>
                        <L7p:ProtectedServiceUrl stringValue="http://aporfeopro/orfeo/webServices/servidor.php"/>
                        <L7p:ProxyPassword stringValueNull="null"/>
                        <L7p:ProxyUsername stringValueNull="null"/>
                        <L7p:RequestHeaderRules httpPassthroughRuleSet="included">
                            <L7p:ForwardAll booleanValue="true"/>
                            <L7p:Rules httpPassthroughRules="included">
                                <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Cookie"/>
                                </L7p:item>
                                <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="SOAPAction"/>
                                </L7p:item>
                            </L7p:Rules>
                        </L7p:RequestHeaderRules>
                        <L7p:RequestMsgSrc stringValue="requestPortalO"/>
                        <L7p:RequestParamRules httpPassthroughRuleSet="included">
                            <L7p:ForwardAll booleanValue="true"/>
                            <L7p:Rules httpPassthroughRules="included"/>
                        </L7p:RequestParamRules>
                        <L7p:ResponseHeaderRules httpPassthroughRuleSet="included">
                            <L7p:ForwardAll booleanValue="true"/>
                            <L7p:Rules httpPassthroughRules="included">
                                <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Set-Cookie"/>
                                </L7p:item>
                            </L7p:Rules>
                        </L7p:ResponseHeaderRules>
                        <L7p:ResponseMsgDest stringValue="responsePortalO"/>
                        <L7p:ResponseSize stringValue="9621440"/>
                        <L7p:SamlAssertionVersion intValue="2"/>
                    </L7p:HttpRoutingAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[ROUTING   
LatencyBackend: ${httpRouting.latency}
Routing.URL: ${httpRouting.url}
Request.completed: ${request.completed}
Request.elapsedTime: ${request.elapsedTime}
RoutingTotalTime: ${request.routingTotalTime}
RoutingStatus: ${routingStatus}]]></L7p:Detail>
                    </L7p:AuditDetailAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="Reason Code: ${httpRouting.reasonCode}"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[RESPONSE------------
responsePortalO: ${responsePortalO}
responsePortalO: ${responsePortalO.mainpart}]]></L7p:Detail>
                        <L7p:Enabled booleanValue="false"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:JsonTransformation>
                        <L7p:DestinationMessageTarget MessageTarget="included">
                            <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSON"/>
                            <L7p:Target target="OTHER"/>
                            <L7p:TargetModifiedByGateway booleanValue="true"/>
                        </L7p:DestinationMessageTarget>
                        <L7p:Enabled booleanValue="false"/>
                        <L7p:OtherTargetMessageVariable stringValue="responsePortalO"/>
                        <L7p:RootTagString stringValue=""/>
                        <L7p:Target target="OTHER"/>
                    </L7p:JsonTransformation>
                    <L7p:ResponseXpathAssertion>
                        <L7p:VariablePrefix stringValue="responsePortalOJSON"/>
                        <L7p:XmlMsgSrc stringValue="responsePortalO"/>
                        <L7p:XpathExpression xpathExpressionValue="included">
                            <L7p:Expression stringValue="/SOAP-ENV:Envelope/SOAP-ENV:Body/ns1:consultaDatosGeneralesUsuarioResponse/return"/>
                            <L7p:Namespaces mapValue="included">
                                <L7p:entry>
                                    <L7p:key stringValue="s"/>
                                    <L7p:value stringValue="http://schemas.xmlsoap.org/soap/envelope/"/>
                                </L7p:entry>
                                <L7p:entry>
                                    <L7p:key stringValue="xsd"/>
                                    <L7p:value stringValue="http://www.w3.org/2001/XMLSchema"/>
                                </L7p:entry>
                                <L7p:entry>
                                    <L7p:key stringValue="ns1"/>
                                    <L7p:value stringValue="urn:Orfeo"/>
                                </L7p:entry>
                                <L7p:entry>
                                    <L7p:key stringValue="SOAP-ENC"/>
                                    <L7p:value stringValue="http://schemas.xmlsoap.org/soap/encoding/"/>
                                </L7p:entry>
                                <L7p:entry>
                                    <L7p:key stringValue="SOAP-ENV"/>
                                    <L7p:value stringValue="http://schemas.xmlsoap.org/soap/envelope/"/>
                                </L7p:entry>
                                <L7p:entry>
                                    <L7p:key stringValue="xsi"/>
                                    <L7p:value stringValue="http://www.w3.org/2001/XMLSchema-instance"/>
                                </L7p:entry>
                            </L7p:Namespaces>
                            <L7p:XpathVersion xpathVersion="XPATH_1_0"/>
                        </L7p:XpathExpression>
                    </L7p:ResponseXpathAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[responsePortalOJSON: ${responsePortalOJSON.found}
responsePortalOJSONC: ${responsePortalOJSON.count}
responsePortalOJSONresult: ${responsePortalOJSON.result}
responsePortalOJSONresults: ${responsePortalOJSON.results}
responsePortalOJSONelement: ${responsePortalOJSON.element}
responsePortalOJSONelements: ${responsePortalOJSON.elements}]]></L7p:Detail>
                        <L7p:Enabled booleanValue="false"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="WyR7cmVzcG9uc2VQb3J0YWxPSlNPTi5yZXN1bHR9DQoJXQ=="/>
                        <L7p:ContentType stringValue="application/json; charset=utf-8"/>
                        <L7p:DataType variableDataType="message"/>
                        <L7p:VariableToSet stringValue="responsePortalOJSONfin"/>
                    </L7p:SetVariable>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="responsePortalOJSON: ${responsePortalOJSON.mainpart}"/>
                        <L7p:Enabled booleanValue="false"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:EvaluateJsonPathExpression>
                        <L7p:Expression stringValue=".usuario"/>
                        <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSONfin"/>
                        <L7p:Target target="OTHER"/>
                        <L7p:VariablePrefix stringValue="usuarios"/>
                    </L7p:EvaluateJsonPathExpression>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[usuarios.found: ${usuarios.found}
usuarios.count: ${usuarios.count}
usuarios.result: ${usuarios.result}
usuarios.results: ${usuarios.results}]]></L7p:Detail>
                    </L7p:AuditDetailAssertion>
                    <L7p:ForEachLoop L7p:Usage="Required"
                        loopVariable="usuarios.results" variablePrefix="xusers">
                        <wsp:OneOrMore L7p:Enabled="false" wsp:Usage="Required">
                            <wsp:All wsp:Usage="Required">
                                <L7p:ComparisonAssertion>
                                    <L7p:CaseSensitive booleanValue="false"/>
                                    <L7p:Expression1 stringValue="${xusers.current}"/>
                                    <L7p:Expression2 stringValue=" "/>
                                    <L7p:Operator operator="EMPTY"/>
                                    <L7p:Predicates predicates="included">
                                    <L7p:item binary="included">
                                    <L7p:CaseSensitive booleanValue="false"/>
                                    <L7p:Operator operator="EMPTY"/>
                                    <L7p:RightValue stringValue=" "/>
                                    </L7p:item>
                                    </L7p:Predicates>
                                </L7p:ComparisonAssertion>
                                <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValue="esta vacia"/>
                                    <L7p:Enabled booleanValue="false"/>
                                </L7p:AuditDetailAssertion>
                            </wsp:All>
                            <wsp:All wsp:Usage="Required">
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="ew0KInVzZXJOYW1lIjoiJHt4dXNlcnMuY3VycmVudH0iDQp9"/>
                                    <L7p:VariableToSet stringValue="users"/>
                                </L7p:SetVariable>
                                <L7p:ManipulateMultiValuedVariable>
                                    <L7p:SourceVariableName stringValue="users"/>
                                    <L7p:TargetVariableName stringValue="users_prueba"/>
                                </L7p:ManipulateMultiValuedVariable>
                                <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValue="entro a setear variable"/>
                                    <L7p:Enabled booleanValue="false"/>
                                </L7p:AuditDetailAssertion>
                            </wsp:All>
                        </wsp:OneOrMore>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValueReference="inline"><![CDATA[USUARIOS: {
"userName":"${xusers.current}"
}]]></L7p:Detail>
                            <L7p:Enabled booleanValue="false"/>
                        </L7p:AuditDetailAssertion>
                        <L7p:SetVariable>
                            <L7p:Base64Expression stringValue="ew0KInVzZXJOYW1lIjoiJHt4dXNlcnMuY3VycmVudH0iDQp9"/>
                            <L7p:VariableToSet stringValue="users"/>
                        </L7p:SetVariable>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValue="CADA USUARIO ${users.mainpart}"/>
                            <L7p:Enabled booleanValue="false"/>
                        </L7p:AuditDetailAssertion>
                        <L7p:ManipulateMultiValuedVariable>
                            <L7p:SourceVariableName stringValue="users"/>
                            <L7p:TargetVariableName stringValue="users_prueba"/>
                        </L7p:ManipulateMultiValuedVariable>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValue="VARIABLES MULTIVALOR: ${users_prueba}"/>
                            <L7p:Enabled booleanValue="false"/>
                        </L7p:AuditDetailAssertion>
                    </L7p:ForEachLoop>
                    <L7p:HardcodedResponse>
                        <L7p:Base64ResponseBody stringValue="ewoic2NoZW1hcyI6ClsidXJuOnNjaW06c2NoZW1hczpjb3JlOjIuMCJdLAoiUmVzb3VyY2VzIjpbIAoKJHt1c2Vyc19wcnVlYmF9CgpdfQ=="/>
                        <L7p:EarlyResponse booleanValue="true"/>
                        <L7p:ResponseContentType stringValue="application/json; charset=utf-8"/>
                    </L7p:HardcodedResponse>
                </wsp:All>
                <L7p:CommentAssertion>
                    <L7p:Comment stringValue="LISTAR USUARIO POR USERNAME"/>
                    <L7p:Enabled booleanValue="false"/>
                </L7p:CommentAssertion>
                <wsp:All L7p:Enabled="false" wsp:Usage="Required">
                    <L7p:Regex>
                        <L7p:AutoTarget booleanValue="false"/>
                        <L7p:OtherTargetMessageVariable stringValue="request.http.uri"/>
                        <L7p:Regex stringValue="/orfeo/Users"/>
                        <L7p:RegexName stringValue="Validate URI"/>
                        <L7p:Replacement stringValue=""/>
                        <L7p:Target target="OTHER"/>
                    </L7p:Regex>
                    <L7p:ComparisonAssertion>
                        <L7p:CaseSensitive booleanValue="false"/>
                        <L7p:Expression1 stringValue="${request.http.method}"/>
                        <L7p:Operator operatorNull="null"/>
                        <L7p:Predicates predicates="included">
                            <L7p:item dataType="included">
                                <L7p:Type variableDataType="string"/>
                            </L7p:item>
                            <L7p:item binary="included">
                                <L7p:RightValue stringValue="GET"/>
                            </L7p:item>
                        </L7p:Predicates>
                    </L7p:ComparisonAssertion>
                    <L7p:ComparisonAssertion>
                        <L7p:CaseSensitive booleanValue="false"/>
                        <L7p:Expression1 stringValue="${request.http.parameter.attributes}"/>
                        <L7p:Operator operatorNull="null"/>
                        <L7p:Predicates predicates="included">
                            <L7p:item dataType="included">
                                <L7p:Type variableDataType="string"/>
                            </L7p:item>
                            <L7p:item binary="included">
                                <L7p:RightValue stringValue="userName"/>
                            </L7p:item>
                        </L7p:Predicates>
                    </L7p:ComparisonAssertion>
                    <L7p:ComparisonAssertion>
                        <L7p:CaseSensitive booleanValue="false"/>
                        <L7p:Expression1 stringValue="${request.http.parameter.filter}"/>
                        <L7p:Operator operatorNull="null"/>
                        <L7p:Predicates predicates="included">
                            <L7p:item dataType="included">
                                <L7p:Type variableDataType="string"/>
                            </L7p:item>
                            <L7p:item binary="included">
                                <L7p:Operator operator="CONTAINS"/>
                                <L7p:RightValue stringValue="userName eq"/>
                            </L7p:item>
                        </L7p:Predicates>
                    </L7p:ComparisonAssertion>
                    <L7p:ComparisonAssertion>
                        <L7p:CaseSensitive booleanValue="false"/>
                        <L7p:Expression1 stringValue="${request.mainpart}"/>
                        <L7p:Operator operatorNull="null"/>
                        <L7p:Predicates predicates="included">
                            <L7p:item dataType="included">
                                <L7p:Type variableDataType="string"/>
                            </L7p:item>
                            <L7p:item binary="included">
                                <L7p:Operator operator="EMPTY"/>
                                <L7p:RightValue stringValue="MASK eq"/>
                            </L7p:item>
                        </L7p:Predicates>
                    </L7p:ComparisonAssertion>
                    <L7p:Regex>
                        <L7p:AutoTarget booleanValue="false"/>
                        <L7p:CaptureVar stringValue="user"/>
                        <L7p:IncludeEntireExpressionCapture booleanValue="false"/>
                        <L7p:OtherTargetMessageVariable stringValue="request.http.parameter.filter"/>
                        <L7p:Regex stringValue="&quot;(.+)&quot;"/>
                        <L7p:RegexName stringValue="Usuario a consultar"/>
                        <L7p:Replacement stringValue=""/>
                        <L7p:Target target="OTHER"/>
                    </L7p:Regex>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="user: ${user}"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="PHNvYXBlbnY6RW52ZWxvcGUgeG1sbnM6c29hcGVudj0iaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9lbnZlbG9wZS8iIHhtbG5zOnVybj0idXJuOk9yZmVvIj4NCiAgIDxzb2FwZW52OkhlYWRlci8+DQogICA8c29hcGVudjpCb2R5Pg0KICAgICAgPHVybjpjb25zdWx0YXJVc3VhcmlvPg0KICAgICAgICAgPGNvZF9hcHA+MjA8L2NvZF9hcHA+DQogICAgICAgICA8dXNlck9yZmVvPk1TTFdTT1JGRU88L3VzZXJPcmZlbz4NCiAgICAgICAgIDx1c3VhcmlvPiR7dXNlcn08L3VzdWFyaW8+DQogICAgICA8L3Vybjpjb25zdWx0YXJVc3VhcmlvPg0KICAgPC9zb2FwZW52OkJvZHk+DQo8L3NvYXBlbnY6RW52ZWxvcGU+"/>
                        <L7p:ContentType stringValue="text/xml; charset=utf-8"/>
                        <L7p:DataType variableDataType="message"/>
                        <L7p:VariableToSet stringValue="requestPortalO"/>
                    </L7p:SetVariable>
                    <L7p:HttpRoutingAssertion>
                        <L7p:HttpMethod httpMethod="POST"/>
                        <L7p:ProtectedServiceUrl stringValue="http://aporfeopro/orfeo/webServices/servidor.php"/>
                        <L7p:ProxyPassword stringValueNull="null"/>
                        <L7p:ProxyUsername stringValueNull="null"/>
                        <L7p:RequestHeaderRules httpPassthroughRuleSet="included">
                            <L7p:ForwardAll booleanValue="true"/>
                            <L7p:Rules httpPassthroughRules="included">
                                <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Cookie"/>
                                </L7p:item>
                                <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="SOAPAction"/>
                                </L7p:item>
                            </L7p:Rules>
                        </L7p:RequestHeaderRules>
                        <L7p:RequestMsgSrc stringValue="requestPortalO"/>
                        <L7p:RequestParamRules httpPassthroughRuleSet="included">
                            <L7p:ForwardAll booleanValue="true"/>
                            <L7p:Rules httpPassthroughRules="included"/>
                        </L7p:RequestParamRules>
                        <L7p:ResponseHeaderRules httpPassthroughRuleSet="included">
                            <L7p:ForwardAll booleanValue="true"/>
                            <L7p:Rules httpPassthroughRules="included">
                                <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Set-Cookie"/>
                                </L7p:item>
                            </L7p:Rules>
                        </L7p:ResponseHeaderRules>
                        <L7p:ResponseMsgDest stringValue="responsePortalO"/>
                        <L7p:SamlAssertionVersion intValue="2"/>
                    </L7p:HttpRoutingAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[ROUTING   
LatencyBackend: ${httpRouting.latency}
Routing.URL: ${httpRouting.url}
Request.completed: ${request.completed}
Request.elapsedTime: ${request.elapsedTime}
RoutingTotalTime: ${request.routingTotalTime}
RoutingStatus: ${routingStatus}]]></L7p:Detail>
                    </L7p:AuditDetailAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="Reason Code: ${httpRouting.reasonCode}"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[RESPONSE------------
responsePortalO: ${responsePortalO}
responsePortalO: ${responsePortalO.mainpart}]]></L7p:Detail>
                    </L7p:AuditDetailAssertion>
                    <L7p:ResponseXpathAssertion>
                        <L7p:VariablePrefix stringValue="responsePortalOJSON"/>
                        <L7p:XmlMsgSrc stringValue="responsePortalO"/>
                        <L7p:XpathExpression xpathExpressionValue="included">
                            <L7p:Expression stringValue="/SOAP-ENV:Envelope/SOAP-ENV:Body/ns1:consultarUsuarioResponse/return"/>
                            <L7p:Namespaces mapValue="included">
                                <L7p:entry>
                                    <L7p:key stringValue="s"/>
                                    <L7p:value stringValue="http://schemas.xmlsoap.org/soap/envelope/"/>
                                </L7p:entry>
                                <L7p:entry>
                                    <L7p:key stringValue="xsd"/>
                                    <L7p:value stringValue="http://www.w3.org/2001/XMLSchema"/>
                                </L7p:entry>
                                <L7p:entry>
                                    <L7p:key stringValue="ns1"/>
                                    <L7p:value stringValue="urn:Orfeo"/>
                                </L7p:entry>
                                <L7p:entry>
                                    <L7p:key stringValue="SOAP-ENC"/>
                                    <L7p:value stringValue="http://schemas.xmlsoap.org/soap/encoding/"/>
                                </L7p:entry>
                                <L7p:entry>
                                    <L7p:key stringValue="SOAP-ENV"/>
                                    <L7p:value stringValue="http://schemas.xmlsoap.org/soap/envelope/"/>
                                </L7p:entry>
                                <L7p:entry>
                                    <L7p:key stringValue="xsi"/>
                                    <L7p:value stringValue="http://www.w3.org/2001/XMLSchema-instance"/>
                                </L7p:entry>
                            </L7p:Namespaces>
                            <L7p:XpathVersion xpathVersion="XPATH_1_0"/>
                        </L7p:XpathExpression>
                    </L7p:ResponseXpathAssertion>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="WyR7cmVzcG9uc2VQb3J0YWxPSlNPTi5yZXN1bHR9DQoJXQ=="/>
                        <L7p:ContentType stringValue="application/json; charset=utf-8"/>
                        <L7p:DataType variableDataType="message"/>
                        <L7p:VariableToSet stringValue="responsePortalOJSONfin"/>
                    </L7p:SetVariable>
                    <L7p:JsonTransformation>
                        <L7p:DestinationMessageTarget MessageTarget="included">
                            <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSON"/>
                            <L7p:Target target="OTHER"/>
                            <L7p:TargetModifiedByGateway booleanValue="true"/>
                        </L7p:DestinationMessageTarget>
                        <L7p:Enabled booleanValue="false"/>
                        <L7p:OtherTargetMessageVariable stringValue="responsePortalO"/>
                        <L7p:PrettyPrint booleanValue="true"/>
                        <L7p:RootTagString stringValue=""/>
                        <L7p:Target target="OTHER"/>
                    </L7p:JsonTransformation>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="responsePortalOJSON: ${responsePortalOJSON.mainpart}"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:EvaluateJsonPathExpression>
                        <L7p:Expression stringValue=".usuario"/>
                        <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSONfin"/>
                        <L7p:Target target="OTHER"/>
                        <L7p:VariablePrefix stringValue="usuarios"/>
                    </L7p:EvaluateJsonPathExpression>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[usuarios.found: ${usuarios.found}
usuarios.count: ${usuarios.count}
usuarios.result: ${usuarios.result}
usuarios.results: ${usuarios.results}]]></L7p:Detail>
                    </L7p:AuditDetailAssertion>
                    <L7p:ComparisonAssertion>
                        <L7p:CaseSensitive booleanValue="false"/>
                        <L7p:Expression1 stringValue="${usuarios.result}"/>
                        <L7p:Expression2 stringValue="${user}"/>
                        <L7p:Predicates predicates="included">
                            <L7p:item binary="included">
                                <L7p:CaseSensitive booleanValue="false"/>
                                <L7p:RightValue stringValue="${user}"/>
                            </L7p:item>
                        </L7p:Predicates>
                    </L7p:ComparisonAssertion>
                    <L7p:ForEachLoop L7p:Enabled="false"
                        L7p:Usage="Required"
                        loopVariable="usuarios.results" variablePrefix="xusers">
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValueReference="inline"><![CDATA[USUARIOS: {
"userName":"${xusers.current}"
}]]></L7p:Detail>
                            <L7p:Enabled booleanValue="false"/>
                        </L7p:AuditDetailAssertion>
                        <L7p:SetVariable>
                            <L7p:Base64Expression stringValue="ew0KInVzZXJOYW1lIjoiJHt4dXNlcnMuY3VycmVudH0iDQp9"/>
                            <L7p:VariableToSet stringValue="users"/>
                        </L7p:SetVariable>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValue="CADA USUARIO ${users.mainpart}"/>
                            <L7p:Enabled booleanValue="false"/>
                        </L7p:AuditDetailAssertion>
                        <L7p:ManipulateMultiValuedVariable>
                            <L7p:SourceVariableName stringValue="users"/>
                            <L7p:TargetVariableName stringValue="users_prueba"/>
                        </L7p:ManipulateMultiValuedVariable>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValue="VARIABLES MULTIVALOR: ${users_prueba}"/>
                            <L7p:Enabled booleanValue="false"/>
                        </L7p:AuditDetailAssertion>
                    </L7p:ForEachLoop>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[{
"schemas":
["urn:scim:schemas:core:2.0"],
"Resources":[ 
{
"userName":"${user}"
}
]}]]></L7p:Detail>
                    </L7p:AuditDetailAssertion>
                    <L7p:HardcodedResponse>
                        <L7p:Base64ResponseBody stringValue="ewoic2NoZW1hcyI6ClsidXJuOnNjaW06c2NoZW1hczpjb3JlOjIuMCJdLAoiUmVzb3VyY2VzIjpbIAp7CiJ1c2VyTmFtZSI6IiR7dXNlcn0iCn0KXX0="/>
                        <L7p:EarlyResponse booleanValue="true"/>
                        <L7p:ResponseContentType stringValue="application/json; charset=utf-8"/>
                    </L7p:HardcodedResponse>
                </wsp:All>
                <L7p:CommentAssertion>
                    <L7p:Comment stringValue="LISTAR USUARIO TODOS LOS ATRIBUTOS"/>
                    <L7p:Enabled booleanValue="false"/>
                </L7p:CommentAssertion>
                <wsp:All L7p:Enabled="false" wsp:Usage="Required">
                    <L7p:Regex>
                        <L7p:AutoTarget booleanValue="false"/>
                        <L7p:OtherTargetMessageVariable stringValue="request.http.uri"/>
                        <L7p:Regex stringValue="/orfeo/Users"/>
                        <L7p:RegexName stringValue="Validate URI"/>
                        <L7p:Replacement stringValue=""/>
                        <L7p:Target target="OTHER"/>
                    </L7p:Regex>
                    <L7p:ComparisonAssertion>
                        <L7p:CaseSensitive booleanValue="false"/>
                        <L7p:Expression1 stringValue="${request.http.method}"/>
                        <L7p:Operator operatorNull="null"/>
                        <L7p:Predicates predicates="included">
                            <L7p:item dataType="included">
                                <L7p:Type variableDataType="string"/>
                            </L7p:item>
                            <L7p:item binary="included">
                                <L7p:RightValue stringValue="GET"/>
                            </L7p:item>
                        </L7p:Predicates>
                    </L7p:ComparisonAssertion>
                    <L7p:ComparisonAssertion>
                        <L7p:CaseSensitive booleanValue="false"/>
                        <L7p:Expression1 stringValue="${request.http.parameter.attributes}"/>
                        <L7p:Operator operatorNull="null"/>
                        <L7p:Predicates predicates="included">
                            <L7p:item dataType="included">
                                <L7p:Type variableDataType="string"/>
                            </L7p:item>
                            <L7p:item binary="included">
                                <L7p:CaseSensitive booleanValue="false"/>
                                <L7p:Operator operator="CONTAINS"/>
                                <L7p:RightValue stringValue="NumeroIdentificacion"/>
                            </L7p:item>
                        </L7p:Predicates>
                    </L7p:ComparisonAssertion>
                    <L7p:ComparisonAssertion>
                        <L7p:CaseSensitive booleanValue="false"/>
                        <L7p:Expression1 stringValue="${request.http.parameter.filter}"/>
                        <L7p:Operator operatorNull="null"/>
                        <L7p:Predicates predicates="included">
                            <L7p:item dataType="included">
                                <L7p:Type variableDataType="string"/>
                            </L7p:item>
                            <L7p:item binary="included">
                                <L7p:Operator operator="CONTAINS"/>
                                <L7p:RightValue stringValue="userName eq"/>
                            </L7p:item>
                        </L7p:Predicates>
                    </L7p:ComparisonAssertion>
                    <L7p:ComparisonAssertion>
                        <L7p:CaseSensitive booleanValue="false"/>
                        <L7p:Expression1 stringValue="${request.mainpart}"/>
                        <L7p:Operator operatorNull="null"/>
                        <L7p:Predicates predicates="included">
                            <L7p:item dataType="included">
                                <L7p:Type variableDataType="string"/>
                            </L7p:item>
                            <L7p:item binary="included">
                                <L7p:Operator operator="EMPTY"/>
                                <L7p:RightValue stringValue="MASK eq"/>
                            </L7p:item>
                        </L7p:Predicates>
                    </L7p:ComparisonAssertion>
                    <L7p:Regex>
                        <L7p:AutoTarget booleanValue="false"/>
                        <L7p:CaptureVar stringValue="user"/>
                        <L7p:IncludeEntireExpressionCapture booleanValue="false"/>
                        <L7p:OtherTargetMessageVariable stringValue="request.http.parameter.filter"/>
                        <L7p:Regex stringValue="&quot;(.+)&quot;"/>
                        <L7p:RegexName stringValue="Usuario a consultar"/>
                        <L7p:Replacement stringValue=""/>
                        <L7p:Target target="OTHER"/>
                    </L7p:Regex>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[Ingreso a ATRIBUTOS
user: ${user}]]></L7p:Detail>
                    </L7p:AuditDetailAssertion>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="PHNvYXBlbnY6RW52ZWxvcGUgeG1sbnM6c29hcGVudj0iaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9lbnZlbG9wZS8iIHhtbG5zOnVybj0idXJuOk9yZmVvIj4NCiAgIDxzb2FwZW52OkhlYWRlci8+DQogICA8c29hcGVudjpCb2R5Pg0KICAgICAgPHVybjpjb25zdWx0YXJVc3VhcmlvPg0KICAgICAgICAgPGNvZF9hcHA+MjA8L2NvZF9hcHA+DQogICAgICAgICA8dXNlck9yZmVvPk1TTFdTT1JGRU88L3VzZXJPcmZlbz4NCiAgICAgICAgIDx1c3VhcmlvPiR7dXNlcn08L3VzdWFyaW8+DQogICAgICA8L3Vybjpjb25zdWx0YXJVc3VhcmlvPg0KICAgPC9zb2FwZW52OkJvZHk+DQo8L3NvYXBlbnY6RW52ZWxvcGU+"/>
                        <L7p:ContentType stringValue="text/xml; charset=utf-8"/>
                        <L7p:DataType variableDataType="message"/>
                        <L7p:VariableToSet stringValue="requestPortalO"/>
                    </L7p:SetVariable>
                    <L7p:HttpRoutingAssertion>
                        <L7p:HttpMethod httpMethod="POST"/>
                        <L7p:ProtectedServiceUrl stringValue="http://aporfeopro/orfeo/webServices/servidor.php"/>
                        <L7p:ProxyPassword stringValueNull="null"/>
                        <L7p:ProxyUsername stringValueNull="null"/>
                        <L7p:RequestHeaderRules httpPassthroughRuleSet="included">
                            <L7p:ForwardAll booleanValue="true"/>
                            <L7p:Rules httpPassthroughRules="included">
                                <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Cookie"/>
                                </L7p:item>
                                <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="SOAPAction"/>
                                </L7p:item>
                            </L7p:Rules>
                        </L7p:RequestHeaderRules>
                        <L7p:RequestMsgSrc stringValue="requestPortalO"/>
                        <L7p:RequestParamRules httpPassthroughRuleSet="included">
                            <L7p:ForwardAll booleanValue="true"/>
                            <L7p:Rules httpPassthroughRules="included"/>
                        </L7p:RequestParamRules>
                        <L7p:ResponseHeaderRules httpPassthroughRuleSet="included">
                            <L7p:ForwardAll booleanValue="true"/>
                            <L7p:Rules httpPassthroughRules="included">
                                <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Set-Cookie"/>
                                </L7p:item>
                            </L7p:Rules>
                        </L7p:ResponseHeaderRules>
                        <L7p:ResponseMsgDest stringValue="responsePortalO"/>
                        <L7p:SamlAssertionVersion intValue="2"/>
                    </L7p:HttpRoutingAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[ROUTING   
LatencyBackend: ${httpRouting.latency}
Routing.URL: ${httpRouting.url}
Request.completed: ${request.completed}
Request.elapsedTime: ${request.elapsedTime}
RoutingTotalTime: ${request.routingTotalTime}
RoutingStatus: ${routingStatus}]]></L7p:Detail>
                    </L7p:AuditDetailAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="Reason Code: ${httpRouting.reasonCode}"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[RESPONSE------------
responsePortalO: ${responsePortalO}
responsePortalO: ${responsePortalO.mainpart}]]></L7p:Detail>
                    </L7p:AuditDetailAssertion>
                    <L7p:JsonTransformation>
                        <L7p:DestinationMessageTarget MessageTarget="included">
                            <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSON"/>
                            <L7p:Target target="OTHER"/>
                            <L7p:TargetModifiedByGateway booleanValue="true"/>
                        </L7p:DestinationMessageTarget>
                        <L7p:Enabled booleanValue="false"/>
                        <L7p:OtherTargetMessageVariable stringValue="responsePortalO"/>
                        <L7p:PrettyPrint booleanValue="true"/>
                        <L7p:RootTagString stringValue=""/>
                        <L7p:Target target="OTHER"/>
                    </L7p:JsonTransformation>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="responsePortalOJSON: ${responsePortalOJSON.mainpart}"/>
                        <L7p:Enabled booleanValue="false"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:EvaluateJsonPathExpression>
                        <L7p:Enabled booleanValue="false"/>
                        <L7p:Expression stringValue=".usuario.usuNombreUsuario"/>
                        <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSON"/>
                        <L7p:Target target="OTHER"/>
                        <L7p:VariablePrefix stringValue="usuarios"/>
                    </L7p:EvaluateJsonPathExpression>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[usuarios.found: ${usuarios.found}
usuarios.count: ${usuarios.count}
usuarios.result: ${usuarios.result}
usuarios.results: ${usuarios.results}]]></L7p:Detail>
                        <L7p:Enabled booleanValue="false"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:ResponseXpathAssertion>
                        <L7p:VariablePrefix stringValue="responsePortalOJSON"/>
                        <L7p:XmlMsgSrc stringValue="responsePortalO"/>
                        <L7p:XpathExpression xpathExpressionValue="included">
                            <L7p:Expression stringValue="/SOAP-ENV:Envelope/SOAP-ENV:Body/ns1:consultarUsuarioResponse/return"/>
                            <L7p:Namespaces mapValue="included">
                                <L7p:entry>
                                    <L7p:key stringValue="s"/>
                                    <L7p:value stringValue="http://schemas.xmlsoap.org/soap/envelope/"/>
                                </L7p:entry>
                                <L7p:entry>
                                    <L7p:key stringValue="xsd"/>
                                    <L7p:value stringValue="http://www.w3.org/2001/XMLSchema"/>
                                </L7p:entry>
                                <L7p:entry>
                                    <L7p:key stringValue="ns1"/>
                                    <L7p:value stringValue="urn:Orfeo"/>
                                </L7p:entry>
                                <L7p:entry>
                                    <L7p:key stringValue="SOAP-ENC"/>
                                    <L7p:value stringValue="http://schemas.xmlsoap.org/soap/encoding/"/>
                                </L7p:entry>
                                <L7p:entry>
                                    <L7p:key stringValue="SOAP-ENV"/>
                                    <L7p:value stringValue="http://schemas.xmlsoap.org/soap/envelope/"/>
                                </L7p:entry>
                                <L7p:entry>
                                    <L7p:key stringValue="xsi"/>
                                    <L7p:value stringValue="http://www.w3.org/2001/XMLSchema-instance"/>
                                </L7p:entry>
                            </L7p:Namespaces>
                            <L7p:XpathVersion xpathVersion="XPATH_1_0"/>
                        </L7p:XpathExpression>
                    </L7p:ResponseXpathAssertion>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="WyR7cmVzcG9uc2VQb3J0YWxPSlNPTi5yZXN1bHR9DQoJXQ=="/>
                        <L7p:ContentType stringValue="application/json; charset=utf-8"/>
                        <L7p:DataType variableDataType="message"/>
                        <L7p:VariableToSet stringValue="responsePortalOJSONfin"/>
                    </L7p:SetVariable>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="responsePortalOJSONfin:   ${responsePortalOJSONfin.mainpart}"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:EvaluateJsonPathExpression>
                        <L7p:Expression stringValue=".usuario"/>
                        <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSONfin"/>
                        <L7p:Target target="OTHER"/>
                        <L7p:VariablePrefix stringValue="usuarios"/>
                    </L7p:EvaluateJsonPathExpression>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="${usuarios.result}=${user}"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:ComparisonAssertion>
                        <L7p:CaseSensitive booleanValue="false"/>
                        <L7p:Expression1 stringValue="${usuarios.result}"/>
                        <L7p:Expression2 stringValue="${user}"/>
                        <L7p:Predicates predicates="included">
                            <L7p:item binary="included">
                                <L7p:CaseSensitive booleanValue="false"/>
                                <L7p:RightValue stringValue="${user}"/>
                            </L7p:item>
                        </L7p:Predicates>
                    </L7p:ComparisonAssertion>
                    <L7p:EvaluateJsonPathExpression>
                        <L7p:Enabled booleanValue="false"/>
                        <L7p:Expression stringValue=".usuario.correo"/>
                        <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSON"/>
                        <L7p:Target target="OTHER"/>
                        <L7p:VariablePrefix stringValue="correos"/>
                    </L7p:EvaluateJsonPathExpression>
                    <L7p:EvaluateJsonPathExpression>
                        <L7p:Enabled booleanValue="false"/>
                        <L7p:Expression stringValue=".usuario.rolVoList.rolNombre"/>
                        <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSON"/>
                        <L7p:Target target="OTHER"/>
                        <L7p:VariablePrefix stringValue="roles"/>
                    </L7p:EvaluateJsonPathExpression>
                    <L7p:EvaluateJsonPathExpression>
                        <L7p:Expression stringValue=".nombres"/>
                        <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSONfin"/>
                        <L7p:Target target="OTHER"/>
                        <L7p:VariablePrefix stringValue="nombreCompleto"/>
                    </L7p:EvaluateJsonPathExpression>
                    <L7p:EvaluateJsonPathExpression>
                        <L7p:Expression stringValue=".dependencia"/>
                        <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSONfin"/>
                        <L7p:Target target="OTHER"/>
                        <L7p:VariablePrefix stringValue="dependencia"/>
                    </L7p:EvaluateJsonPathExpression>
                    <L7p:EvaluateJsonPathExpression>
                        <L7p:Expression stringValue=".correo"/>
                        <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSONfin"/>
                        <L7p:Target target="OTHER"/>
                        <L7p:VariablePrefix stringValue="correo"/>
                    </L7p:EvaluateJsonPathExpression>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[correo.found: ${correo.found}
correo.count: ${correo.count}
correo.result: ${correo.result}
correo.results: ${correo.results}]]></L7p:Detail>
                    </L7p:AuditDetailAssertion>
                    <L7p:EvaluateJsonPathExpression>
                        <L7p:Expression stringValue=".perfiles"/>
                        <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSONfin"/>
                        <L7p:Target target="OTHER"/>
                        <L7p:VariablePrefix stringValue="rolespre"/>
                    </L7p:EvaluateJsonPathExpression>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[rolespre.found: ${rolespre.found}
rolespre.count: ${rolespre.count}
rolespre.result: ${rolespre.result}
rolespre.results: ${rolespre.results}]]></L7p:Detail>
                    </L7p:AuditDetailAssertion>
                    <L7p:Split>
                        <L7p:InputVariable stringValue="rolespre.result"/>
                        <L7p:OutputVariable stringValue="roles2"/>
                    </L7p:Split>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="SPLIT: ${roles2}"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:ForEachLoop L7p:Usage="Required"
                        loopVariable="roles2" variablePrefix="roln">
                        <L7p:SetVariable>
                            <L7p:Base64Expression stringValue="JHtyb2xuLmN1cnJlbnR9"/>
                            <L7p:VariableToSet stringValue="rolesfin0"/>
                        </L7p:SetVariable>
                        <L7p:Split>
                            <L7p:InputVariable stringValue="rolesfin0"/>
                            <L7p:OutputVariable stringValue="rolfinal0"/>
                            <L7p:SplitPattern stringValue=":"/>
                        </L7p:Split>
                        <L7p:SetVariable>
                            <L7p:Base64Expression stringValue="ew0KInZhbHVlIjoiJHtyb2xmaW5hbDBbMV19Ig0KfQ=="/>
                            <L7p:VariableToSet stringValue="roles"/>
                        </L7p:SetVariable>
                        <L7p:ManipulateMultiValuedVariable>
                            <L7p:SourceVariableName stringValue="roles"/>
                            <L7p:TargetVariableName stringValue="roles_prueba"/>
                        </L7p:ManipulateMultiValuedVariable>
                    </L7p:ForEachLoop>
                    <L7p:ForEachLoop L7p:Enabled="false"
                        L7p:Usage="Required" loopVariable="roles" variablePrefix="xroles">
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValueReference="inline"><![CDATA[ROLES: {
"nombreRol":"${xroles.current}"
}]]></L7p:Detail>
                            <L7p:Enabled booleanValue="false"/>
                        </L7p:AuditDetailAssertion>
                        <L7p:SetVariable>
                            <L7p:Base64Expression stringValue="ew0KInZhbHVlIjoiJHt4cm9sZXMuY3VycmVudH0iDQp9"/>
                            <L7p:VariableToSet stringValue="roles"/>
                        </L7p:SetVariable>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValue="${roles.mainpart}"/>
                            <L7p:Enabled booleanValue="false"/>
                        </L7p:AuditDetailAssertion>
                        <L7p:ManipulateMultiValuedVariable>
                            <L7p:SourceVariableName stringValue="roles"/>
                            <L7p:TargetVariableName stringValue="roles_prueba"/>
                        </L7p:ManipulateMultiValuedVariable>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValue="VARIABLES MULTIVALOR: ${roles_prueba}"/>
                            <L7p:Enabled booleanValue="false"/>
                        </L7p:AuditDetailAssertion>
                    </L7p:ForEachLoop>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[{
"schemas":
["urn:scim:schemas:core:2.0"],
"Resources":[ 
{
"userName":"${user}",
"Correo":"${correos.result}",
"dependencia":"${dependencia.result}",
"NombreCompleto":"${nombres.result}",
"rol":[
${roles_prueba}
]
}
]}]]></L7p:Detail>
                    </L7p:AuditDetailAssertion>
                    <L7p:HardcodedResponse>
                        <L7p:Base64ResponseBody stringValue="ewoic2NoZW1hcyI6ClsidXJuOnNjaW06c2NoZW1hczpjb3JlOjIuMCJdLAoiUmVzb3VyY2VzIjpbIAp7CiJ1c2VyTmFtZSI6IiR7dXNlcn0iLAoiQ29ycmVvIjoiJHtjb3JyZW9zLnJlc3VsdH0iLAoiZGVwZW5kZW5jaWEiOiIke2RlcGVuZGVuY2lhLnJlc3VsdH0iLAoiTm9tYnJlQ29tcGxldG8iOiIke25vbWJyZXMucmVzdWx0fSIsCiJyb2wiOlsKJHtyb2xlc19wcnVlYmF9Cl0KfQpdfQ=="/>
                        <L7p:EarlyResponse booleanValue="true"/>
                        <L7p:ResponseContentType stringValue="application/json; charset=utf-8"/>
                    </L7p:HardcodedResponse>
                </wsp:All>
                <L7p:CommentAssertion>
                    <L7p:Comment stringValue="LISTAR USUARIO ID y USERNAME"/>
                    <L7p:Enabled booleanValue="false"/>
                </L7p:CommentAssertion>
                <wsp:All L7p:Enabled="false" wsp:Usage="Required">
                    <L7p:Regex>
                        <L7p:AutoTarget booleanValue="false"/>
                        <L7p:OtherTargetMessageVariable stringValue="request.http.uri"/>
                        <L7p:Regex stringValue="/orfeo/Users"/>
                        <L7p:RegexName stringValue="Validate URI"/>
                        <L7p:Replacement stringValue=""/>
                        <L7p:Target target="OTHER"/>
                    </L7p:Regex>
                    <L7p:ComparisonAssertion>
                        <L7p:CaseSensitive booleanValue="false"/>
                        <L7p:Expression1 stringValue="${request.http.method}"/>
                        <L7p:Operator operatorNull="null"/>
                        <L7p:Predicates predicates="included">
                            <L7p:item dataType="included">
                                <L7p:Type variableDataType="string"/>
                            </L7p:item>
                            <L7p:item binary="included">
                                <L7p:RightValue stringValue="GET"/>
                            </L7p:item>
                        </L7p:Predicates>
                    </L7p:ComparisonAssertion>
                    <L7p:ComparisonAssertion>
                        <L7p:CaseSensitive booleanValue="false"/>
                        <L7p:Expression1 stringValue="${request.http.parameter.attributes}"/>
                        <L7p:Operator operatorNull="null"/>
                        <L7p:Predicates predicates="included">
                            <L7p:item dataType="included">
                                <L7p:Type variableDataType="string"/>
                            </L7p:item>
                            <L7p:item binary="included">
                                <L7p:Operator operator="CONTAINS"/>
                                <L7p:RightValue stringValue="userName"/>
                            </L7p:item>
                        </L7p:Predicates>
                    </L7p:ComparisonAssertion>
                    <L7p:ComparisonAssertion>
                        <L7p:CaseSensitive booleanValue="false"/>
                        <L7p:Expression1 stringValue="${request.http.parameter.attributes}"/>
                        <L7p:Operator operatorNull="null"/>
                        <L7p:Predicates predicates="included">
                            <L7p:item dataType="included">
                                <L7p:Type variableDataType="string"/>
                            </L7p:item>
                            <L7p:item binary="included">
                                <L7p:Operator operator="CONTAINS"/>
                                <L7p:RightValue stringValue="id"/>
                            </L7p:item>
                        </L7p:Predicates>
                    </L7p:ComparisonAssertion>
                    <L7p:ComparisonAssertion>
                        <L7p:CaseSensitive booleanValue="false"/>
                        <L7p:Expression1 stringValue="${request.http.parameter.filter}"/>
                        <L7p:Operator operatorNull="null"/>
                        <L7p:Predicates predicates="included">
                            <L7p:item dataType="included">
                                <L7p:Type variableDataType="string"/>
                            </L7p:item>
                            <L7p:item binary="included">
                                <L7p:Operator operator="CONTAINS"/>
                                <L7p:RightValue stringValue="userName eq"/>
                            </L7p:item>
                        </L7p:Predicates>
                    </L7p:ComparisonAssertion>
                    <L7p:ComparisonAssertion>
                        <L7p:CaseSensitive booleanValue="false"/>
                        <L7p:Expression1 stringValue="${request.mainpart}"/>
                        <L7p:Operator operatorNull="null"/>
                        <L7p:Predicates predicates="included">
                            <L7p:item dataType="included">
                                <L7p:Type variableDataType="string"/>
                            </L7p:item>
                            <L7p:item binary="included">
                                <L7p:Operator operator="EMPTY"/>
                                <L7p:RightValue stringValue="MASK eq"/>
                            </L7p:item>
                        </L7p:Predicates>
                    </L7p:ComparisonAssertion>
                    <L7p:Regex>
                        <L7p:AutoTarget booleanValue="false"/>
                        <L7p:CaptureVar stringValue="user"/>
                        <L7p:IncludeEntireExpressionCapture booleanValue="false"/>
                        <L7p:OtherTargetMessageVariable stringValue="request.http.parameter.filter"/>
                        <L7p:Regex stringValue="&quot;(.+)&quot;"/>
                        <L7p:RegexName stringValue="Usuario a consultar"/>
                        <L7p:Replacement stringValue=""/>
                        <L7p:Target target="OTHER"/>
                    </L7p:Regex>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="user: ${user}"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="PHNvYXBlbnY6RW52ZWxvcGUgeG1sbnM6c29hcGVudj0iaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9lbnZlbG9wZS8iIHhtbG5zOnVybj0idXJuOk9yZmVvIj4NCiAgIDxzb2FwZW52OkhlYWRlci8+DQogICA8c29hcGVudjpCb2R5Pg0KICAgICAgPHVybjpjb25zdWx0YXJVc3VhcmlvPg0KICAgICAgICAgPGNvZF9hcHA+MjA8L2NvZF9hcHA+DQogICAgICAgICA8dXNlck9yZmVvPk1TTFdTT1JGRU88L3VzZXJPcmZlbz4NCiAgICAgICAgIDx1c3VhcmlvPiR7dXNlcn08L3VzdWFyaW8+DQogICAgICA8L3Vybjpjb25zdWx0YXJVc3VhcmlvPg0KICAgPC9zb2FwZW52OkJvZHk+DQo8L3NvYXBlbnY6RW52ZWxvcGU+"/>
                        <L7p:ContentType stringValue="text/xml; charset=utf-8"/>
                        <L7p:DataType variableDataType="message"/>
                        <L7p:VariableToSet stringValue="requestPortalO"/>
                    </L7p:SetVariable>
                    <L7p:HttpRoutingAssertion>
                        <L7p:HttpMethod httpMethod="POST"/>
                        <L7p:ProtectedServiceUrl stringValue="http://aporfeopro/orfeo/webServices/servidor.php"/>
                        <L7p:ProxyPassword stringValueNull="null"/>
                        <L7p:ProxyUsername stringValueNull="null"/>
                        <L7p:RequestHeaderRules httpPassthroughRuleSet="included">
                            <L7p:ForwardAll booleanValue="true"/>
                            <L7p:Rules httpPassthroughRules="included">
                                <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Cookie"/>
                                </L7p:item>
                                <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="SOAPAction"/>
                                </L7p:item>
                            </L7p:Rules>
                        </L7p:RequestHeaderRules>
                        <L7p:RequestMsgSrc stringValue="requestPortalO"/>
                        <L7p:RequestParamRules httpPassthroughRuleSet="included">
                            <L7p:ForwardAll booleanValue="true"/>
                            <L7p:Rules httpPassthroughRules="included"/>
                        </L7p:RequestParamRules>
                        <L7p:ResponseHeaderRules httpPassthroughRuleSet="included">
                            <L7p:ForwardAll booleanValue="true"/>
                            <L7p:Rules httpPassthroughRules="included">
                                <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Set-Cookie"/>
                                </L7p:item>
                            </L7p:Rules>
                        </L7p:ResponseHeaderRules>
                        <L7p:ResponseMsgDest stringValue="responsePortalO"/>
                        <L7p:SamlAssertionVersion intValue="2"/>
                    </L7p:HttpRoutingAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[ROUTING   
LatencyBackend: ${httpRouting.latency}
Routing.URL: ${httpRouting.url}
Request.completed: ${request.completed}
Request.elapsedTime: ${request.elapsedTime}
RoutingTotalTime: ${request.routingTotalTime}
RoutingStatus: ${routingStatus}]]></L7p:Detail>
                    </L7p:AuditDetailAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="Reason Code: ${httpRouting.reasonCode}"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[RESPONSE------------
responsePortalO: ${responsePortalO}
responsePortalO: ${responsePortalO.mainpart}]]></L7p:Detail>
                    </L7p:AuditDetailAssertion>
                    <L7p:JsonTransformation>
                        <L7p:DestinationMessageTarget MessageTarget="included">
                            <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSON"/>
                            <L7p:Target target="OTHER"/>
                            <L7p:TargetModifiedByGateway booleanValue="true"/>
                        </L7p:DestinationMessageTarget>
                        <L7p:Enabled booleanValue="false"/>
                        <L7p:OtherTargetMessageVariable stringValue="responsePortalO"/>
                        <L7p:PrettyPrint booleanValue="true"/>
                        <L7p:RootTagString stringValue=""/>
                        <L7p:Target target="OTHER"/>
                    </L7p:JsonTransformation>
                    <L7p:ResponseXpathAssertion>
                        <L7p:VariablePrefix stringValue="responsePortalOJSON"/>
                        <L7p:XmlMsgSrc stringValue="responsePortalO"/>
                        <L7p:XpathExpression xpathExpressionValue="included">
                            <L7p:Expression stringValue="/SOAP-ENV:Envelope/SOAP-ENV:Body/ns1:consultarUsuarioResponse/return"/>
                            <L7p:Namespaces mapValue="included">
                                <L7p:entry>
                                    <L7p:key stringValue="s"/>
                                    <L7p:value stringValue="http://schemas.xmlsoap.org/soap/envelope/"/>
                                </L7p:entry>
                                <L7p:entry>
                                    <L7p:key stringValue="xsd"/>
                                    <L7p:value stringValue="http://www.w3.org/2001/XMLSchema"/>
                                </L7p:entry>
                                <L7p:entry>
                                    <L7p:key stringValue="ns1"/>
                                    <L7p:value stringValue="urn:Orfeo"/>
                                </L7p:entry>
                                <L7p:entry>
                                    <L7p:key stringValue="SOAP-ENC"/>
                                    <L7p:value stringValue="http://schemas.xmlsoap.org/soap/encoding/"/>
                                </L7p:entry>
                                <L7p:entry>
                                    <L7p:key stringValue="SOAP-ENV"/>
                                    <L7p:value stringValue="http://schemas.xmlsoap.org/soap/envelope/"/>
                                </L7p:entry>
                                <L7p:entry>
                                    <L7p:key stringValue="xsi"/>
                                    <L7p:value stringValue="http://www.w3.org/2001/XMLSchema-instance"/>
                                </L7p:entry>
                            </L7p:Namespaces>
                            <L7p:XpathVersion xpathVersion="XPATH_1_0"/>
                        </L7p:XpathExpression>
                    </L7p:ResponseXpathAssertion>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="WyR7cmVzcG9uc2VQb3J0YWxPSlNPTi5yZXN1bHR9DQoJXQ=="/>
                        <L7p:ContentType stringValue="application/json; charset=utf-8"/>
                        <L7p:DataType variableDataType="message"/>
                        <L7p:VariableToSet stringValue="responsePortalOJSONfin"/>
                    </L7p:SetVariable>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="responsePortalOJSON: ${responsePortalOJSON.mainpart}"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:EvaluateJsonPathExpression>
                        <L7p:Expression stringValue=".usuario"/>
                        <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSONfin"/>
                        <L7p:Target target="OTHER"/>
                        <L7p:VariablePrefix stringValue="usuarios"/>
                    </L7p:EvaluateJsonPathExpression>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[usuarios.found: ${usuarios.found}
usuarios.count: ${usuarios.count}
usuarios.result: ${usuarios.result}
usuarios.results: ${usuarios.results}]]></L7p:Detail>
                    </L7p:AuditDetailAssertion>
                    <L7p:ComparisonAssertion>
                        <L7p:CaseSensitive booleanValue="false"/>
                        <L7p:Expression1 stringValue="${usuarios.result}"/>
                        <L7p:Expression2 stringValue="${user}"/>
                        <L7p:Predicates predicates="included">
                            <L7p:item binary="included">
                                <L7p:CaseSensitive booleanValue="false"/>
                                <L7p:RightValue stringValue="${user}"/>
                            </L7p:item>
                        </L7p:Predicates>
                    </L7p:ComparisonAssertion>
                    <L7p:ForEachLoop L7p:Enabled="false"
                        L7p:Usage="Required"
                        loopVariable="usuarios.results" variablePrefix="xusers">
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValueReference="inline"><![CDATA[USUARIOS: {
"userName":"${xusers.current}"
}]]></L7p:Detail>
                            <L7p:Enabled booleanValue="false"/>
                        </L7p:AuditDetailAssertion>
                        <L7p:SetVariable>
                            <L7p:Base64Expression stringValue="ew0KInVzZXJOYW1lIjoiJHt4dXNlcnMuY3VycmVudH0iDQp9"/>
                            <L7p:VariableToSet stringValue="users"/>
                        </L7p:SetVariable>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValue="CADA USUARIO ${users.mainpart}"/>
                            <L7p:Enabled booleanValue="false"/>
                        </L7p:AuditDetailAssertion>
                        <L7p:ManipulateMultiValuedVariable>
                            <L7p:SourceVariableName stringValue="users"/>
                            <L7p:TargetVariableName stringValue="users_prueba"/>
                        </L7p:ManipulateMultiValuedVariable>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValue="VARIABLES MULTIVALOR: ${users_prueba}"/>
                            <L7p:Enabled booleanValue="false"/>
                        </L7p:AuditDetailAssertion>
                    </L7p:ForEachLoop>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[{
"schemas":
["urn:scim:schemas:core:2.0"],
"Resources":[ 
{
"userName":"${user}",
"id":"${user}"
}
]}]]></L7p:Detail>
                    </L7p:AuditDetailAssertion>
                    <L7p:HardcodedResponse>
                        <L7p:Base64ResponseBody stringValue="ewoic2NoZW1hcyI6ClsidXJuOnNjaW06c2NoZW1hczpjb3JlOjIuMCJdLAoiUmVzb3VyY2VzIjpbIAp7CiJpZCI6IiR7dXNlcn0iLAoidXNlck5hbWUiOiIke3VzZXJ9Igp9Cl19"/>
                        <L7p:EarlyResponse booleanValue="true"/>
                        <L7p:ResponseContentType stringValue="application/json; charset=utf-8"/>
                    </L7p:HardcodedResponse>
                </wsp:All>
                <L7p:CommentAssertion>
                    <L7p:Comment stringValue="CREACION USUARIO"/>
                    <L7p:Enabled booleanValue="false"/>
                </L7p:CommentAssertion>
                <wsp:All L7p:Enabled="false" wsp:Usage="Required">
                    <L7p:Regex>
                        <L7p:AutoTarget booleanValue="false"/>
                        <L7p:OtherTargetMessageVariable stringValue="request.http.uri"/>
                        <L7p:Regex stringValue="/orfeo/Users"/>
                        <L7p:RegexName stringValue="Validate URI"/>
                        <L7p:Replacement stringValue=""/>
                        <L7p:Target target="OTHER"/>
                    </L7p:Regex>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmZpbHRlcn0="/>
                        <L7p:VariableToSet stringValue="Filtro"/>
                    </L7p:SetVariable>
                    <L7p:ComparisonAssertion>
                        <L7p:CaseSensitive booleanValue="false"/>
                        <L7p:Expression1 stringValue="${request.http.method}"/>
                        <L7p:Operator operatorNull="null"/>
                        <L7p:Predicates predicates="included">
                            <L7p:item dataType="included">
                                <L7p:Type variableDataType="string"/>
                            </L7p:item>
                            <L7p:item binary="included">
                                <L7p:RightValue stringValue="POST"/>
                            </L7p:item>
                        </L7p:Predicates>
                    </L7p:ComparisonAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="MENSAJE: Operacion de CREAR en PORTALOPERADOR"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="USUARIO A CREAR: ${request.mainpart}"/>
                    </L7p:AuditDetailAssertion>
                    <wsp:All wsp:Usage="Required">
                        <L7p:EvaluateJsonPathExpressionV2>
                            <L7p:Expression stringValue=".userName"/>
                            <L7p:VariablePrefix stringValue="userName"/>
                        </L7p:EvaluateJsonPathExpressionV2>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValueReference="inline"><![CDATA[userName.found: ${userName.found}
userName.count: ${userName.count}
userName.result: ${userName.result}
userName.results: ${userName.results}]]></L7p:Detail>
                        </L7p:AuditDetailAssertion>
                        <L7p:EvaluateJsonPathExpressionV2>
                            <L7p:Expression stringValue=".Correo"/>
                            <L7p:VariablePrefix stringValue="Correo"/>
                        </L7p:EvaluateJsonPathExpressionV2>
                        <L7p:EvaluateJsonPathExpressionV2>
                            <L7p:Expression stringValue=".Dependenciaorfeo"/>
                            <L7p:VariablePrefix stringValue="Dependenciaorfeo"/>
                        </L7p:EvaluateJsonPathExpressionV2>
                        <L7p:EvaluateJsonPathExpressionV2>
                            <L7p:Expression stringValue=".NumeroIdentificacion"/>
                            <L7p:VariablePrefix stringValue="NumeroIdentificacion"/>
                        </L7p:EvaluateJsonPathExpressionV2>
                        <L7p:EvaluateJsonPathExpressionV2>
                            <L7p:Expression stringValue=".NombreCompleto"/>
                            <L7p:VariablePrefix stringValue="NombreCompleto"/>
                        </L7p:EvaluateJsonPathExpressionV2>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValueReference="inline"><![CDATA[Correo.found: ${Correo.found}
Correo.count: ${Correo.count}
Correo.result: ${Correo.result}
Correo.results: ${Correo.results}]]></L7p:Detail>
                        </L7p:AuditDetailAssertion>
                    </wsp:All>
                    <L7p:EvaluateJsonPathExpressionV2>
                        <L7p:Expression stringValue="rol[*].value"/>
                        <L7p:VariablePrefix stringValue="cant-responsabilitys"/>
                    </L7p:EvaluateJsonPathExpressionV2>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[cant-responsabilitys.found: ${cant-responsabilitys.found}
cant-responsabilitys.count: ${cant-responsabilitys.count}
cant-responsabilitys.result: ${cant-responsabilitys.result}
cant-responsabilitys.results: ${cant-responsabilitys.results}]]></L7p:Detail>
                    </L7p:AuditDetailAssertion>
                    <wsp:All wsp:Usage="Required">
                        <L7p:SetVariable>
                            <L7p:Base64Expression stringValue="PHNvYXBlbnY6RW52ZWxvcGUgeG1sbnM6c29hcGVudj0iaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9lbnZlbG9wZS8iIHhtbG5zOnVybj0idXJuOk9yZmVvIj4NCiAgIDxzb2FwZW52OkhlYWRlci8+DQogICA8c29hcGVudjpCb2R5Pg0KICAgICAgPHVybjpjb25zdWx0YXJQZXJmaWxlc1Npc3RlbWE+DQogICAgICAgICA8Y29kX2FwcD4yMDwvY29kX2FwcD4NCiAgICAgICAgIDx1c2VyT3JmZW8+TVNMV1NPUkZFTzwvdXNlck9yZmVvPg0KICAgICAgPC91cm46Y29uc3VsdGFyUGVyZmlsZXNTaXN0ZW1hPg0KICAgPC9zb2FwZW52OkJvZHk+DQo8L3NvYXBlbnY6RW52ZWxvcGU+"/>
                            <L7p:ContentType stringValue="text/xml; charset=utf-8"/>
                            <L7p:DataType variableDataType="message"/>
                            <L7p:VariableToSet stringValue="requestPortalO"/>
                        </L7p:SetVariable>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValue="Consulta de roles: ${requestPortalO.mainpart}"/>
                        </L7p:AuditDetailAssertion>
                        <L7p:HttpRoutingAssertion>
                            <L7p:HttpMethod httpMethod="POST"/>
                            <L7p:ProtectedServiceUrl stringValue="http://aporfeopro/orfeo/webServices/servidor.php"/>
                            <L7p:ProxyPassword stringValueNull="null"/>
                            <L7p:ProxyUsername stringValueNull="null"/>
                            <L7p:RequestHeaderRules httpPassthroughRuleSet="included">
                                <L7p:ForwardAll booleanValue="true"/>
                                <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Cookie"/>
                                    </L7p:item>
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="SOAPAction"/>
                                    </L7p:item>
                                </L7p:Rules>
                            </L7p:RequestHeaderRules>
                            <L7p:RequestMsgSrc stringValue="requestPortalO"/>
                            <L7p:RequestParamRules httpPassthroughRuleSet="included">
                                <L7p:ForwardAll booleanValue="true"/>
                                <L7p:Rules httpPassthroughRules="included"/>
                            </L7p:RequestParamRules>
                            <L7p:ResponseHeaderRules httpPassthroughRuleSet="included">
                                <L7p:ForwardAll booleanValue="true"/>
                                <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Set-Cookie"/>
                                    </L7p:item>
                                </L7p:Rules>
                            </L7p:ResponseHeaderRules>
                            <L7p:ResponseMsgDest stringValue="responsePortalO"/>
                            <L7p:SamlAssertionVersion intValue="2"/>
                        </L7p:HttpRoutingAssertion>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValueReference="inline"><![CDATA[ROUTING   
LatencyBackend: ${httpRouting.latency}
Routing.URL: ${httpRouting.url}
Request.completed: ${request.completed}
Request.elapsedTime: ${request.elapsedTime}
RoutingTotalTime: ${request.routingTotalTime}
RoutingStatus: ${routingStatus}]]></L7p:Detail>
                        </L7p:AuditDetailAssertion>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValue="Reason Code: ${httpRouting.reasonCode}"/>
                        </L7p:AuditDetailAssertion>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValueReference="inline"><![CDATA[RESPONSE------------
responsePortalO: ${responsePortalO}
responsePortalO: ${responsePortalO.mainpart}]]></L7p:Detail>
                        </L7p:AuditDetailAssertion>
                        <L7p:ResponseXpathAssertion>
                            <L7p:VariablePrefix stringValue="responsePortalOJSON"/>
                            <L7p:XmlMsgSrc stringValue="responsePortalO"/>
                            <L7p:XpathExpression xpathExpressionValue="included">
                                <L7p:Expression stringValue="/s:Envelope/s:Body/ns1:consultarPerfilesSistemaResponse/return"/>
                                <L7p:Namespaces mapValue="included">
                                    <L7p:entry>
                                    <L7p:key stringValue="ns1"/>
                                    <L7p:value stringValue="urn:Orfeo"/>
                                    </L7p:entry>
                                    <L7p:entry>
                                    <L7p:key stringValue="s"/>
                                    <L7p:value stringValue="http://schemas.xmlsoap.org/soap/envelope/"/>
                                    </L7p:entry>
                                </L7p:Namespaces>
                                <L7p:XpathVersion xpathVersion="XPATH_1_0"/>
                            </L7p:XpathExpression>
                        </L7p:ResponseXpathAssertion>
                        <L7p:SetVariable>
                            <L7p:Base64Expression stringValue="WyR7cmVzcG9uc2VQb3J0YWxPSlNPTi5yZXN1bHR9DQoJXQ=="/>
                            <L7p:ContentType stringValue="application/json; charset=utf-8"/>
                            <L7p:DataType variableDataType="message"/>
                            <L7p:Enabled booleanValue="false"/>
                            <L7p:VariableToSet stringValue="responsePortalOJSONfin"/>
                        </L7p:SetVariable>
                        <L7p:ComparisonAssertion>
                            <L7p:CaseSensitive booleanValue="false"/>
                            <L7p:Enabled booleanValue="false"/>
                            <L7p:Expression1 stringValue="${responsePortalOJSONexiste}"/>
                            <L7p:Expression2 stringValue="${cant-responsabilitys}"/>
                            <L7p:Operator operator="CONTAINS"/>
                            <L7p:Predicates predicates="included">
                                <L7p:item binary="included">
                                    <L7p:CaseSensitive booleanValue="false"/>
                                    <L7p:Operator operator="CONTAINS"/>
                                    <L7p:RightValue stringValue="${cant-responsabilitys}"/>
                                </L7p:item>
                            </L7p:Predicates>
                        </L7p:ComparisonAssertion>
                        <L7p:JsonTransformation>
                            <L7p:DestinationMessageTarget MessageTarget="included">
                                <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSON"/>
                                <L7p:Target target="OTHER"/>
                                <L7p:TargetModifiedByGateway booleanValue="true"/>
                            </L7p:DestinationMessageTarget>
                            <L7p:Enabled booleanValue="false"/>
                            <L7p:OtherTargetMessageVariable stringValue="responsePortalO"/>
                            <L7p:RootTagString stringValue=""/>
                            <L7p:Target target="OTHER"/>
                        </L7p:JsonTransformation>
                        <L7p:SetVariable>
                            <L7p:Base64Expression stringValue="WyR7cmVzcG9uc2VQb3J0YWxPSlNPTi5yZXN1bHR9XQ=="/>
                            <L7p:ContentType stringValue="application/json; charset=utf-8"/>
                            <L7p:DataType variableDataType="message"/>
                            <L7p:VariableToSet stringValue="rolesjson"/>
                        </L7p:SetVariable>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValue="responsePortalOJSON: ${responsePortalOJSON.result}"/>
                        </L7p:AuditDetailAssertion>
                        <L7p:EvaluateJsonPathExpressionV2>
                            <L7p:Evaluator stringValue="JsonPath"/>
                            <L7p:Expression stringValue=".[?(@.NOMBRE_PERFIL=='${cant-responsabilitys.result}')].ID_PERFIL"/>
                            <L7p:OtherTargetMessageVariable stringValue="rolesjson"/>
                            <L7p:Target target="OTHER"/>
                            <L7p:VariablePrefix stringValue="respo-name"/>
                        </L7p:EvaluateJsonPathExpressionV2>
                        <L7p:HardcodedResponse>
                            <L7p:Base64ResponseBody stringValue="cmVzcG9uc2VQb3J0YWxPSlNPTjogJHtyZXNwb25zZVBvcnRhbE9KU09OLnJlc3VsdH0KcmVzcG8tbmFtZToJJHtyZXNwby1uYW1lLnJlc3VsdH0KcmVzcG8tbmFtZXM6CSR7cmVzcG8tbmFtZS5yZXN1bHRzfQ=="/>
                            <L7p:EarlyResponse booleanValue="true"/>
                            <L7p:Enabled booleanValue="false"/>
                            <L7p:ResponseContentType stringValue="text/json; charset=UTF-8"/>
                        </L7p:HardcodedResponse>
                    </wsp:All>
                    <L7p:ForEachLoop L7p:Enabled="false"
                        L7p:Usage="Required"
                        loopVariable="cant-responsabilitys.results" variablePrefix="item-responsabilitys">
                        <L7p:EvaluateJsonPathExpressionV2>
                            <L7p:Evaluator stringValue="JsonPath"/>
                            <L7p:Expression stringValue=".listaRoles.[?(@.rolNombre=='${item-responsabilitys.current}')].rolCodigo"/>
                            <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSON"/>
                            <L7p:Target target="OTHER"/>
                            <L7p:VariablePrefix stringValue="respo-name"/>
                        </L7p:EvaluateJsonPathExpressionV2>
                        <L7p:SetVariable>
                            <L7p:Base64Expression stringValue="eyJyb2xDb2RpZ28iOiAiJHtyZXNwby1uYW1lLnJlc3VsdH0ifQ=="/>
                            <L7p:VariableToSet stringValue="responsabilitys-item"/>
                        </L7p:SetVariable>
                        <L7p:ManipulateMultiValuedVariable>
                            <L7p:SourceVariableName stringValue="responsabilitys-item"/>
                            <L7p:TargetVariableName stringValue="responsabilitys"/>
                        </L7p:ManipulateMultiValuedVariable>
                    </L7p:ForEachLoop>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="RESPOSABILITYS ${responsabilitys}"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="RESPOSABILITYS ${responsabilitys}"/>
                        <L7p:Enabled booleanValue="false"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="eyJyb2xWb0xpc3QiOiBbDQoJJHtyZXNwb25zYWJpbGl0eXN9DQoJXX0="/>
                        <L7p:ContentType stringValue="application/json; charset=utf-8"/>
                        <L7p:DataType variableDataType="message"/>
                        <L7p:Enabled booleanValue="false"/>
                        <L7p:VariableToSet stringValue="rolVolList"/>
                    </L7p:SetVariable>
                    <L7p:JsonTransformation>
                        <L7p:DestinationMessageTarget MessageTarget="included">
                            <L7p:OtherTargetMessageVariable stringValue="responsabilitysXML"/>
                            <L7p:Target target="OTHER"/>
                            <L7p:TargetModifiedByGateway booleanValue="true"/>
                        </L7p:DestinationMessageTarget>
                        <L7p:Enabled booleanValue="false"/>
                        <L7p:OtherTargetMessageVariable stringValue="rolVolList"/>
                        <L7p:PrettyPrint booleanValue="true"/>
                        <L7p:RootTagString stringValue="tagRoles"/>
                        <L7p:Target target="OTHER"/>
                        <L7p:Transformation transformation="JSON_to_XML"/>
                    </L7p:JsonTransformation>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="RESPOSABILITYSXML ${responsabilitysXML}"/>
                        <L7p:Enabled booleanValue="false"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:ResponseXpathAssertion>
                        <L7p:Enabled booleanValue="false"/>
                        <L7p:VariablePrefix stringValue="rolVoListXML"/>
                        <L7p:XmlMsgSrc stringValue="responsabilitysXML"/>
                        <L7p:XpathExpression xpathExpressionValue="included">
                            <L7p:Expression stringValue="/tagRoles/rolVoList"/>
                            <L7p:Namespaces mapValue="included">
                                <L7p:entry>
                                    <L7p:key stringValue="s"/>
                                    <L7p:value stringValue="http://schemas.xmlsoap.org/soap/envelope/"/>
                                </L7p:entry>
                            </L7p:Namespaces>
                            <L7p:XpathVersion xpathVersion="XPATH_1_0"/>
                        </L7p:XpathExpression>
                    </L7p:ResponseXpathAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[rolVoListXML.found ${rolVoListXML.found}
rolVoListXML.count ${rolVoListXML.count}
rolVoListXML.result ${rolVoListXML.result}
rolVoListXML.results ${rolVoListXML.results}
rolVoListXML.element ${rolVoListXML.element}
rolVoListXML.elements ${rolVoListXML.elements}]]></L7p:Detail>
                        <L7p:Enabled booleanValue="false"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="PHNvYXBlbnY6RW52ZWxvcGUgeG1sbnM6c29hcGVudj0iaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9lbnZlbG9wZS8iIHhtbG5zOnVybj0idXJuOk9yZmVvIj4NCiAgIDxzb2FwZW52OkhlYWRlci8+DQogICA8c29hcGVudjpCb2R5Pg0KICAgICAgPHVybjpjcmVhclVzdWFyaW8+DQogICAgICAgICA8Y29kX2FwcD4yMDwvY29kX2FwcD4NCiAgICAgICAgIDx1c2VyT3JmZW8+TVNMV1NPUkZFTzwvdXNlck9yZmVvPg0KICAgICAgICAgPHVzdWFyaW8+JHt1c2VyTmFtZS5yZXN1bHR9PC91c3VhcmlvPg0KICAgICAgICAgPG51ZXZvPjE8L251ZXZvPg0KICAgICAgICAgPG5vbWJyZXM+JHtOb21icmVDb21wbGV0by5yZXN1bHR9PC9ub21icmVzPg0KICAgICAgICAgPGRvY3VtZW50bz4ke051bWVyb0lkZW50aWZpY2FjaW9uLnJlc3VsdH08L2RvY3VtZW50bz4NCiAgICAgICAgIDxkZXBlbmRlbmNpYT4xMDA8L2RlcGVuZGVuY2lhPg0KICAgICAgICAgPGNvcnJlbz4ke0NvcnJlby5yZXN1bHR9PC9jb3JyZW8+DQogICAgICAgICA8ZXN0YWRvPjE8L2VzdGFkbz4NCiAgICAgICAgIDxuaXZlbD4xPC9uaXZlbD4NCiAgICAgICAgIDxsZGFwX2xvZ2luPjwvbGRhcF9sb2dpbj4NCiAgICAgICAgIDxwZXJmaWxlcz4ke3Jlc3BvLW5hbWUucmVzdWx0fTwvcGVyZmlsZXM+DQogICAgICA8L3VybjpjcmVhclVzdWFyaW8+DQogICA8L3NvYXBlbnY6Qm9keT4NCjwvc29hcGVudjpFbnZlbG9wZT4="/>
                        <L7p:ContentType stringValue="application/soap+xml; charset=utf-8"/>
                        <L7p:DataType variableDataType="message"/>
                        <L7p:VariableToSet stringValue="requestCreate"/>
                    </L7p:SetVariable>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="REQUEST: ${requestCreate.mainpart}"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:HardcodedResponse>
                        <L7p:AssertionComment assertionComment="included">
                            <L7p:Properties mapValue="included">
                                <L7p:entry>
                                    <L7p:key stringValue="RIGHT.COMMENT"/>
                                    <L7p:value stringValue="Responde pruebas Postman"/>
                                </L7p:entry>
                            </L7p:Properties>
                        </L7p:AssertionComment>
                        <L7p:Base64ResponseBody stringValue="ClJlcXVlc3RDcmVhdGU6CiR7cmVxdWVzdENyZWF0ZS5tYWlucGFydH0KCgojIyMjIyMjIyMjIyMjCgpyb2xWb0xpc3RYTUwuZm91bmQgJHtyb2xWb0xpc3RYTUwuZm91bmR9CnJvbFZvTGlzdFhNTC5jb3VudCAke3JvbFZvTGlzdFhNTC5jb3VudH0Kcm9sVm9MaXN0WE1MLnJlc3VsdCAke3JvbFZvTGlzdFhNTC5yZXN1bHR9CnJvbFZvTGlzdFhNTC5yZXN1bHRzICR7cm9sVm9MaXN0WE1MLnJlc3VsdHN9CnJvbFZvTGlzdFhNTC5lbGVtZW50ICR7cm9sVm9MaXN0WE1MLmVsZW1lbnR9CnJvbFZvTGlzdFhNTC5lbGVtZW50cyAke3JvbFZvTGlzdFhNTC5lbGVtZW50c30KCiMjIyMjIyMjIyMKCnVzZXJOYW1lLnJlc3VsdDogJHt1c2VyTmFtZS5yZXN1bHR9CkNvcnJlby5yZXN1bHQ6ICR7Q29ycmVvLnJlc3VsdH0KY2FudC1yZXNwb25zYWJpbGl0eXMucmVzdWx0OiAke2NhbnQtcmVzcG9uc2FiaWxpdHlzLnJlc3VsdH0KY2FudC1yZXNwb25zYWJpbGl0eXMucmVzdWx0czogJHtjYW50LXJlc3BvbnNhYmlsaXR5cy5yZXN1bHRzfQovLy8vLy8KcmVzcG9uc2VQb3J0YWxPSlNPTjogJHtyZXNwb25zZVBvcnRhbE9KU09OLm1haW5wYXJ0fQovLy8vLy8KUkVTUE9TQUJJTElUWVMgJHtyZXNwb25zYWJpbGl0eXN9Ci8vLy8vLy8KUkVTUE9TQUJJTElUWVNYTUwgJHtyZXNwb25zYWJpbGl0eXNYTUwubWFpbnBhcnR9CiMjIyMjClJPTFZPTElTVDogJHtyb2xWb2xMaXN0Lm1haW5wYXJ0fQo="/>
                        <L7p:EarlyResponse booleanValue="true"/>
                        <L7p:Enabled booleanValue="false"/>
                        <L7p:ResponseContentType stringValue="application/json; charset=utf-8"/>
                    </L7p:HardcodedResponse>
                    <L7p:AddHeader>
                        <L7p:HeaderName stringValue="Content-Type"/>
                        <L7p:HeaderValue stringValue="text/xml:charset=UTF-8"/>
                        <L7p:OtherTargetMessageVariable stringValue="requestCreate"/>
                        <L7p:RemoveExisting booleanValue="true"/>
                        <L7p:Target target="OTHER"/>
                    </L7p:AddHeader>
                    <L7p:AddHeader>
                        <L7p:HeaderName stringValue="SOAPAction"/>
                        <L7p:HeaderValue stringValue="&quot;&quot;"/>
                        <L7p:OtherTargetMessageVariable stringValue="requestCreate"/>
                        <L7p:RemoveExisting booleanValue="true"/>
                        <L7p:Target target="OTHER"/>
                    </L7p:AddHeader>
                    <L7p:HttpRoutingAssertion>
                        <L7p:HttpMethod httpMethod="POST"/>
                        <L7p:ProtectedServiceUrl stringValue="http://aporfeopro/orfeo/webServices/servidor.php"/>
                        <L7p:ProxyPassword stringValueNull="null"/>
                        <L7p:ProxyUsername stringValueNull="null"/>
                        <L7p:RequestHeaderRules httpPassthroughRuleSet="included">
                            <L7p:ForwardAll booleanValue="true"/>
                            <L7p:Rules httpPassthroughRules="included">
                                <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Cookie"/>
                                </L7p:item>
                                <L7p:item httpPassthroughRule="included">
                                    <L7p:CustomizeValue stringValue="&quot;&quot;"/>
                                    <L7p:Name stringValue="SOAPAction"/>
                                    <L7p:UsesCustomizedValue booleanValue="true"/>
                                </L7p:item>
                            </L7p:Rules>
                        </L7p:RequestHeaderRules>
                        <L7p:RequestMsgSrc stringValue="requestCreate"/>
                        <L7p:RequestParamRules httpPassthroughRuleSet="included">
                            <L7p:ForwardAll booleanValue="true"/>
                            <L7p:Rules httpPassthroughRules="included"/>
                        </L7p:RequestParamRules>
                        <L7p:ResponseHeaderRules httpPassthroughRuleSet="included">
                            <L7p:ForwardAll booleanValue="true"/>
                            <L7p:Rules httpPassthroughRules="included">
                                <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Set-Cookie"/>
                                </L7p:item>
                            </L7p:Rules>
                        </L7p:ResponseHeaderRules>
                        <L7p:ResponseMsgDest stringValue="responseCreate"/>
                        <L7p:SamlAssertionVersion intValue="2"/>
                    </L7p:HttpRoutingAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[ROUTING   
LatencyBackend: ${httpRouting.latency}
Routing.URL: ${httpRouting.url}
Request.completed: ${request.completed}
Request.elapsedTime: ${requeste.elapsedTime}
RoutingTotalTime: ${request.routingTotalTime}
RoutingStatus: ${routingStatus}]]></L7p:Detail>
                    </L7p:AuditDetailAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="Reason Code: ${httpRouting.reasonCode}"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[RESPUESTA DE LA CREACION: ${responseCreate.mainpart}
RESPUESTA DE LA CREACION: ${responseCreate}]]></L7p:Detail>
                    </L7p:AuditDetailAssertion>
                    <L7p:JsonTransformation>
                        <L7p:DestinationMessageTarget MessageTarget="included">
                            <L7p:OtherTargetMessageVariable stringValue="responseCreateJSON"/>
                            <L7p:Target target="OTHER"/>
                            <L7p:TargetModifiedByGateway booleanValue="true"/>
                        </L7p:DestinationMessageTarget>
                        <L7p:OtherTargetMessageVariable stringValue="responseCreate"/>
                        <L7p:PrettyPrint booleanValue="true"/>
                        <L7p:RootTagString stringValue=""/>
                        <L7p:Target target="OTHER"/>
                    </L7p:JsonTransformation>
                    <L7p:HardcodedResponse>
                        <L7p:Base64ResponseBody stringValue="JHtyZXNwb25zZUNyZWF0ZUpTT04ubWFpbnBhcnR9"/>
                        <L7p:EarlyResponse booleanValue="true"/>
                        <L7p:ResponseContentType stringValue="text/json; charset=UTF-8"/>
                    </L7p:HardcodedResponse>
                    <wsp:All wsp:Usage="Required">
                        <L7p:ComparisonAssertion>
                            <L7p:CaseSensitive booleanValue="false"/>
                            <L7p:Expression1 stringValue="${responseCreateJSON.mainpart}"/>
                            <L7p:Expression2 stringValue="El usuario ya se encuentra registrado"/>
                            <L7p:Operator operator="CONTAINS"/>
                            <L7p:Predicates predicates="included">
                                <L7p:item binary="included">
                                    <L7p:CaseSensitive booleanValue="false"/>
                                    <L7p:Operator operator="CONTAINS"/>
                                    <L7p:RightValue stringValue="El usuario ya se encuentra registrado"/>
                                </L7p:item>
                            </L7p:Predicates>
                        </L7p:ComparisonAssertion>
                        <wsp:All wsp:Usage="Required">
                            <L7p:EvaluateJsonPathExpressionV2>
                                <L7p:Expression stringValue=".userName"/>
                                <L7p:VariablePrefix stringValue="userName"/>
                            </L7p:EvaluateJsonPathExpressionV2>
                            <L7p:AuditDetailAssertion>
                                <L7p:Detail stringValueReference="inline"><![CDATA[userName.found: ${userName.found}
userName.count: ${userName.count}
userName.result: ${userName.result}
userName.results: ${userName.results}]]></L7p:Detail>
                            </L7p:AuditDetailAssertion>
                            <L7p:SetVariable>
                                <L7p:Base64Expression stringValue="JHtyZXF1ZXN0fQ=="/>
                                <L7p:ContentType stringValue="application/json; charset=utf-8"/>
                                <L7p:DataType variableDataType="message"/>
                                <L7p:VariableToSet stringValue="requestPortalAddR"/>
                            </L7p:SetVariable>
                            <L7p:HttpRoutingAssertion>
                                <L7p:HttpMethod httpMethod="PATCH"/>
                                <L7p:Login stringValue="wsOrfeo"/>
                                <L7p:Password stringValue="MSLs0p0rt3."/>
                                <L7p:ProtectedServiceUrl stringValue="https://imapigateway.coljuegos.local:9443/orfeo/Users/${userName.result}"/>
                                <L7p:ProxyPassword stringValueNull="null"/>
                                <L7p:ProxyUsername stringValueNull="null"/>
                                <L7p:RequestHeaderRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Cookie"/>
                                    </L7p:item>
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="SOAPAction"/>
                                    </L7p:item>
                                    </L7p:Rules>
                                </L7p:RequestHeaderRules>
                                <L7p:RequestParamRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included"/>
                                </L7p:RequestParamRules>
                                <L7p:ResponseHeaderRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Set-Cookie"/>
                                    </L7p:item>
                                    </L7p:Rules>
                                </L7p:ResponseHeaderRules>
                                <L7p:ResponseMsgDest stringValue="responsePortalAddR"/>
                                <L7p:SamlAssertionVersion intValue="2"/>
                            </L7p:HttpRoutingAssertion>
                            <L7p:AuditDetailAssertion>
                                <L7p:Detail stringValueReference="inline"><![CDATA[ROUTING   
LatencyBackend: ${httpRouting.latency}
Routing.URL: ${httpRouting.url}
Request.completed: ${request.completed}
Request.elapsedTime: ${requeste.elapsedTime}
RoutingTotalTime: ${request.routingTotalTime}
RoutingStatus: ${routingStatus}]]></L7p:Detail>
                            </L7p:AuditDetailAssertion>
                            <L7p:AuditDetailAssertion>
                                <L7p:Detail stringValue="Reason Code: ${httpRouting.reasonCode}"/>
                            </L7p:AuditDetailAssertion>
                            <L7p:AuditDetailAssertion>
                                <L7p:Detail stringValue="ACTUALIZAR: ${responsePortalAddR.mainpart}"/>
                            </L7p:AuditDetailAssertion>
                        </wsp:All>
                    </wsp:All>
                    <L7p:HardcodedResponse>
                        <L7p:Base64ResponseBody stringValue="cmVzcG9uc2VDcmVhdGVKU09OLm1haW5wYXJ0"/>
                        <L7p:EarlyResponse booleanValue="true"/>
                        <L7p:ResponseContentType stringValue="text/json; charset=UTF-8"/>
                    </L7p:HardcodedResponse>
                    <L7p:assertionComment>
                        <L7p:Properties mapValue="included">
                            <L7p:entry>
                                <L7p:key stringValue="RIGHT.COMMENT"/>
                                <L7p:value stringValue="******* CREATE"/>
                            </L7p:entry>
                        </L7p:Properties>
                    </L7p:assertionComment>
                </wsp:All>
                <L7p:CommentAssertion>
                    <L7p:Comment stringValue="MODIFICACION"/>
                    <L7p:Enabled booleanValue="false"/>
                </L7p:CommentAssertion>
                <wsp:All L7p:Enabled="false" wsp:Usage="Required">
                    <L7p:ComparisonAssertion>
                        <L7p:CaseSensitive booleanValue="false"/>
                        <L7p:Expression1 stringValue="${request.http.method}"/>
                        <L7p:Operator operatorNull="null"/>
                        <L7p:Predicates predicates="included">
                            <L7p:item dataType="included">
                                <L7p:Type variableDataType="string"/>
                            </L7p:item>
                            <L7p:item binary="included">
                                <L7p:RightValue stringValue="PATCH"/>
                            </L7p:item>
                        </L7p:Predicates>
                    </L7p:ComparisonAssertion>
                    <L7p:Regex>
                        <L7p:AutoTarget booleanValue="false"/>
                        <L7p:CaptureVar stringValue="Usuario"/>
                        <L7p:IncludeEntireExpressionCapture booleanValue="false"/>
                        <L7p:OtherTargetMessageVariable stringValue="request.http.uri"/>
                        <L7p:Regex stringValue="/orfeo/Users/(.+)"/>
                        <L7p:RegexName stringValue="Usuario a Modificar"/>
                        <L7p:Replacement stringValue=""/>
                        <L7p:Target target="OTHER"/>
                    </L7p:Regex>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="USUARIO A MODIFICAR: ${Usuario}"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:Regex>
                        <L7p:AutoTarget booleanValue="false"/>
                        <L7p:CaptureVar stringValue="campos"/>
                        <L7p:IncludeEntireExpressionCapture booleanValue="false"/>
                        <L7p:Regex stringValue="&quot;(\w*)&quot;:"/>
                        <L7p:RegexName stringValue="Obtener campos"/>
                        <L7p:Replacement stringValue=""/>
                    </L7p:Regex>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="CAMPOS A MODIFICAR: ${campos}"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="REQUEST DE DATOS A MODIFICAR: ${request.mainpart}"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="JHtyZXF1ZXN0Lm1haW5wYXJ0fQ=="/>
                        <L7p:VariableToSet stringValue="requestOriginal"/>
                    </L7p:SetVariable>
                    <L7p:HardcodedResponse>
                        <L7p:Base64ResponseBody stringValue="UkVRVUVTVCBERSBEQVRPUyBBIE1PRElGSUNBUjogJHtyZXF1ZXN0Lm1haW5wYXJ0fQ=="/>
                        <L7p:EarlyResponse booleanValue="true"/>
                        <L7p:Enabled booleanValue="false"/>
                        <L7p:ResponseContentType stringValue="text/json; charset=UTF-8"/>
                    </L7p:HardcodedResponse>
                    <wsp:OneOrMore wsp:Usage="Required">
                        <wsp:All wsp:Usage="Required">
                            <L7p:ComparisonAssertion>
                                <L7p:CaseSensitive booleanValue="false"/>
                                <L7p:Expression1 stringValue="${request.mainpart}"/>
                                <L7p:Operator operatorNull="null"/>
                                <L7p:Predicates predicates="included">
                                    <L7p:item dataType="included">
                                    <L7p:Type variableDataType="string"/>
                                    </L7p:item>
                                    <L7p:item binary="included">
                                    <L7p:CaseSensitive booleanValue="false"/>
                                    <L7p:Operator operator="CONTAINS"/>
                                    <L7p:RightValue stringValue="Dependenciaorfeo"/>
                                    </L7p:item>
                                </L7p:Predicates>
                            </L7p:ComparisonAssertion>
                            <L7p:Regex>
                                <L7p:AutoTarget booleanValue="false"/>
                                <L7p:CaptureVar stringValue="Usuario"/>
                                <L7p:IncludeEntireExpressionCapture booleanValue="false"/>
                                <L7p:OtherTargetMessageVariable stringValue="request.http.uri"/>
                                <L7p:Regex stringValue="/orfeo/Users/(.+)"/>
                                <L7p:RegexName stringValue="Usuario a MOdificar"/>
                                <L7p:Replacement stringValue=""/>
                                <L7p:Target target="OTHER"/>
                            </L7p:Regex>
                            <L7p:AuditDetailAssertion>
                                <L7p:Detail stringValue="USUARIO A Modificar: ${Usuario}"/>
                            </L7p:AuditDetailAssertion>
                            <L7p:EvaluateJsonPathExpressionV2>
                                <L7p:Expression stringValue=".Dependenciaorfeo"/>
                                <L7p:VariablePrefix stringValue="dependenciamod"/>
                            </L7p:EvaluateJsonPathExpressionV2>
                            <wsp:All wsp:Usage="Required">
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="PHNvYXBlbnY6RW52ZWxvcGUgeG1sbnM6c29hcGVudj0iaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9lbnZlbG9wZS8iIHhtbG5zOnVybj0idXJuOk9yZmVvIj4NCiAgIDxzb2FwZW52OkhlYWRlci8+DQogICA8c29hcGVudjpCb2R5Pg0KICAgICAgPHVybjpjb25zdWx0YXJVc3VhcmlvPg0KICAgICAgICAgPGNvZF9hcHA+MjA8L2NvZF9hcHA+DQogICAgICAgICA8dXNlck9yZmVvPk1TTFdTT1JGRU88L3VzZXJPcmZlbz4NCiAgICAgICAgIDx1c3VhcmlvPiR7VXN1YXJpb308L3VzdWFyaW8+DQogICAgICA8L3Vybjpjb25zdWx0YXJVc3VhcmlvPg0KICAgPC9zb2FwZW52OkJvZHk+DQo8L3NvYXBlbnY6RW52ZWxvcGU+"/>
                                    <L7p:ContentType stringValue="text/xml; charset=utf-8"/>
                                    <L7p:DataType variableDataType="message"/>
                                    <L7p:VariableToSet stringValue="requestPortalO"/>
                                </L7p:SetVariable>
                                <L7p:HttpRoutingAssertion>
                                    <L7p:HttpMethod httpMethod="POST"/>
                                    <L7p:ProtectedServiceUrl stringValue="http://aporfeopro/orfeo/webServices/servidor.php"/>
                                    <L7p:ProxyPassword stringValueNull="null"/>
                                    <L7p:ProxyUsername stringValueNull="null"/>
                                    <L7p:RequestHeaderRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Cookie"/>
                                    </L7p:item>
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="SOAPAction"/>
                                    </L7p:item>
                                    </L7p:Rules>
                                    </L7p:RequestHeaderRules>
                                    <L7p:RequestMsgSrc stringValue="requestPortalO"/>
                                    <L7p:RequestParamRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included"/>
                                    </L7p:RequestParamRules>
                                    <L7p:ResponseHeaderRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Set-Cookie"/>
                                    </L7p:item>
                                    </L7p:Rules>
                                    </L7p:ResponseHeaderRules>
                                    <L7p:ResponseMsgDest stringValue="responsePortalO"/>
                                    <L7p:SamlAssertionVersion intValue="2"/>
                                </L7p:HttpRoutingAssertion>
                                <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValueReference="inline"><![CDATA[ROUTING   
LatencyBackend: ${httpRouting.latency}
Routing.URL: ${httpRouting.url}
Request.completed: ${request.completed}
Request.elapsedTime: ${request.elapsedTime}
RoutingTotalTime: ${request.routingTotalTime}
RoutingStatus: ${routingStatus}]]></L7p:Detail>
                                </L7p:AuditDetailAssertion>
                                <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValue="Reason Code: ${httpRouting.reasonCode}"/>
                                </L7p:AuditDetailAssertion>
                                <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValueReference="inline"><![CDATA[RESPONSE------------
responsePortalO: ${responsePortalO}
responsePortalO: ${responsePortalO.mainpart}]]></L7p:Detail>
                                </L7p:AuditDetailAssertion>
                                <L7p:ResponseXpathAssertion>
                                    <L7p:VariablePrefix stringValue="responsePortalOJSON"/>
                                    <L7p:XmlMsgSrc stringValue="responsePortalO"/>
                                    <L7p:XpathExpression xpathExpressionValue="included">
                                    <L7p:Expression stringValue="/SOAP-ENV:Envelope/SOAP-ENV:Body/ns1:consultarUsuarioResponse/return"/>
                                    <L7p:Namespaces mapValue="included">
                                    <L7p:entry>
                                    <L7p:key stringValue="s"/>
                                    <L7p:value stringValue="http://schemas.xmlsoap.org/soap/envelope/"/>
                                    </L7p:entry>
                                    <L7p:entry>
                                    <L7p:key stringValue="xsd"/>
                                    <L7p:value stringValue="http://www.w3.org/2001/XMLSchema"/>
                                    </L7p:entry>
                                    <L7p:entry>
                                    <L7p:key stringValue="ns1"/>
                                    <L7p:value stringValue="urn:Orfeo"/>
                                    </L7p:entry>
                                    <L7p:entry>
                                    <L7p:key stringValue="SOAP-ENC"/>
                                    <L7p:value stringValue="http://schemas.xmlsoap.org/soap/encoding/"/>
                                    </L7p:entry>
                                    <L7p:entry>
                                    <L7p:key stringValue="SOAP-ENV"/>
                                    <L7p:value stringValue="http://schemas.xmlsoap.org/soap/envelope/"/>
                                    </L7p:entry>
                                    <L7p:entry>
                                    <L7p:key stringValue="xsi"/>
                                    <L7p:value stringValue="http://www.w3.org/2001/XMLSchema-instance"/>
                                    </L7p:entry>
                                    </L7p:Namespaces>
                                    <L7p:XpathVersion xpathVersion="XPATH_1_0"/>
                                    </L7p:XpathExpression>
                                </L7p:ResponseXpathAssertion>
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="WyR7cmVzcG9uc2VQb3J0YWxPSlNPTi5yZXN1bHR9DQoJXQ=="/>
                                    <L7p:ContentType stringValue="application/json; charset=utf-8"/>
                                    <L7p:DataType variableDataType="message"/>
                                    <L7p:VariableToSet stringValue="responsePortalOJSONfin"/>
                                </L7p:SetVariable>
                                <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValue="responsePortalOJSONfin:   ${responsePortalOJSONfin.mainpart}"/>
                                </L7p:AuditDetailAssertion>
                                <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".usuario"/>
                                    <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSONfin"/>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:VariablePrefix stringValue="usurDep"/>
                                </L7p:EvaluateJsonPathExpression>
                                <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".nombres"/>
                                    <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSONfin"/>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:VariablePrefix stringValue="nombrDep"/>
                                </L7p:EvaluateJsonPathExpression>
                                <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".documento"/>
                                    <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSONfin"/>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:VariablePrefix stringValue="docDep"/>
                                </L7p:EvaluateJsonPathExpression>
                                <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".correo"/>
                                    <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSONfin"/>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:VariablePrefix stringValue="corrDep"/>
                                </L7p:EvaluateJsonPathExpression>
                                <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".estado"/>
                                    <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSONfin"/>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:VariablePrefix stringValue="estadoDep"/>
                                </L7p:EvaluateJsonPathExpression>
                                <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".nivel"/>
                                    <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSONfin"/>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:VariablePrefix stringValue="nivelDep"/>
                                </L7p:EvaluateJsonPathExpression>
                                <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".ldap"/>
                                    <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSONfin"/>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:VariablePrefix stringValue="ldapDep"/>
                                </L7p:EvaluateJsonPathExpression>
                            </wsp:All>
                            <L7p:SetVariable>
                                <L7p:Base64Expression stringValue="PHNvYXBlbnY6RW52ZWxvcGUgeG1sbnM6c29hcGVudj0iaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9lbnZlbG9wZS8iIHhtbG5zOnVybj0idXJuOk9yZmVvIj4NCiAgIDxzb2FwZW52OkhlYWRlci8+DQogICA8c29hcGVudjpCb2R5Pg0KICAgICAgPHVybjptb2RpZmljYXJVc3VhcmlvPg0KICAgICAgICAgPGNvZF9hcHA+MjA8L2NvZF9hcHA+DQogICAgICAgICA8dXNlck9yZmVvPk1TTFdTT1JGRU88L3VzZXJPcmZlbz4NCiAgICAgICAgIDx1c3VhcmlvPiR7dXN1ckRlcC5yZXN1bHR9PC91c3VhcmlvPg0KICAgICAgICAgPG5vbWJyZXM+JHtub21ickRlcC5yZXN1bHR9PC9ub21icmVzPg0KICAgICAgICAgPGRlcGVuZGVuY2lhPiR7ZGVwZW5kZW5jaWFtb2QucmVzdWx0fTwvZGVwZW5kZW5jaWE+DQogICAgICAgICA8Y29ycmVvPiR7Y29yckRlcC5yZXN1bHR9PC9jb3JyZW8+DQogICAgICAgICA8ZXN0YWRvPiR7ZXN0YWRvRGVwLnJlc3VsdH08L2VzdGFkbz4NCiAgICAgICAgIDxuaXZlbD4ke25pdmVsRGVwLnJlc3VsdH08L25pdmVsPg0KICAgICAgICAgPGxkYXBfbG9naW4+JHtsZGFwRGVwLnJlc3VsdH08L2xkYXBfbG9naW4+DQogICAgICA8L3Vybjptb2RpZmljYXJVc3VhcmlvPg0KICAgPC9zb2FwZW52OkJvZHk+DQo8L3NvYXBlbnY6RW52ZWxvcGU+"/>
                                <L7p:ContentType stringValue="application/soap+xml; charset=utf-8"/>
                                <L7p:DataType variableDataType="message"/>
                                <L7p:VariableToSet stringValue="requestModificarUsuario"/>
                            </L7p:SetVariable>
                            <L7p:HttpRoutingAssertion>
                                <L7p:HttpMethod httpMethod="POST"/>
                                <L7p:ProtectedServiceUrl stringValue="http://aporfeopro/orfeo/webServices/servidor.php"/>
                                <L7p:ProxyPassword stringValueNull="null"/>
                                <L7p:ProxyUsername stringValueNull="null"/>
                                <L7p:RequestHeaderRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Cookie"/>
                                    </L7p:item>
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="SOAPAction"/>
                                    </L7p:item>
                                    </L7p:Rules>
                                </L7p:RequestHeaderRules>
                                <L7p:RequestMsgSrc stringValue="requestModificarUsuario"/>
                                <L7p:RequestParamRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included"/>
                                </L7p:RequestParamRules>
                                <L7p:ResponseHeaderRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Set-Cookie"/>
                                    </L7p:item>
                                    </L7p:Rules>
                                </L7p:ResponseHeaderRules>
                                <L7p:ResponseMsgDest stringValue="responseModificarUsuario"/>
                                <L7p:SamlAssertionVersion intValue="2"/>
                            </L7p:HttpRoutingAssertion>
                            <L7p:AuditDetailAssertion>
                                <L7p:Detail stringValueReference="inline"><![CDATA[ROUTING   
LatencyBackend: ${httpRouting.latency}
Routing.URL: ${httpRouting.url}
Request.completed: ${request.completed}
Request.elapsedTime: ${request.elapsedTime}
RoutingTotalTime: ${request.routingTotalTime}
RoutingStatus: ${routingStatus}]]></L7p:Detail>
                            </L7p:AuditDetailAssertion>
                            <L7p:AuditDetailAssertion>
                                <L7p:Detail stringValue="Reason Code: ${httpRouting.reasonCode}"/>
                            </L7p:AuditDetailAssertion>
                            <L7p:AuditDetailAssertion>
                                <L7p:Detail stringValueReference="inline"><![CDATA[RESPONSE------------MODIF DEP
responseModificarUsuario: ${responseModificarUsuario}
responseModificarUsuario: ${responseModificarUsuario.mainpart}]]></L7p:Detail>
                            </L7p:AuditDetailAssertion>
                        </wsp:All>
                        <L7p:TrueAssertion/>
                        <L7p:assertionComment>
                            <L7p:Properties mapValue="included">
                                <L7p:entry>
                                    <L7p:key stringValue="RIGHT.COMMENT"/>
                                    <L7p:value stringValue="Modificación de Dependencia"/>
                                </L7p:entry>
                            </L7p:Properties>
                        </L7p:assertionComment>
                    </wsp:OneOrMore>
                    <wsp:OneOrMore wsp:Usage="Required">
                        <L7p:CommentAssertion>
                            <L7p:Comment stringValue="Bloquear Usuario"/>
                        </L7p:CommentAssertion>
                        <wsp:All wsp:Usage="Required">
                            <L7p:ComparisonAssertion>
                                <L7p:CaseSensitive booleanValue="false"/>
                                <L7p:Expression1 stringValue="${request.mainpart}"/>
                                <L7p:Operator operatorNull="null"/>
                                <L7p:Predicates predicates="included">
                                    <L7p:item dataType="included">
                                    <L7p:Type variableDataType="string"/>
                                    </L7p:item>
                                    <L7p:item binary="included">
                                    <L7p:Operator operator="CONTAINS"/>
                                    <L7p:RightValue stringValue="active"/>
                                    </L7p:item>
                                </L7p:Predicates>
                            </L7p:ComparisonAssertion>
                            <L7p:ComparisonAssertion>
                                <L7p:CaseSensitive booleanValue="false"/>
                                <L7p:Expression1 stringValue="${request.mainpart}"/>
                                <L7p:Operator operatorNull="null"/>
                                <L7p:Predicates predicates="included">
                                    <L7p:item dataType="included">
                                    <L7p:Type variableDataType="string"/>
                                    </L7p:item>
                                    <L7p:item binary="included">
                                    <L7p:Operator operator="CONTAINS"/>
                                    <L7p:RightValue stringValue="false"/>
                                    </L7p:item>
                                </L7p:Predicates>
                            </L7p:ComparisonAssertion>
                            <wsp:All wsp:Usage="Required">
                                <L7p:Regex>
                                    <L7p:AutoTarget booleanValue="false"/>
                                    <L7p:CaptureVar stringValue="Usuario"/>
                                    <L7p:IncludeEntireExpressionCapture booleanValue="false"/>
                                    <L7p:OtherTargetMessageVariable stringValue="request.http.uri"/>
                                    <L7p:Regex stringValue="/orfeo/Users/(.+)"/>
                                    <L7p:RegexName stringValue="Usuario a Deshabilitar"/>
                                    <L7p:Replacement stringValue=""/>
                                    <L7p:Target target="OTHER"/>
                                </L7p:Regex>
                                <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValue="USUARIO A BLOQUEAR: ${Usuario}"/>
                                </L7p:AuditDetailAssertion>
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="PHNvYXBlbnY6RW52ZWxvcGUgeG1sbnM6c29hcGVudj0iaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9lbnZlbG9wZS8iIHhtbG5zOnVybj0idXJuOk9yZmVvIj4NCiAgIDxzb2FwZW52OkhlYWRlci8+DQogICA8c29hcGVudjpCb2R5Pg0KICAgICAgPHVybjptb2RpZmljYXJVc3VhcmlvPg0KICAgICAgICAgPGNvZF9hcHA+MjA8L2NvZF9hcHA+DQogICAgICAgICA8dXNlck9yZmVvPk1TTFdTT1JGRU88L3VzZXJPcmZlbz4NCiAgICAgICAgIDx1c3VhcmlvPiR7VXN1YXJpb308L3VzdWFyaW8+DQogICAgICAgICA8bm9tYnJlcz48L25vbWJyZXM+DQogICAgICAgICA8ZGVwZW5kZW5jaWE+PC9kZXBlbmRlbmNpYT4NCiAgICAgICAgIDxjb3JyZW8+PC9jb3JyZW8+DQogICAgICAgICA8ZXN0YWRvPjA8L2VzdGFkbz4NCiAgICAgICAgIDxuaXZlbD48L25pdmVsPg0KICAgICAgICAgPGxkYXBfbG9naW4+PC9sZGFwX2xvZ2luPg0KICAgICAgPC91cm46bW9kaWZpY2FyVXN1YXJpbz4NCiAgIDwvc29hcGVudjpCb2R5Pg0KPC9zb2FwZW52OkVudmVsb3BlPg=="/>
                                    <L7p:ContentType stringValue="application/soap+xml; charset=utf-8"/>
                                    <L7p:DataType variableDataType="message"/>
                                    <L7p:VariableToSet stringValue="requestBloqueo"/>
                                </L7p:SetVariable>
                                <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValue="REQUEST: ${requestBloqueo.mainpart}"/>
                                </L7p:AuditDetailAssertion>
                                <L7p:AddHeader>
                                    <L7p:HeaderName stringValue="Content-Type"/>
                                    <L7p:HeaderValue stringValue="text/xml:charset=UT-8"/>
                                    <L7p:OtherTargetMessageVariable stringValue="requestBloqueo"/>
                                    <L7p:RemoveExisting booleanValue="true"/>
                                    <L7p:Target target="OTHER"/>
                                </L7p:AddHeader>
                                <L7p:AddHeader>
                                    <L7p:HeaderName stringValue="SOAPAction"/>
                                    <L7p:HeaderValue stringValue="&quot;&quot;"/>
                                    <L7p:OtherTargetMessageVariable stringValue="requestBloqueo"/>
                                    <L7p:RemoveExisting booleanValue="true"/>
                                    <L7p:Target target="OTHER"/>
                                </L7p:AddHeader>
                                <L7p:HttpRoutingAssertion>
                                    <L7p:HttpMethod httpMethod="POST"/>
                                    <L7p:ProtectedServiceUrl stringValue="http://aporfeopro/orfeo/webServices/servidor.php"/>
                                    <L7p:ProxyPassword stringValueNull="null"/>
                                    <L7p:ProxyUsername stringValueNull="null"/>
                                    <L7p:RequestHeaderRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Cookie"/>
                                    </L7p:item>
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:CustomizeValue stringValue="&quot;&quot;"/>
                                    <L7p:Name stringValue="SOAPAction"/>
                                    <L7p:UsesCustomizedValue booleanValue="true"/>
                                    </L7p:item>
                                    </L7p:Rules>
                                    </L7p:RequestHeaderRules>
                                    <L7p:RequestMsgSrc stringValue="requestBloqueo"/>
                                    <L7p:RequestParamRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included"/>
                                    </L7p:RequestParamRules>
                                    <L7p:ResponseHeaderRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Set-Cookie"/>
                                    </L7p:item>
                                    </L7p:Rules>
                                    </L7p:ResponseHeaderRules>
                                    <L7p:ResponseMsgDest stringValue="responseBloqueo"/>
                                    <L7p:SamlAssertionVersion intValue="2"/>
                                </L7p:HttpRoutingAssertion>
                                <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValueReference="inline"><![CDATA[ROUTING   
LatencyBackend: ${httpRouting.latency}
Routing.URL: ${httpRouting.url}
Request.completed: ${request.completed}
Request.elapsedTime: ${requeste.elapsedTime}
RoutingTotalTime: ${request.routingTotalTime}
RoutingStatus: ${routingStatus}]]></L7p:Detail>
                                </L7p:AuditDetailAssertion>
                                <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValue="Reason Code: ${httpRouting.reasonCode}"/>
                                </L7p:AuditDetailAssertion>
                                <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValueReference="inline"><![CDATA[RESPUESTA DE LA CREACION: ${responseBloqueo.mainpart}
RESPUESTA DE LA CREACION: ${responseBloqueo}]]></L7p:Detail>
                                </L7p:AuditDetailAssertion>
                                <L7p:JsonTransformation>
                                    <L7p:DestinationMessageTarget MessageTarget="included">
                                    <L7p:OtherTargetMessageVariable stringValue="responseBloqueoJSON"/>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:TargetModifiedByGateway booleanValue="true"/>
                                    </L7p:DestinationMessageTarget>
                                    <L7p:OtherTargetMessageVariable stringValue="responseBloqueo"/>
                                    <L7p:PrettyPrint booleanValue="true"/>
                                    <L7p:RootTagString stringValue=""/>
                                    <L7p:Target target="OTHER"/>
                                </L7p:JsonTransformation>
                                <wsp:OneOrMore wsp:Usage="Required">
                                    <L7p:ComparisonAssertion>
                                    <L7p:CaseSensitive booleanValue="false"/>
                                    <L7p:Expression1 stringValue="${requestOriginal}"/>
                                    <L7p:Operator operatorNull="null"/>
                                    <L7p:Predicates predicates="included">
                                    <L7p:item dataType="included">
                                    <L7p:Type variableDataType="string"/>
                                    </L7p:item>
                                    <L7p:item binary="included">
                                    <L7p:Operator operator="CONTAINS"/>
                                    <L7p:RightValue stringValue="rol"/>
                                    </L7p:item>
                                    </L7p:Predicates>
                                    </L7p:ComparisonAssertion>
                                    <L7p:HardcodedResponse>
                                    <L7p:Base64ResponseBody stringValue="JHtyZXNwb25zZUJsb3F1ZW9KU09OLm1haW5wYXJ0fQ=="/>
                                    <L7p:EarlyResponse booleanValue="true"/>
                                    <L7p:ResponseContentType stringValue="text/json; charset=UTF-8"/>
                                    </L7p:HardcodedResponse>
                                </wsp:OneOrMore>
                                <L7p:assertionComment>
                                    <L7p:Properties mapValue="included">
                                    <L7p:entry>
                                    <L7p:key stringValue="RIGHT.COMMENT"/>
                                    <L7p:value stringValue="******* VIEW *********"/>
                                    </L7p:entry>
                                    </L7p:Properties>
                                </L7p:assertionComment>
                            </wsp:All>
                        </wsp:All>
                        <L7p:CommentAssertion>
                            <L7p:Comment stringValue="Desbloqueo Usuario"/>
                        </L7p:CommentAssertion>
                        <wsp:All wsp:Usage="Required">
                            <L7p:ComparisonAssertion>
                                <L7p:CaseSensitive booleanValue="false"/>
                                <L7p:Expression1 stringValue="${request.mainpart}"/>
                                <L7p:Operator operatorNull="null"/>
                                <L7p:Predicates predicates="included">
                                    <L7p:item dataType="included">
                                    <L7p:Type variableDataType="string"/>
                                    </L7p:item>
                                    <L7p:item binary="included">
                                    <L7p:Operator operator="CONTAINS"/>
                                    <L7p:RightValue stringValue="active"/>
                                    </L7p:item>
                                </L7p:Predicates>
                            </L7p:ComparisonAssertion>
                            <L7p:ComparisonAssertion>
                                <L7p:CaseSensitive booleanValue="false"/>
                                <L7p:Expression1 stringValue="${request.mainpart}"/>
                                <L7p:Operator operatorNull="null"/>
                                <L7p:Predicates predicates="included">
                                    <L7p:item dataType="included">
                                    <L7p:Type variableDataType="string"/>
                                    </L7p:item>
                                    <L7p:item binary="included">
                                    <L7p:Operator operator="CONTAINS"/>
                                    <L7p:RightValue stringValue="true"/>
                                    </L7p:item>
                                </L7p:Predicates>
                            </L7p:ComparisonAssertion>
                            <wsp:All wsp:Usage="Required">
                                <L7p:Regex>
                                    <L7p:AutoTarget booleanValue="false"/>
                                    <L7p:CaptureVar stringValue="Usuario"/>
                                    <L7p:IncludeEntireExpressionCapture booleanValue="false"/>
                                    <L7p:OtherTargetMessageVariable stringValue="request.http.uri"/>
                                    <L7p:Regex stringValue="/orfeo/Users/(.+)"/>
                                    <L7p:RegexName stringValue="Usuario a Deshabilitar"/>
                                    <L7p:Replacement stringValue=""/>
                                    <L7p:Target target="OTHER"/>
                                </L7p:Regex>
                                <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValue="USUARIO A DESBLOQUEAR: ${Usuario}"/>
                                </L7p:AuditDetailAssertion>
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="PHNvYXBlbnY6RW52ZWxvcGUgeG1sbnM6c29hcGVudj0iaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9lbnZlbG9wZS8iIHhtbG5zOnVybj0idXJuOk9yZmVvIj4NCiAgIDxzb2FwZW52OkhlYWRlci8+DQogICA8c29hcGVudjpCb2R5Pg0KICAgICAgPHVybjptb2RpZmljYXJVc3VhcmlvPg0KICAgICAgICAgPGNvZF9hcHA+MjA8L2NvZF9hcHA+DQogICAgICAgICA8dXNlck9yZmVvPk1TTFdTT1JGRU88L3VzZXJPcmZlbz4NCiAgICAgICAgIDx1c3VhcmlvPiR7VXN1YXJpb308L3VzdWFyaW8+DQogICAgICAgICA8bm9tYnJlcz48L25vbWJyZXM+DQogICAgICAgICA8ZGVwZW5kZW5jaWE+PC9kZXBlbmRlbmNpYT4NCiAgICAgICAgIDxjb3JyZW8+PC9jb3JyZW8+DQogICAgICAgICA8ZXN0YWRvPjE8L2VzdGFkbz4NCiAgICAgICAgIDxuaXZlbD48L25pdmVsPg0KICAgICAgICAgPGxkYXBfbG9naW4+PC9sZGFwX2xvZ2luPg0KICAgICAgPC91cm46bW9kaWZpY2FyVXN1YXJpbz4NCiAgIDwvc29hcGVudjpCb2R5Pg0KPC9zb2FwZW52OkVudmVsb3BlPg=="/>
                                    <L7p:ContentType stringValue="application/soap+xml; charset=utf-8"/>
                                    <L7p:DataType variableDataType="message"/>
                                    <L7p:VariableToSet stringValue="requestBloqueo"/>
                                </L7p:SetVariable>
                                <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValue="REQUEST: ${requestBloqueo.mainpart}"/>
                                </L7p:AuditDetailAssertion>
                                <L7p:AddHeader>
                                    <L7p:HeaderName stringValue="Content-Type"/>
                                    <L7p:HeaderValue stringValue="text/xml:charset=UT-8"/>
                                    <L7p:OtherTargetMessageVariable stringValue="requestBloqueo"/>
                                    <L7p:RemoveExisting booleanValue="true"/>
                                    <L7p:Target target="OTHER"/>
                                </L7p:AddHeader>
                                <L7p:AddHeader>
                                    <L7p:HeaderName stringValue="SOAPAction"/>
                                    <L7p:HeaderValue stringValue="&quot;&quot;"/>
                                    <L7p:OtherTargetMessageVariable stringValue="requestBloqueo"/>
                                    <L7p:RemoveExisting booleanValue="true"/>
                                    <L7p:Target target="OTHER"/>
                                </L7p:AddHeader>
                                <L7p:HttpRoutingAssertion>
                                    <L7p:HttpMethod httpMethod="POST"/>
                                    <L7p:ProtectedServiceUrl stringValue="http://aporfeopro/orfeo/webServices/servidor.php"/>
                                    <L7p:ProxyPassword stringValueNull="null"/>
                                    <L7p:ProxyUsername stringValueNull="null"/>
                                    <L7p:RequestHeaderRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Cookie"/>
                                    </L7p:item>
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:CustomizeValue stringValue="&quot;&quot;"/>
                                    <L7p:Name stringValue="SOAPAction"/>
                                    <L7p:UsesCustomizedValue booleanValue="true"/>
                                    </L7p:item>
                                    </L7p:Rules>
                                    </L7p:RequestHeaderRules>
                                    <L7p:RequestMsgSrc stringValue="requestBloqueo"/>
                                    <L7p:RequestParamRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included"/>
                                    </L7p:RequestParamRules>
                                    <L7p:ResponseHeaderRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Set-Cookie"/>
                                    </L7p:item>
                                    </L7p:Rules>
                                    </L7p:ResponseHeaderRules>
                                    <L7p:ResponseMsgDest stringValue="responseBloqueo"/>
                                    <L7p:SamlAssertionVersion intValue="2"/>
                                </L7p:HttpRoutingAssertion>
                                <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValueReference="inline"><![CDATA[ROUTING   
LatencyBackend: ${httpRouting.latency}
Routing.URL: ${httpRouting.url}
Request.completed: ${request.completed}
Request.elapsedTime: ${requeste.elapsedTime}
RoutingTotalTime: ${request.routingTotalTime}
RoutingStatus: ${routingStatus}]]></L7p:Detail>
                                </L7p:AuditDetailAssertion>
                                <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValue="Reason Code: ${httpRouting.reasonCode}"/>
                                </L7p:AuditDetailAssertion>
                                <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValueReference="inline"><![CDATA[RESPUESTA Del desbloqueo: ${responseBloqueo.mainpart}
RESPUESTA Del desbloqueo: ${responseBloqueo}]]></L7p:Detail>
                                </L7p:AuditDetailAssertion>
                                <L7p:JsonTransformation>
                                    <L7p:DestinationMessageTarget MessageTarget="included">
                                    <L7p:OtherTargetMessageVariable stringValue="responseBloqueoJSON"/>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:TargetModifiedByGateway booleanValue="true"/>
                                    </L7p:DestinationMessageTarget>
                                    <L7p:OtherTargetMessageVariable stringValue="responseBloqueo"/>
                                    <L7p:PrettyPrint booleanValue="true"/>
                                    <L7p:RootTagString stringValue=""/>
                                    <L7p:Target target="OTHER"/>
                                </L7p:JsonTransformation>
                                <wsp:OneOrMore wsp:Usage="Required">
                                    <L7p:ComparisonAssertion>
                                    <L7p:CaseSensitive booleanValue="false"/>
                                    <L7p:Expression1 stringValue="${requestOriginal}"/>
                                    <L7p:Operator operatorNull="null"/>
                                    <L7p:Predicates predicates="included">
                                    <L7p:item dataType="included">
                                    <L7p:Type variableDataType="string"/>
                                    </L7p:item>
                                    <L7p:item binary="included">
                                    <L7p:Operator operator="CONTAINS"/>
                                    <L7p:RightValue stringValue="rol"/>
                                    </L7p:item>
                                    </L7p:Predicates>
                                    </L7p:ComparisonAssertion>
                                    <L7p:HardcodedResponse>
                                    <L7p:Base64ResponseBody stringValue="JHtyZXNwb25zZUJsb3F1ZW9KU09OLm1haW5wYXJ0fQ=="/>
                                    <L7p:EarlyResponse booleanValue="true"/>
                                    <L7p:ResponseContentType stringValue="text/json; charset=UTF-8"/>
                                    </L7p:HardcodedResponse>
                                </wsp:OneOrMore>
                                <L7p:assertionComment>
                                    <L7p:Properties mapValue="included">
                                    <L7p:entry>
                                    <L7p:key stringValue="RIGHT.COMMENT"/>
                                    <L7p:value stringValue="******* VIEW *********"/>
                                    </L7p:entry>
                                    </L7p:Properties>
                                </L7p:assertionComment>
                            </wsp:All>
                        </wsp:All>
                        <L7p:TrueAssertion/>
                    </wsp:OneOrMore>
                    <L7p:CommentAssertion>
                        <L7p:Comment stringValue="Modificaciones en el Usuario"/>
                    </L7p:CommentAssertion>
                    <wsp:All wsp:Usage="Required">
                        <L7p:ComparisonAssertion>
                            <L7p:CaseSensitive booleanValue="false"/>
                            <L7p:Expression1 stringValue="${requestOriginal}"/>
                            <L7p:Operator operatorNull="null"/>
                            <L7p:Predicates predicates="included">
                                <L7p:item dataType="included">
                                    <L7p:Type variableDataType="string"/>
                                </L7p:item>
                                <L7p:item binary="included">
                                    <L7p:Operator operator="CONTAINS"/>
                                    <L7p:RightValue stringValue="rol"/>
                                </L7p:item>
                            </L7p:Predicates>
                        </L7p:ComparisonAssertion>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValue="Entro a Modificacion USUARIO PATCH"/>
                        </L7p:AuditDetailAssertion>
                        <wsp:OneOrMore wsp:Usage="Required">
                            <wsp:All wsp:Usage="Required">
                                <L7p:ComparisonAssertion>
                                    <L7p:CaseSensitive booleanValue="false"/>
                                    <L7p:Expression1 stringValue="${request.mainpart}"/>
                                    <L7p:Operator operatorNull="null"/>
                                    <L7p:Predicates predicates="included">
                                    <L7p:item dataType="included">
                                    <L7p:Type variableDataType="string"/>
                                    </L7p:item>
                                    <L7p:item binary="included">
                                    <L7p:Operator operator="CONTAINS"/>
                                    <L7p:RightValue stringValue="delete"/>
                                    </L7p:item>
                                    </L7p:Predicates>
                                </L7p:ComparisonAssertion>
                                <L7p:EvaluateJsonPathExpressionV2>
                                    <L7p:Expression stringValue=".rol.[*].[?(@.operation=='delete')].value"/>
                                    <L7p:VariablePrefix stringValue="deleteRol"/>
                                </L7p:EvaluateJsonPathExpressionV2>
                                <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValueReference="inline"><![CDATA[deleteRol.found: ${deleteRol.found}
deleteRol.count: ${deleteRol.count}
deleteRol.result: ${deleteRol.result}
deleteRol.results: ${deleteRol.results}]]></L7p:Detail>
                                </L7p:AuditDetailAssertion>
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="PHNvYXBlbnY6RW52ZWxvcGUgeG1sbnM6c29hcGVudj0iaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9lbnZlbG9wZS8iIHhtbG5zOnVybj0idXJuOk9yZmVvIj4NCiAgIDxzb2FwZW52OkhlYWRlci8+DQogICA8c29hcGVudjpCb2R5Pg0KICAgICAgPHVybjpjb25zdWx0YXJQZXJmaWxlc1Npc3RlbWE+DQogICAgICAgICA8Y29kX2FwcD4yMDwvY29kX2FwcD4NCiAgICAgICAgIDx1c2VyT3JmZW8+TVNMV1NPUkZFTzwvdXNlck9yZmVvPg0KICAgICAgPC91cm46Y29uc3VsdGFyUGVyZmlsZXNTaXN0ZW1hPg0KICAgPC9zb2FwZW52OkJvZHk+DQo8L3NvYXBlbnY6RW52ZWxvcGU+"/>
                                    <L7p:ContentType stringValue="text/xml; charset=utf-8"/>
                                    <L7p:DataType variableDataType="message"/>
                                    <L7p:VariableToSet stringValue="requestPortalO"/>
                                </L7p:SetVariable>
                                <L7p:HttpRoutingAssertion>
                                    <L7p:HttpMethod httpMethod="POST"/>
                                    <L7p:ProtectedServiceUrl stringValue="http://aporfeopro/orfeo/webServices/servidor.php"/>
                                    <L7p:ProxyPassword stringValueNull="null"/>
                                    <L7p:ProxyUsername stringValueNull="null"/>
                                    <L7p:RequestHeaderRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Cookie"/>
                                    </L7p:item>
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="SOAPAction"/>
                                    </L7p:item>
                                    </L7p:Rules>
                                    </L7p:RequestHeaderRules>
                                    <L7p:RequestMsgSrc stringValue="requestPortalO"/>
                                    <L7p:RequestParamRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included"/>
                                    </L7p:RequestParamRules>
                                    <L7p:ResponseHeaderRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Set-Cookie"/>
                                    </L7p:item>
                                    </L7p:Rules>
                                    </L7p:ResponseHeaderRules>
                                    <L7p:ResponseMsgDest stringValue="responsePortalO"/>
                                    <L7p:SamlAssertionVersion intValue="2"/>
                                </L7p:HttpRoutingAssertion>
                                <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValueReference="inline"><![CDATA[ROUTING   
LatencyBackend: ${httpRouting.latency}
Routing.URL: ${httpRouting.url}
Request.completed: ${request.completed}
Request.elapsedTime: ${request.elapsedTime}
RoutingTotalTime: ${request.routingTotalTime}
RoutingStatus: ${routingStatus}]]></L7p:Detail>
                                </L7p:AuditDetailAssertion>
                                <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValue="Reason Code: ${httpRouting.reasonCode}"/>
                                </L7p:AuditDetailAssertion>
                                <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValueReference="inline"><![CDATA[RESPONSE------------
responsePortalO: ${responsePortalO}
responsePortalO: ${responsePortalO.mainpart}]]></L7p:Detail>
                                </L7p:AuditDetailAssertion>
                                <L7p:ResponseXpathAssertion>
                                    <L7p:VariablePrefix stringValue="responsePortalOJSON"/>
                                    <L7p:XmlMsgSrc stringValue="responsePortalO"/>
                                    <L7p:XpathExpression xpathExpressionValue="included">
                                    <L7p:Expression stringValue="/s:Envelope/s:Body/ns1:consultarPerfilesSistemaResponse/return"/>
                                    <L7p:Namespaces mapValue="included">
                                    <L7p:entry>
                                    <L7p:key stringValue="ns1"/>
                                    <L7p:value stringValue="urn:Orfeo"/>
                                    </L7p:entry>
                                    <L7p:entry>
                                    <L7p:key stringValue="s"/>
                                    <L7p:value stringValue="http://schemas.xmlsoap.org/soap/envelope/"/>
                                    </L7p:entry>
                                    </L7p:Namespaces>
                                    <L7p:XpathVersion xpathVersion="XPATH_1_0"/>
                                    </L7p:XpathExpression>
                                </L7p:ResponseXpathAssertion>
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="WyR7cmVzcG9uc2VQb3J0YWxPSlNPTi5yZXN1bHR9DQoJXQ=="/>
                                    <L7p:ContentType stringValue="application/json; charset=utf-8"/>
                                    <L7p:DataType variableDataType="message"/>
                                    <L7p:VariableToSet stringValue="responsePortalOJSONfin"/>
                                </L7p:SetVariable>
                                <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValue="responsePortalOJSON: ${responsePortalOJSONfin.mainpart}"/>
                                </L7p:AuditDetailAssertion>
                                <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".[?(@.NOMBRE_PERFIL=='${deleteRol.result}')].ID_PERFIL"/>
                                    <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSONfin"/>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:VariablePrefix stringValue="rolCodDelete"/>
                                </L7p:EvaluateJsonPathExpression>
                                <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValueReference="inline"><![CDATA[rolCodDelete.found: ${rolCodDelete.found}
rolCodDelete.count: ${rolCodDelete.count}
rolCodDelete.result: ${rolCodDelete.result}
rolCodDelete.results: ${rolCodDelete.results}]]></L7p:Detail>
                                </L7p:AuditDetailAssertion>
                                <wsp:All wsp:Usage="Required">
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="PHNvYXBlbnY6RW52ZWxvcGUgeG1sbnM6c29hcGVudj0iaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9lbnZlbG9wZS8iIHhtbG5zOnVybj0idXJuOk9yZmVvIj4NCiAgIDxzb2FwZW52OkhlYWRlci8+DQogICA8c29hcGVudjpCb2R5Pg0KICAgICAgPHVybjptb2RpZmljYWNpb25QZXJmaWxlc1VzdWFyaW8+DQogICAgICAgICA8Y29kX2FwcD4yMDwvY29kX2FwcD4NCiAgICAgICAgIDx1c2VyT3JmZW8+TVNMV1NPUkZFTzwvdXNlck9yZmVvPg0KICAgICAgICAgPHVzdWFyaW8+JHtVc3VhcmlvfTwvdXN1YXJpbz4NCiAgICAgICAgIDxwZXJmaWxlcz4ke3JvbENvZERlbGV0ZS5yZXN1bHR9OjI8L3BlcmZpbGVzPg0KICAgICAgPC91cm46bW9kaWZpY2FjaW9uUGVyZmlsZXNVc3VhcmlvPg0KICAgPC9zb2FwZW52OkJvZHk+DQo8L3NvYXBlbnY6RW52ZWxvcGU+"/>
                                    <L7p:ContentType stringValue="text/xml; charset=utf-8"/>
                                    <L7p:DataType variableDataType="message"/>
                                    <L7p:VariableToSet stringValue="requestPortalDelete"/>
                                    </L7p:SetVariable>
                                    <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValueReference="inline"><![CDATA[request modificacion delete:
${requestPortalDelete.mainpart}]]></L7p:Detail>
                                    </L7p:AuditDetailAssertion>
                                    <L7p:HttpRoutingAssertion>
                                    <L7p:HttpMethod httpMethod="POST"/>
                                    <L7p:ProtectedServiceUrl stringValue="http://aporfeopro/orfeo/webServices/servidor.php"/>
                                    <L7p:ProxyPassword stringValueNull="null"/>
                                    <L7p:ProxyUsername stringValueNull="null"/>
                                    <L7p:RequestHeaderRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Cookie"/>
                                    </L7p:item>
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="SOAPAction"/>
                                    </L7p:item>
                                    </L7p:Rules>
                                    </L7p:RequestHeaderRules>
                                    <L7p:RequestMsgSrc stringValue="requestPortalDelete"/>
                                    <L7p:RequestParamRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included"/>
                                    </L7p:RequestParamRules>
                                    <L7p:ResponseHeaderRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Set-Cookie"/>
                                    </L7p:item>
                                    </L7p:Rules>
                                    </L7p:ResponseHeaderRules>
                                    <L7p:ResponseMsgDest stringValue="responsePortalDelete"/>
                                    <L7p:SamlAssertionVersion intValue="2"/>
                                    </L7p:HttpRoutingAssertion>
                                    <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValueReference="inline"><![CDATA[ROUTING   
LatencyBackend: ${httpRouting.latency}
Routing.URL: ${httpRouting.url}
Request.completed: ${request.completed}
Request.elapsedTime: ${request.elapsedTime}
RoutingTotalTime: ${request.routingTotalTime}
RoutingStatus: ${routingStatus}]]></L7p:Detail>
                                    </L7p:AuditDetailAssertion>
                                    <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValue="Reason Code: ${httpRouting.reasonCode}"/>
                                    </L7p:AuditDetailAssertion>
                                    <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValueReference="inline"><![CDATA[RESPONSE------------
responsePortalO: ${responsePortalDelete}
responsePortalO: ${responsePortalDelete.mainpart}]]></L7p:Detail>
                                    </L7p:AuditDetailAssertion>
                                </wsp:All>
                                <L7p:assertionComment>
                                    <L7p:Properties mapValue="included">
                                    <L7p:entry>
                                    <L7p:key stringValue="RIGHT.COMMENT"/>
                                    <L7p:value stringValue="Elimnar un rol"/>
                                    </L7p:entry>
                                    </L7p:Properties>
                                </L7p:assertionComment>
                            </wsp:All>
                            <L7p:HardcodedResponse>
                                <L7p:AssertionComment assertionComment="included">
                                    <L7p:Properties mapValue="included">
                                    <L7p:entry>
                                    <L7p:key stringValue="RIGHT.COMMENT"/>
                                    <L7p:value stringValue="PruebasPostman"/>
                                    </L7p:entry>
                                    </L7p:Properties>
                                </L7p:AssertionComment>
                                <L7p:Base64ResponseBody stringValue="VVNVQVJJTyBBIE1PRElGSUNBUjogJHtVc3VhcmlvfQpDQU1QT1MgQSBNT0RJRklDQVI6ICR7Y2FtcG9zfQpSRVFVRVNUIERFIERBVE9TIEEgTU9ESUZJQ0FSOiAKJHtyZXF1ZXN0Lm1haW5wYXJ0fQoKUkVTUE9OU0UtLS1Db25zdWx0YS0tLS0tLS0tLQpyZXNwb25zZVBvcnRhbE86ICR7cmVzcG9uc2VQb3J0YWxPfQpyZXNwb25zZVBvcnRhbE86ICR7cmVzcG9uc2VQb3J0YWxPLm1haW5wYXJ0fQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KcmVxdWVzdCBkZWxldGUgcm9sICR7cmVxdWVzdFBvcnRhbERlbGV0ZS5tYWlucGFydH0KcmVzcG9uc2VQb3J0YWxEZWxldGVKU09OOiAke3Jlc3BvbnNlUG9ydGFsRGVsZXRlSlNPTi5tYWlucGFydH0="/>
                                <L7p:EarlyResponse booleanValue="true"/>
                                <L7p:Enabled booleanValue="false"/>
                                <L7p:ResponseContentType stringValue="text/json; charset=UTF-8"/>
                            </L7p:HardcodedResponse>
                            <wsp:All wsp:Usage="Required">
                                <L7p:ComparisonAssertion>
                                    <L7p:CaseSensitive booleanValue="false"/>
                                    <L7p:Enabled booleanValue="false"/>
                                    <L7p:Expression1 stringValue="${request.mainpart}"/>
                                    <L7p:Operator operatorNull="null"/>
                                    <L7p:Predicates predicates="included">
                                    <L7p:item dataType="included">
                                    <L7p:Type variableDataType="string"/>
                                    </L7p:item>
                                    <L7p:item binary="included">
                                    <L7p:Operator operator="CONTAINS"/>
                                    <L7p:RightValue stringValue="delete"/>
                                    </L7p:item>
                                    </L7p:Predicates>
                                </L7p:ComparisonAssertion>
                                <L7p:EvaluateJsonPathExpressionV2>
                                    <L7p:Expression stringValue=".rol.[*].[?(@.operation!='delete')].value"/>
                                    <L7p:VariablePrefix stringValue="addRol"/>
                                </L7p:EvaluateJsonPathExpressionV2>
                                <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValueReference="inline"><![CDATA[addRol.found: ${addRol.found}
addRol.count: ${addRol.count}
addRol.result: ${addRol.result}
addRol.results: ${addRol.results}]]></L7p:Detail>
                                </L7p:AuditDetailAssertion>
                                <wsp:All wsp:Usage="Required">
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="PHNvYXBlbnY6RW52ZWxvcGUgeG1sbnM6c29hcGVudj0iaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9lbnZlbG9wZS8iIHhtbG5zOnVybj0idXJuOk9yZmVvIj4NCiAgIDxzb2FwZW52OkhlYWRlci8+DQogICA8c29hcGVudjpCb2R5Pg0KICAgICAgPHVybjpjb25zdWx0YXJQZXJmaWxlc1Npc3RlbWE+DQogICAgICAgICA8Y29kX2FwcD4yMDwvY29kX2FwcD4NCiAgICAgICAgIDx1c2VyT3JmZW8+TVNMV1NPUkZFTzwvdXNlck9yZmVvPg0KICAgICAgPC91cm46Y29uc3VsdGFyUGVyZmlsZXNTaXN0ZW1hPg0KICAgPC9zb2FwZW52OkJvZHk+DQo8L3NvYXBlbnY6RW52ZWxvcGU+"/>
                                    <L7p:ContentType stringValue="text/xml; charset=utf-8"/>
                                    <L7p:DataType variableDataType="message"/>
                                    <L7p:VariableToSet stringValue="requestPortalO"/>
                                    </L7p:SetVariable>
                                    <L7p:HttpRoutingAssertion>
                                    <L7p:HttpMethod httpMethod="POST"/>
                                    <L7p:ProtectedServiceUrl stringValue="http://aporfeopro/orfeo/webServices/servidor.php"/>
                                    <L7p:ProxyPassword stringValueNull="null"/>
                                    <L7p:ProxyUsername stringValueNull="null"/>
                                    <L7p:RequestHeaderRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Cookie"/>
                                    </L7p:item>
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="SOAPAction"/>
                                    </L7p:item>
                                    </L7p:Rules>
                                    </L7p:RequestHeaderRules>
                                    <L7p:RequestMsgSrc stringValue="requestPortalO"/>
                                    <L7p:RequestParamRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included"/>
                                    </L7p:RequestParamRules>
                                    <L7p:ResponseHeaderRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Set-Cookie"/>
                                    </L7p:item>
                                    </L7p:Rules>
                                    </L7p:ResponseHeaderRules>
                                    <L7p:ResponseMsgDest stringValue="responsePortalO"/>
                                    <L7p:SamlAssertionVersion intValue="2"/>
                                    </L7p:HttpRoutingAssertion>
                                    <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValueReference="inline"><![CDATA[ROUTING   
LatencyBackend: ${httpRouting.latency}
Routing.URL: ${httpRouting.url}
Request.completed: ${request.completed}
Request.elapsedTime: ${request.elapsedTime}
RoutingTotalTime: ${request.routingTotalTime}
RoutingStatus: ${routingStatus}]]></L7p:Detail>
                                    </L7p:AuditDetailAssertion>
                                    <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValue="Reason Code: ${httpRouting.reasonCode}"/>
                                    </L7p:AuditDetailAssertion>
                                    <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValueReference="inline"><![CDATA[RESPONSE------------
responsePortalO: ${responsePortalO}
responsePortalO: ${responsePortalO.mainpart}]]></L7p:Detail>
                                    </L7p:AuditDetailAssertion>
                                    <L7p:ResponseXpathAssertion>
                                    <L7p:VariablePrefix stringValue="responsePortalOJSON"/>
                                    <L7p:XmlMsgSrc stringValue="responsePortalO"/>
                                    <L7p:XpathExpression xpathExpressionValue="included">
                                    <L7p:Expression stringValue="/s:Envelope/s:Body/ns1:consultarPerfilesSistemaResponse/return"/>
                                    <L7p:Namespaces mapValue="included">
                                    <L7p:entry>
                                    <L7p:key stringValue="ns1"/>
                                    <L7p:value stringValue="urn:Orfeo"/>
                                    </L7p:entry>
                                    <L7p:entry>
                                    <L7p:key stringValue="s"/>
                                    <L7p:value stringValue="http://schemas.xmlsoap.org/soap/envelope/"/>
                                    </L7p:entry>
                                    </L7p:Namespaces>
                                    <L7p:XpathVersion xpathVersion="XPATH_1_0"/>
                                    </L7p:XpathExpression>
                                    </L7p:ResponseXpathAssertion>
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="WyR7cmVzcG9uc2VQb3J0YWxPSlNPTi5yZXN1bHR9DQoJXQ=="/>
                                    <L7p:ContentType stringValue="application/json; charset=utf-8"/>
                                    <L7p:DataType variableDataType="message"/>
                                    <L7p:VariableToSet stringValue="responsePortalOJSONfin"/>
                                    </L7p:SetVariable>
                                    <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValue="responsePortalOJSON: ${responsePortalOJSONfin.mainpart}"/>
                                    </L7p:AuditDetailAssertion>
                                    <L7p:ForEachLoop
                                    L7p:Usage="Required"
                                    loopVariable="addRol.results" variablePrefix="xroles">
                                    <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValueReference="inline"><![CDATA[ROLES: {
"nombreRol":"${xroles.current}"
}]]></L7p:Detail>
                                    <L7p:Enabled booleanValue="false"/>
                                    </L7p:AuditDetailAssertion>
                                    <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".[?(@.NOMBRE_PERFIL=='${xroles.current}')].ID_PERFIL"/>

                                    <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSONfin"/>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:VariablePrefix stringValue="rolesALL"/>
                                    </L7p:EvaluateJsonPathExpression>
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHtyb2xlc0FMTC5yZXN1bHR9OjE="/>
                                    <L7p:VariableToSet stringValue="roles"/>
                                    </L7p:SetVariable>
                                    <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValue="${roles.mainpart}"/>
                                    <L7p:Enabled booleanValue="false"/>
                                    </L7p:AuditDetailAssertion>
                                    <L7p:ManipulateMultiValuedVariable>
                                    <L7p:SourceVariableName stringValue="roles"/>
                                    <L7p:TargetVariableName stringValue="roles_prueba"/>
                                    </L7p:ManipulateMultiValuedVariable>
                                    <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValue="VARIABLES MULTIVALOR: ${roles_prueba}"/>
                                    <L7p:Enabled booleanValue="false"/>
                                    </L7p:AuditDetailAssertion>
                                    </L7p:ForEachLoop>
                                    <L7p:assertionComment>
                                    <L7p:Properties mapValue="included">
                                    <L7p:entry>
                                    <L7p:key stringValue="RIGHT.COMMENT"/>
                                    <L7p:value stringValue="ListarRoles"/>
                                    </L7p:entry>
                                    </L7p:Properties>
                                    </L7p:assertionComment>
                                </wsp:All>
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHtyb2xlc19wcnVlYmF9"/>
                                    <L7p:VariableToSet stringValue="rolVolList"/>
                                </L7p:SetVariable>
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="PHNvYXBlbnY6RW52ZWxvcGUgeG1sbnM6c29hcGVudj0iaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9lbnZlbG9wZS8iIHhtbG5zOnVybj0idXJuOk9yZmVvIj4NCiAgIDxzb2FwZW52OkhlYWRlci8+DQogICA8c29hcGVudjpCb2R5Pg0KICAgICAgPHVybjptb2RpZmljYWNpb25QZXJmaWxlc1VzdWFyaW8+DQogICAgICAgICA8Y29kX2FwcD4yMDwvY29kX2FwcD4NCiAgICAgICAgIDx1c2VyT3JmZW8+TVNMV1NPUkZFTzwvdXNlck9yZmVvPg0KICAgICAgICAgPHVzdWFyaW8+JHtVc3VhcmlvfTwvdXN1YXJpbz4NCiAgICAgICAgIDxwZXJmaWxlcz4ke3JvbFZvbExpc3R9PC9wZXJmaWxlcz4NCiAgICAgIDwvdXJuOm1vZGlmaWNhY2lvblBlcmZpbGVzVXN1YXJpbz4NCiAgIDwvc29hcGVudjpCb2R5Pg0KPC9zb2FwZW52OkVudmVsb3BlPg=="/>
                                    <L7p:ContentType stringValue="text/xml; charset=utf-8"/>
                                    <L7p:DataType variableDataType="message"/>
                                    <L7p:VariableToSet stringValue="requestPortalAddR"/>
                                </L7p:SetVariable>
                                <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValueReference="inline"><![CDATA[request modificacion add:
${requestPortalAddR.mainpart}]]></L7p:Detail>
                                </L7p:AuditDetailAssertion>
                                <L7p:HardcodedResponse>
                                    <L7p:AssertionComment assertionComment="included">
                                    <L7p:Properties mapValue="included">
                                    <L7p:entry>
                                    <L7p:key stringValue="RIGHT.COMMENT"/>
                                    <L7p:value stringValue="PruebasPostman"/>
                                    </L7p:entry>
                                    </L7p:Properties>
                                    </L7p:AssertionComment>
                                    <L7p:Base64ResponseBody stringValue="JHtyZXF1ZXN0UG9ydGFsQWRkUi5tYWlucGFydH0KLS0tLS0tLS0tLS0tLS0Kewoic2NoZW1hcyI6ClsidXJuOnNjaW06c2NoZW1hczpjb3JlOjIuMCJdLAoiUmVzb3VyY2VzIjpbIAoKJHtyb2xlc19wcnVlYmF9CgpdfQoKLS0tCgpVU1VBUklPIEEgTU9ESUZJQ0FSOiAke1VzdWFyaW99CkNBTVBPUyBBIE1PRElGSUNBUjogJHtjYW1wb3N9ClJFUVVFU1QgREUgREFUT1MgQSBNT0RJRklDQVI6IAoke3JlcXVlc3QubWFpbnBhcnR9CgpSRVNQT05TRS0tLUNvbnN1bHRhLS0tLS0tLS0tCnJlc3BvbnNlUG9ydGFsTzogJHtyZXNwb25zZVBvcnRhbE99CnJlc3BvbnNlUG9ydGFsTzogJHtyZXNwb25zZVBvcnRhbE8ubWFpbnBhcnR9Ci0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpyZXF1ZXN0IGRlbGV0ZSByb2wgJHtyZXF1ZXN0UG9ydGFsRGVsZXRlLm1haW5wYXJ0fQpyZXNwb25zZVBvcnRhbERlbGV0ZUpTT046ICR7cmVzcG9uc2VQb3J0YWxEZWxldGVKU09OLm1haW5wYXJ0fQ=="/>
                                    <L7p:EarlyResponse booleanValue="true"/>
                                    <L7p:Enabled booleanValue="false"/>
                                    <L7p:ResponseContentType stringValue="text/json; charset=UTF-8"/>
                                </L7p:HardcodedResponse>
                                <L7p:AddHeader>
                                    <L7p:HeaderName stringValue="Content-Type"/>
                                    <L7p:HeaderValue stringValue="text/xml:charset=UT-8"/>
                                    <L7p:OtherTargetMessageVariable stringValue="requestPortalAddR"/>
                                    <L7p:RemoveExisting booleanValue="true"/>
                                    <L7p:Target target="OTHER"/>
                                </L7p:AddHeader>
                                <L7p:AddHeader>
                                    <L7p:HeaderName stringValue="SOAPAction"/>
                                    <L7p:HeaderValue stringValue="&quot;&quot;"/>
                                    <L7p:OtherTargetMessageVariable stringValue="requestPortalAddR"/>
                                    <L7p:RemoveExisting booleanValue="true"/>
                                    <L7p:Target target="OTHER"/>
                                </L7p:AddHeader>
                                <L7p:HttpRoutingAssertion>
                                    <L7p:HttpMethod httpMethod="POST"/>
                                    <L7p:ProtectedServiceUrl stringValue="http://aporfeopro/orfeo/webServices/servidor.php"/>
                                    <L7p:ProxyPassword stringValueNull="null"/>
                                    <L7p:ProxyUsername stringValueNull="null"/>
                                    <L7p:RequestHeaderRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Cookie"/>
                                    </L7p:item>
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="SOAPAction"/>
                                    </L7p:item>
                                    </L7p:Rules>
                                    </L7p:RequestHeaderRules>
                                    <L7p:RequestMsgSrc stringValue="requestPortalAddR"/>
                                    <L7p:RequestParamRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included"/>
                                    </L7p:RequestParamRules>
                                    <L7p:ResponseHeaderRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Set-Cookie"/>
                                    </L7p:item>
                                    </L7p:Rules>
                                    </L7p:ResponseHeaderRules>
                                    <L7p:ResponseMsgDest stringValue="responsePortalAddR"/>
                                    <L7p:SamlAssertionVersion intValue="2"/>
                                </L7p:HttpRoutingAssertion>
                                <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValueReference="inline"><![CDATA[ROUTING   
LatencyBackend: ${httpRouting.latency}
Routing.URL: ${httpRouting.url}
Request.completed: ${request.completed}
Request.elapsedTime: ${request.elapsedTime}
RoutingTotalTime: ${request.routingTotalTime}
RoutingStatus: ${routingStatus}]]></L7p:Detail>
                                </L7p:AuditDetailAssertion>
                                <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValue="Reason Code: ${httpRouting.reasonCode}"/>
                                </L7p:AuditDetailAssertion>
                                <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValueReference="inline"><![CDATA[RESPONSE------------
responsePortalAddR: ${responsePortalAddR}
responsePortalAddR.mainpart: ${responsePortalAddR.mainpart}]]></L7p:Detail>
                                </L7p:AuditDetailAssertion>
                                <L7p:JsonTransformation>
                                    <L7p:DestinationMessageTarget MessageTarget="included">
                                    <L7p:OtherTargetMessageVariable stringValue="responsePortalAddRJSON"/>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:TargetModifiedByGateway booleanValue="true"/>
                                    </L7p:DestinationMessageTarget>
                                    <L7p:OtherTargetMessageVariable stringValue="responsePortalAddR"/>
                                    <L7p:PrettyPrint booleanValue="true"/>
                                    <L7p:RootTagString stringValue=""/>
                                    <L7p:Target target="OTHER"/>
                                </L7p:JsonTransformation>
                                <L7p:AuditDetailAssertion>
                                    <L7p:Detail stringValue="responsePortalAddRJSON: ${responsePortalAddRJSON.mainpart}"/>
                                </L7p:AuditDetailAssertion>
                                <L7p:assertionComment>
                                    <L7p:Properties mapValue="included">
                                    <L7p:entry>
                                    <L7p:key stringValue="RIGHT.COMMENT"/>
                                    <L7p:value stringValue="Agregar roles"/>
                                    </L7p:entry>
                                    </L7p:Properties>
                                </L7p:assertionComment>
                            </wsp:All>
                        </wsp:OneOrMore>
                        <L7p:HardcodedResponse>
                            <L7p:Base64ResponseBody stringValue="cmVzcG9uc2VQb3J0YWxBZGRSSlNPTjogJHtyZXNwb25zZVBvcnRhbEFkZFJKU09OLm1haW5wYXJ0fQ=="/>
                            <L7p:ResponseContentType stringValue="text/json; charset=UTF-8"/>
                        </L7p:HardcodedResponse>
                        <L7p:TrueAssertion/>
                    </wsp:All>
                    <L7p:assertionComment>
                        <L7p:Properties mapValue="included">
                            <L7p:entry>
                                <L7p:key stringValue="RIGHT.COMMENT"/>
                                <L7p:value stringValue="******* MODIFY *********"/>
                            </L7p:entry>
                        </L7p:Properties>
                    </L7p:assertionComment>
                </wsp:All>
                <L7p:CommentAssertion>
                    <L7p:Comment stringValue="ELIMINACION"/>
                    <L7p:Enabled booleanValue="false"/>
                </L7p:CommentAssertion>
                <wsp:All L7p:Enabled="false" wsp:Usage="Required">
                    <L7p:ComparisonAssertion>
                        <L7p:CaseSensitive booleanValue="false"/>
                        <L7p:Expression1 stringValue="${request.http.method}"/>
                        <L7p:Operator operatorNull="null"/>
                        <L7p:Predicates predicates="included">
                            <L7p:item dataType="included">
                                <L7p:Type variableDataType="string"/>
                            </L7p:item>
                            <L7p:item binary="included">
                                <L7p:RightValue stringValue="DELETE"/>
                            </L7p:item>
                        </L7p:Predicates>
                    </L7p:ComparisonAssertion>
                    <L7p:Regex>
                        <L7p:AutoTarget booleanValue="false"/>
                        <L7p:CaptureVar stringValue="user"/>
                        <L7p:IncludeEntireExpressionCapture booleanValue="false"/>
                        <L7p:OtherTargetMessageVariable stringValue="request.http.uri"/>
                        <L7p:Regex stringValue="/orfeo/Users/(.+)"/>
                        <L7p:RegexName stringValue="Usuario a Deshabilitar"/>
                        <L7p:Replacement stringValue=""/>
                        <L7p:Target target="OTHER"/>
                    </L7p:Regex>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValue="USUARIO A DESHABILITAR: ${user}"/>
                    </L7p:AuditDetailAssertion>
                    <wsp:All wsp:Usage="Required">
                        <L7p:SetVariable>
                            <L7p:Base64Expression stringValue="PHNvYXBlbnY6RW52ZWxvcGUgeG1sbnM6c29hcGVudj0iaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9lbnZlbG9wZS8iIHhtbG5zOnVybj0idXJuOk9yZmVvIj4NCiAgIDxzb2FwZW52OkhlYWRlci8+DQogICA8c29hcGVudjpCb2R5Pg0KICAgICAgPHVybjpjb25zdWx0YXJVc3VhcmlvPg0KICAgICAgICAgPGNvZF9hcHA+MjA8L2NvZF9hcHA+DQogICAgICAgICA8dXNlck9yZmVvPk1TTFdTT1JGRU88L3VzZXJPcmZlbz4NCiAgICAgICAgIDx1c3VhcmlvPiR7dXNlcn08L3VzdWFyaW8+DQogICAgICA8L3Vybjpjb25zdWx0YXJVc3VhcmlvPg0KICAgPC9zb2FwZW52OkJvZHk+DQo8L3NvYXBlbnY6RW52ZWxvcGU+"/>
                            <L7p:ContentType stringValue="text/xml; charset=utf-8"/>
                            <L7p:DataType variableDataType="message"/>
                            <L7p:VariableToSet stringValue="requestPortalO"/>
                        </L7p:SetVariable>
                        <L7p:AddHeader>
                            <L7p:HeaderName stringValue="Content-Type"/>
                            <L7p:HeaderValue stringValue="text/xml:charset=UT-8"/>
                            <L7p:OtherTargetMessageVariable stringValue="requestPortalO"/>
                            <L7p:RemoveExisting booleanValue="true"/>
                            <L7p:Target target="OTHER"/>
                        </L7p:AddHeader>
                        <L7p:AddHeader>
                            <L7p:HeaderName stringValue="SOAPAction"/>
                            <L7p:HeaderValue stringValue="&quot;&quot;"/>
                            <L7p:OtherTargetMessageVariable stringValue="requestPortalO"/>
                            <L7p:RemoveExisting booleanValue="true"/>
                            <L7p:Target target="OTHER"/>
                        </L7p:AddHeader>
                        <L7p:HttpRoutingAssertion>
                            <L7p:HttpMethod httpMethod="POST"/>
                            <L7p:ProtectedServiceUrl stringValue="http://aporfeopro/orfeo/webServices/servidor.php"/>
                            <L7p:ProxyPassword stringValueNull="null"/>
                            <L7p:ProxyUsername stringValueNull="null"/>
                            <L7p:RequestHeaderRules httpPassthroughRuleSet="included">
                                <L7p:ForwardAll booleanValue="true"/>
                                <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Cookie"/>
                                    </L7p:item>
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="SOAPAction"/>
                                    </L7p:item>
                                </L7p:Rules>
                            </L7p:RequestHeaderRules>
                            <L7p:RequestMsgSrc stringValue="requestPortalO"/>
                            <L7p:RequestParamRules httpPassthroughRuleSet="included">
                                <L7p:ForwardAll booleanValue="true"/>
                                <L7p:Rules httpPassthroughRules="included"/>
                            </L7p:RequestParamRules>
                            <L7p:ResponseHeaderRules httpPassthroughRuleSet="included">
                                <L7p:ForwardAll booleanValue="true"/>
                                <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Set-Cookie"/>
                                    </L7p:item>
                                </L7p:Rules>
                            </L7p:ResponseHeaderRules>
                            <L7p:ResponseMsgDest stringValue="responsePortalO"/>
                            <L7p:SamlAssertionVersion intValue="2"/>
                        </L7p:HttpRoutingAssertion>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValueReference="inline"><![CDATA[ROUTING   
LatencyBackend: ${httpRouting.latency}
Routing.URL: ${httpRouting.url}
Request.completed: ${request.completed}
Request.elapsedTime: ${request.elapsedTime}
RoutingTotalTime: ${request.routingTotalTime}
RoutingStatus: ${routingStatus}]]></L7p:Detail>
                        </L7p:AuditDetailAssertion>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValue="Reason Code: ${httpRouting.reasonCode}"/>
                        </L7p:AuditDetailAssertion>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValueReference="inline"><![CDATA[RESPONSE------------
responsePortalO: ${responsePortalO}
responsePortalO: ${responsePortalO.mainpart}]]></L7p:Detail>
                        </L7p:AuditDetailAssertion>
                        <L7p:ResponseXpathAssertion>
                            <L7p:VariablePrefix stringValue="responsePortalOJSON"/>
                            <L7p:XmlMsgSrc stringValue="responsePortalO"/>
                            <L7p:XpathExpression xpathExpressionValue="included">
                                <L7p:Expression stringValue="/SOAP-ENV:Envelope/SOAP-ENV:Body/ns1:consultarUsuarioResponse/return"/>
                                <L7p:Namespaces mapValue="included">
                                    <L7p:entry>
                                    <L7p:key stringValue="s"/>
                                    <L7p:value stringValue="http://schemas.xmlsoap.org/soap/envelope/"/>
                                    </L7p:entry>
                                    <L7p:entry>
                                    <L7p:key stringValue="xsd"/>
                                    <L7p:value stringValue="http://www.w3.org/2001/XMLSchema"/>
                                    </L7p:entry>
                                    <L7p:entry>
                                    <L7p:key stringValue="ns1"/>
                                    <L7p:value stringValue="urn:Orfeo"/>
                                    </L7p:entry>
                                    <L7p:entry>
                                    <L7p:key stringValue="SOAP-ENC"/>
                                    <L7p:value stringValue="http://schemas.xmlsoap.org/soap/encoding/"/>
                                    </L7p:entry>
                                    <L7p:entry>
                                    <L7p:key stringValue="SOAP-ENV"/>
                                    <L7p:value stringValue="http://schemas.xmlsoap.org/soap/envelope/"/>
                                    </L7p:entry>
                                    <L7p:entry>
                                    <L7p:key stringValue="xsi"/>
                                    <L7p:value stringValue="http://www.w3.org/2001/XMLSchema-instance"/>
                                    </L7p:entry>
                                </L7p:Namespaces>
                                <L7p:XpathVersion xpathVersion="XPATH_1_0"/>
                            </L7p:XpathExpression>
                        </L7p:ResponseXpathAssertion>
                        <L7p:SetVariable>
                            <L7p:Base64Expression stringValue="WyR7cmVzcG9uc2VQb3J0YWxPSlNPTi5yZXN1bHR9DQoJXQ=="/>
                            <L7p:ContentType stringValue="application/json; charset=utf-8"/>
                            <L7p:DataType variableDataType="message"/>
                            <L7p:VariableToSet stringValue="responsePortalOJSONfin"/>
                        </L7p:SetVariable>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValue="responsePortalOJSONfin: ${responsePortalOJSONfin.mainpart}"/>
                        </L7p:AuditDetailAssertion>
                        <L7p:EvaluateJsonPathExpression>
                            <L7p:Expression stringValue=".usuario"/>
                            <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSONfin"/>
                            <L7p:Target target="OTHER"/>
                            <L7p:VariablePrefix stringValue="usuarios"/>
                        </L7p:EvaluateJsonPathExpression>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValueReference="inline"><![CDATA[usuarios.found: ${usuarios.found}
usuarios.count: ${usuarios.count}
usuarios.result: ${usuarios.result}
usuarios.results: ${usuarios.results}]]></L7p:Detail>
                        </L7p:AuditDetailAssertion>
                        <L7p:EvaluateJsonPathExpression>
                            <L7p:Expression stringValue=".perfiles"/>
                            <L7p:OtherTargetMessageVariable stringValue="responsePortalOJSONfin"/>
                            <L7p:Target target="OTHER"/>
                            <L7p:VariablePrefix stringValue="roles"/>
                        </L7p:EvaluateJsonPathExpression>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValueReference="inline"><![CDATA[roles.found: ${roles.found}
roles.count: ${roles.count}
roles.result: ${roles.result}
roles.results: ${roles.results}]]></L7p:Detail>
                        </L7p:AuditDetailAssertion>
                        <wsp:All wsp:Usage="Required">
                            <L7p:Split>
                                <L7p:InputVariable stringValue="roles.result"/>
                                <L7p:OutputVariable stringValue="rold"/>
                            </L7p:Split>
                            <L7p:ForEachLoop L7p:Usage="Required"
                                loopVariable="rold" variablePrefix="roln">
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHtyb2xuLmN1cnJlbnR9"/>
                                    <L7p:VariableToSet stringValue="rolesfin0"/>
                                </L7p:SetVariable>
                                <L7p:Split>
                                    <L7p:InputVariable stringValue="rolesfin0"/>
                                    <L7p:OutputVariable stringValue="rolfinal0"/>
                                    <L7p:SplitPattern stringValue=":"/>
                                </L7p:Split>
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHtyb2xmaW5hbDBbMF19OjI="/>
                                    <L7p:VariableToSet stringValue="roles"/>
                                </L7p:SetVariable>
                                <L7p:ManipulateMultiValuedVariable>
                                    <L7p:SourceVariableName stringValue="roles"/>
                                    <L7p:TargetVariableName stringValue="roles_prueba"/>
                                </L7p:ManipulateMultiValuedVariable>
                            </L7p:ForEachLoop>
                            <L7p:SetVariable>
                                <L7p:Base64Expression stringValue="JHtyb2xlc19wcnVlYmF9"/>
                                <L7p:VariableToSet stringValue="roleDel"/>
                            </L7p:SetVariable>
                        </wsp:All>
                        <L7p:assertionComment>
                            <L7p:Properties mapValue="included">
                                <L7p:entry>
                                    <L7p:key stringValue="RIGHT.COMMENT"/>
                                    <L7p:value stringValue="Consultar Usuario"/>
                                </L7p:entry>
                            </L7p:Properties>
                        </L7p:assertionComment>
                    </wsp:All>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[responsePortalOJSONfin: ${responsePortalOJSONfin.mainpart}
Roles a borrar: ${roleDel}]]></L7p:Detail>
                    </L7p:AuditDetailAssertion>
                    <wsp:All wsp:Usage="Required">
                        <L7p:SetVariable>
                            <L7p:Base64Expression stringValue="PHNvYXBlbnY6RW52ZWxvcGUgeG1sbnM6c29hcGVudj0iaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9lbnZlbG9wZS8iIHhtbG5zOnVybj0idXJuOk9yZmVvIj4NCiAgIDxzb2FwZW52OkhlYWRlci8+DQogICA8c29hcGVudjpCb2R5Pg0KICAgICAgPHVybjptb2RpZmljYWNpb25QZXJmaWxlc1VzdWFyaW8+DQogICAgICAgICA8Y29kX2FwcD4yMDwvY29kX2FwcD4NCiAgICAgICAgIDx1c2VyT3JmZW8+TVNMV1NPUkZFTzwvdXNlck9yZmVvPg0KICAgICAgICAgPHVzdWFyaW8+JHt1c2VyfTwvdXN1YXJpbz4NCiAgICAgICAgIDxwZXJmaWxlcz4ke3JvbGVEZWx9PC9wZXJmaWxlcz4NCiAgICAgIDwvdXJuOm1vZGlmaWNhY2lvblBlcmZpbGVzVXN1YXJpbz4NCiAgIDwvc29hcGVudjpCb2R5Pg0KPC9zb2FwZW52OkVudmVsb3BlPg=="/>
                            <L7p:ContentType stringValue="text/xml; charset=utf-8"/>
                            <L7p:DataType variableDataType="message"/>
                            <L7p:VariableToSet stringValue="requestPortalDelete"/>
                        </L7p:SetVariable>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValueReference="inline"><![CDATA[request modificacion delete:
${requestPortalDelete.mainpart}]]></L7p:Detail>
                        </L7p:AuditDetailAssertion>
                        <L7p:HttpRoutingAssertion>
                            <L7p:HttpMethod httpMethod="POST"/>
                            <L7p:ProtectedServiceUrl stringValue="http://aporfeopro/orfeo/webServices/servidor.php"/>
                            <L7p:ProxyPassword stringValueNull="null"/>
                            <L7p:ProxyUsername stringValueNull="null"/>
                            <L7p:RequestHeaderRules httpPassthroughRuleSet="included">
                                <L7p:ForwardAll booleanValue="true"/>
                                <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Cookie"/>
                                    </L7p:item>
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="SOAPAction"/>
                                    </L7p:item>
                                </L7p:Rules>
                            </L7p:RequestHeaderRules>
                            <L7p:RequestMsgSrc stringValue="requestPortalDelete"/>
                            <L7p:RequestParamRules httpPassthroughRuleSet="included">
                                <L7p:ForwardAll booleanValue="true"/>
                                <L7p:Rules httpPassthroughRules="included"/>
                            </L7p:RequestParamRules>
                            <L7p:ResponseHeaderRules httpPassthroughRuleSet="included">
                                <L7p:ForwardAll booleanValue="true"/>
                                <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Set-Cookie"/>
                                    </L7p:item>
                                </L7p:Rules>
                            </L7p:ResponseHeaderRules>
                            <L7p:ResponseMsgDest stringValue="responsePortalDelete"/>
                            <L7p:SamlAssertionVersion intValue="2"/>
                        </L7p:HttpRoutingAssertion>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValueReference="inline"><![CDATA[ROUTING   
LatencyBackend: ${httpRouting.latency}
Routing.URL: ${httpRouting.url}
Request.completed: ${request.completed}
Request.elapsedTime: ${request.elapsedTime}
RoutingTotalTime: ${request.routingTotalTime}
RoutingStatus: ${routingStatus}]]></L7p:Detail>
                        </L7p:AuditDetailAssertion>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValue="Reason Code: ${httpRouting.reasonCode}"/>
                        </L7p:AuditDetailAssertion>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValueReference="inline"><![CDATA[RESPONSE------------
responsePortalO: ${responsePortalDelete}
responsePortalO: ${responsePortalDelete.mainpart}]]></L7p:Detail>
                        </L7p:AuditDetailAssertion>
                        <L7p:assertionComment>
                            <L7p:Properties mapValue="included">
                                <L7p:entry>
                                    <L7p:key stringValue="RIGHT.COMMENT"/>
                                    <L7p:value stringValue="Modificacion de roles"/>
                                </L7p:entry>
                            </L7p:Properties>
                        </L7p:assertionComment>
                    </wsp:All>
                    <wsp:All wsp:Usage="Required">
                        <L7p:SetVariable>
                            <L7p:Base64Expression stringValue="PHNvYXBlbnY6RW52ZWxvcGUgeG1sbnM6c29hcGVudj0iaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9lbnZlbG9wZS8iIHhtbG5zOnVybj0idXJuOk9yZmVvIj4NCiAgIDxzb2FwZW52OkhlYWRlci8+DQogICA8c29hcGVudjpCb2R5Pg0KICAgICAgPHVybjptb2RpZmljYXJVc3VhcmlvPg0KICAgICAgICAgPGNvZF9hcHA+MjA8L2NvZF9hcHA+DQogICAgICAgICA8dXNlck9yZmVvPk1TTFdTT1JGRU88L3VzZXJPcmZlbz4NCiAgICAgICAgIDx1c3VhcmlvPiR7dXNlcn08L3VzdWFyaW8+DQogICAgICAgICA8bm9tYnJlcz48L25vbWJyZXM+DQogICAgICAgICA8ZGVwZW5kZW5jaWE+PC9kZXBlbmRlbmNpYT4NCiAgICAgICAgIDxjb3JyZW8+PC9jb3JyZW8+DQogICAgICAgICA8ZXN0YWRvPjA8L2VzdGFkbz4NCiAgICAgICAgIDxuaXZlbD48L25pdmVsPg0KICAgICAgICAgPGxkYXBfbG9naW4+PC9sZGFwX2xvZ2luPg0KICAgICAgPC91cm46bW9kaWZpY2FyVXN1YXJpbz4NCiAgIDwvc29hcGVudjpCb2R5Pg0KPC9zb2FwZW52OkVudmVsb3BlPg=="/>
                            <L7p:ContentType stringValue="text/xml; charset=utf-8"/>
                            <L7p:DataType variableDataType="message"/>
                            <L7p:VariableToSet stringValue="requestPortalAddR"/>
                        </L7p:SetVariable>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValueReference="inline"><![CDATA[request modificacion add:
${requestPortalAddR.mainpart}]]></L7p:Detail>
                        </L7p:AuditDetailAssertion>
                        <L7p:AddHeader>
                            <L7p:HeaderName stringValue="Content-Type"/>
                            <L7p:HeaderValue stringValue="text/xml:charset=UT-8"/>
                            <L7p:OtherTargetMessageVariable stringValue="requestPortalAddR"/>
                            <L7p:RemoveExisting booleanValue="true"/>
                            <L7p:Target target="OTHER"/>
                        </L7p:AddHeader>
                        <L7p:AddHeader>
                            <L7p:HeaderName stringValue="SOAPAction"/>
                            <L7p:HeaderValue stringValue="&quot;&quot;"/>
                            <L7p:OtherTargetMessageVariable stringValue="requestPortalAddR"/>
                            <L7p:RemoveExisting booleanValue="true"/>
                            <L7p:Target target="OTHER"/>
                        </L7p:AddHeader>
                        <L7p:HttpRoutingAssertion>
                            <L7p:HttpMethod httpMethod="POST"/>
                            <L7p:ProtectedServiceUrl stringValue="http://aporfeopro/orfeo/webServices/servidor.php"/>
                            <L7p:ProxyPassword stringValueNull="null"/>
                            <L7p:ProxyUsername stringValueNull="null"/>
                            <L7p:RequestHeaderRules httpPassthroughRuleSet="included">
                                <L7p:ForwardAll booleanValue="true"/>
                                <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Cookie"/>
                                    </L7p:item>
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="SOAPAction"/>
                                    </L7p:item>
                                </L7p:Rules>
                            </L7p:RequestHeaderRules>
                            <L7p:RequestMsgSrc stringValue="requestPortalAddR"/>
                            <L7p:RequestParamRules httpPassthroughRuleSet="included">
                                <L7p:ForwardAll booleanValue="true"/>
                                <L7p:Rules httpPassthroughRules="included"/>
                            </L7p:RequestParamRules>
                            <L7p:ResponseHeaderRules httpPassthroughRuleSet="included">
                                <L7p:ForwardAll booleanValue="true"/>
                                <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Set-Cookie"/>
                                    </L7p:item>
                                </L7p:Rules>
                            </L7p:ResponseHeaderRules>
                            <L7p:ResponseMsgDest stringValue="responsePortalAddR"/>
                            <L7p:SamlAssertionVersion intValue="2"/>
                        </L7p:HttpRoutingAssertion>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValueReference="inline"><![CDATA[ROUTING   
LatencyBackend: ${httpRouting.latency}
Routing.URL: ${httpRouting.url}
Request.completed: ${request.completed}
Request.elapsedTime: ${request.elapsedTime}
RoutingTotalTime: ${request.routingTotalTime}
RoutingStatus: ${routingStatus}]]></L7p:Detail>
                        </L7p:AuditDetailAssertion>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValue="Reason Code: ${httpRouting.reasonCode}"/>
                        </L7p:AuditDetailAssertion>
                        <L7p:AuditDetailAssertion>
                            <L7p:Detail stringValueReference="inline"><![CDATA[RESPONSE------------
responsePortalAddR: ${responsePortalAddR}
responsePortalAddR.mainpart: ${responsePortalAddR.mainpart}]]></L7p:Detail>
                        </L7p:AuditDetailAssertion>
                        <L7p:assertionComment>
                            <L7p:Properties mapValue="included">
                                <L7p:entry>
                                    <L7p:key stringValue="RIGHT.COMMENT"/>
                                    <L7p:value stringValue="inactivar usuario"/>
                                </L7p:entry>
                            </L7p:Properties>
                        </L7p:assertionComment>
                    </wsp:All>
                    <L7p:HardcodedResponse>
                        <L7p:Base64ResponseBody stringValue="cmVzcG9uc2VQb3J0YWxPSlNPTmZpbjogJHtyZXNwb25zZVBvcnRhbE9KU09OZmluLm1haW5wYXJ0fQotLS0tLQpSb2xlcyBhIGJvcnJhcjogJHtyb2xlRGVsfQotLS0tLS0tLS0tCnJlcXVlc3QgbW9kaWZpY2FjaW9uIGRlbGV0ZToKJHtyZXF1ZXN0UG9ydGFsRGVsZXRlLm1haW5wYXJ0fQotLS0tCnJlc3BvbnNlUG9ydGFsTzogJHtyZXNwb25zZVBvcnRhbERlbGV0ZS5tYWlucGFydH0KCi0tLS0tCkluYWNpdHZhY2nDs24KCnJlc3BvbnNlUG9ydGFsQWRkUi5tYWlucGFydDogJHtyZXNwb25zZVBvcnRhbEFkZFIubWFpbnBhcnR9"/>
                        <L7p:EarlyResponse booleanValue="true"/>
                        <L7p:ResponseContentType stringValue="text/json; charset=UTF-8"/>
                    </L7p:HardcodedResponse>
                    <L7p:assertionComment>
                        <L7p:Properties mapValue="included">
                            <L7p:entry>
                                <L7p:key stringValue="RIGHT.COMMENT"/>
                                <L7p:value stringValue="******* DELETE *********"/>
                            </L7p:entry>
                        </L7p:Properties>
                    </L7p:assertionComment>
                </wsp:All>
                <wsp:All wsp:Usage="Required">
                    <L7p:EvaluateJsonPathExpressionV2>
                        <L7p:Expression stringValue="$.FlowName"/>
                        <L7p:VariablePrefix stringValue="flowName"/>
                    </L7p:EvaluateJsonPathExpressionV2>
                    <L7p:EvaluateJsonPathExpressionV2>
                        <L7p:Expression stringValue="$.StepName"/>
                        <L7p:VariablePrefix stringValue="stepName"/>
                    </L7p:EvaluateJsonPathExpressionV2>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[flowName: ${flowName.result}
stepName: ${stepName.result}]]></L7p:Detail>
                        <L7p:Level stringValue="WARNING"/>
                    </L7p:AuditDetailAssertion>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="JHtmbG93TmFtZS5yZXN1bHR9"/>
                        <L7p:VariableToSet stringValue="FlowName"/>
                    </L7p:SetVariable>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="JHtzdGVwTmFtZS5yZXN1bHR9"/>
                        <L7p:VariableToSet stringValue="StepName"/>
                    </L7p:SetVariable>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="d2VsY29tZV9mbG93"/>
                        <L7p:Enabled booleanValue="false"/>
                        <L7p:VariableToSet stringValue="FlowName"/>
                    </L7p:SetVariable>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="Y293X2Zsb3c="/>
                        <L7p:Enabled booleanValue="false"/>
                        <L7p:VariableToSet stringValue="StepName"/>
                    </L7p:SetVariable>
                    <L7p:AuditDetailAssertion>
                        <L7p:Detail stringValueReference="inline"><![CDATA[flowName: ${FlowName}
stepName: ${StepName}]]></L7p:Detail>
                        <L7p:Level stringValue="WARNING"/>
                    </L7p:AuditDetailAssertion>
                    <wsp:OneOrMore wsp:Usage="Required">
                        <wsp:All wsp:Usage="Required">
                            <L7p:ComparisonAssertion>
                                <L7p:CaseSensitive booleanValue="false"/>
                                <L7p:Expression1 stringValue="${StepName}"/>
                                <L7p:Operator operatorNull="null"/>
                                <L7p:Predicates predicates="included">
                                    <L7p:item dataType="included">
                                    <L7p:Type variableDataType="string"/>
                                    </L7p:item>
                                    <L7p:item binary="included">
                                    <L7p:Negated booleanValue="true"/>
                                    <L7p:Operator operator="CONTAINS"/>
                                    <L7p:RightValue stringValue="answer_flow"/>
                                    </L7p:item>
                                </L7p:Predicates>
                            </L7p:ComparisonAssertion>
                            <L7p:AuditDetailAssertion>
                                <L7p:Detail stringValue="comp1 ok"/>
                                <L7p:Level stringValue="WARNING"/>
                            </L7p:AuditDetailAssertion>
                            <L7p:JdbcQuery>
                                <L7p:ConnectionName stringValue="BDprueba"/>
                                <L7p:ConvertVariablesToStrings booleanValue="false"/>
                                <L7p:GenerateXmlResult booleanValue="true"/>
                                <L7p:NamingMap mapValue="included">
                                    <L7p:entry>
                                    <L7p:key stringValue="response_text"/>
                                    <L7p:value stringValue="response_text"/>
                                    </L7p:entry>
                                    <L7p:entry>
                                    <L7p:key stringValue="flow_name"/>
                                    <L7p:value stringValue="flow_name"/>
                                    </L7p:entry>
                                    <L7p:entry>
                                    <L7p:key stringValue="step_name"/>
                                    <L7p:value stringValue="step_name"/>
                                    </L7p:entry>
                                </L7p:NamingMap>
                                <L7p:SqlQuery stringValueReference="inline"><![CDATA[SELECT flow_name, step_name,
       CASE 
           WHEN response_text = 'Regresar al menú anterior' THEN response_text
           WHEN row_num = total_rows THEN response_text
           ELSE CONCAT(response_text, '~')
       END AS response_text
FROM (
    SELECT flow_name, step_name, response_text,
           ROW_NUMBER() OVER (PARTITION BY flow_name ORDER BY 
               CASE 
                   WHEN response_text = 'Regresar al menú anterior' THEN 1 ELSE 0 
               END, response_text) AS row_num,
           COUNT(*) OVER (PARTITION BY flow_name) AS total_rows
    FROM responses_snr
    WHERE flow_name = ${StepName}
) AS subquery
ORDER BY row_num;]]></L7p:SqlQuery>
                                <L7p:VariablePrefix stringValue="rta"/>
                            </L7p:JdbcQuery>
                            <L7p:AuditDetailAssertion>
                                <L7p:Detail stringValue="rta: ${rta.response_text}"/>
                                <L7p:Level stringValue="WARNING"/>
                            </L7p:AuditDetailAssertion>
                            <L7p:HardcodedResponse>
                                <L7p:Base64ResponseBody stringValue="ewoJInJ0YSI6ICIke3J0YS5yZXNwb25zZV90ZXh0fSIsCgkic3RlcCI6IiR7cnRhLnN0ZXBfbmFtZX0iLAoJImZsb3ciOiIke3J0YS5mbG93X25hbWV9Igp9"/>
                                <L7p:ResponseContentType stringValue="text/json; charset=UTF-8"/>
                            </L7p:HardcodedResponse>
                        </wsp:All>
                        <wsp:All wsp:Usage="Required">
                            <L7p:ComparisonAssertion>
                                <L7p:CaseSensitive booleanValue="false"/>
                                <L7p:Expression1 stringValue="${StepName}"/>
                                <L7p:Operator operatorNull="null"/>
                                <L7p:Predicates predicates="included">
                                    <L7p:item dataType="included">
                                    <L7p:Type variableDataType="string"/>
                                    </L7p:item>
                                    <L7p:item binary="included">
                                    <L7p:Operator operator="CONTAINS"/>
                                    <L7p:RightValue stringValue="answer_flow"/>
                                    </L7p:item>
                                </L7p:Predicates>
                            </L7p:ComparisonAssertion>
                            <L7p:AuditDetailAssertion>
                                <L7p:Detail stringValue="comp2 ok"/>
                                <L7p:Level stringValue="WARNING"/>
                            </L7p:AuditDetailAssertion>
                            <L7p:JdbcQuery>
                                <L7p:ConnectionName stringValue="BDprueba"/>
                                <L7p:ConvertVariablesToStrings booleanValue="false"/>
                                <L7p:NamingMap mapValue="included">
                                    <L7p:entry>
                                    <L7p:key stringValue="response_text"/>
                                    <L7p:value stringValue="response_text"/>
                                    </L7p:entry>
                                    <L7p:entry>
                                    <L7p:key stringValue="flow_name"/>
                                    <L7p:value stringValue="flow_name"/>
                                    </L7p:entry>
                                    <L7p:entry>
                                    <L7p:key stringValue="step_name"/>
                                    <L7p:value stringValue="step_name"/>
                                    </L7p:entry>
                                </L7p:NamingMap>
                                <L7p:SqlQuery stringValue="select flow_name,step_name,response_text from responses_snr where flow_name = ${StepName} and step_name = ${FlowName};"/>
                                <L7p:VariablePrefix stringValue="rta"/>
                            </L7p:JdbcQuery>
                            <L7p:AuditDetailAssertion>
                                <L7p:Detail stringValue="rta: ${rta.response_text}"/>
                                <L7p:Level stringValue="WARNING"/>
                            </L7p:AuditDetailAssertion>
                            <L7p:HardcodedResponse>
                                <L7p:Base64ResponseBody stringValue="ewoJInJ0YSI6ICIke3J0YS5yZXNwb25zZV90ZXh0fSIsCgkic3RlcCI6IiR7cnRhLnN0ZXBfbmFtZX0iLAoJImZsb3ciOiIke3J0YS5mbG93X25hbWV9Igp9"/>
                                <L7p:ResponseContentType stringValue="text/json; charset=UTF-8"/>
                            </L7p:HardcodedResponse>
                        </wsp:All>
                    </wsp:OneOrMore>
                </wsp:All>
            </wsp:OneOrMore>
        </wsp:All>
    </wsp:Policy>
</exp:Export>
